(window.webpackJsonp=window.webpackJsonp||[]).push([[177],{GPTS:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),a=n("3Pt+"),r=n("TEn/"),o=n("tyNb"),l=n("mrSG"),s=n("26ZW"),d=n("9JJm"),c=n("qXBG"),h=n("AytR"),u=n("D+jN"),m=n("fXoL"),p=n("zxQZ");function f(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-item",18),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](e);const n=t.$implicit;return m["\u0275\u0275nextContext"](2).kick(n)})),m["\u0275\u0275elementStart"](1,"ion-thumbnail",19),m["\u0275\u0275element"](2,"img",20),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"ion-label"),m["\u0275\u0275elementStart"](4,"h3"),m["\u0275\u0275text"](5),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"p"),m["\u0275\u0275text"](7),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](8,"ion-note",21),m["\u0275\u0275elementStart"](9,"p"),m["\u0275\u0275text"](10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("src",e.avatar,m["\u0275\u0275sanitizeUrl"]),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",e.student_name," "),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.student_no),m["\u0275\u0275advance"](3),m["\u0275\u0275textInterpolate1"](" ",e.state_text," ")}}function g(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p",22),m["\u0275\u0275text"](1,"---\u6211\u662f\u6709\u5e95\u7ebf\u7684---"),m["\u0275\u0275elementEnd"]())}function v(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-list",15),m["\u0275\u0275template"](1,f,11,4,"ion-item",16),m["\u0275\u0275template"](2,g,2,0,"p",17),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngForOf",e.theGroupList),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",!e.hasMore)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a,r){this.orsv=e,this.activeRouter=t,this.router=n,this.auth=i,this.pickerController=a,this.cache=r,this.theFilter=new d.b,this.loading=!1,this.hasMore=!0}ngOnInit(){this.theFilter.TaskId=this.activeRouter.snapshot.paramMap.get("taskId"),this.the_type=this.activeRouter.snapshot.paramMap.get("type"),this.theFilter.Type=1,this.theFilter.PageIndex=1,this.theFilter.PageSize=10,"1"==this.the_type?this.theFilter.StatusType=6:"2"==this.the_type&&(this.theFilter.StatusType=2),this.init()}openFilter(){return Object(l.a)(this,void 0,void 0,(function*(){let e=[],t=[];"1"==this.the_type?(t.push({text:"\u5f85\u786e\u8ba4",value:"6"}),t.push({text:"\u5df2\u786e\u8ba4",value:"7"})):(t.push({text:"\u5f85\u5ba1\u6838",value:"2"}),t.push({text:"\u5ba1\u6838\u901a\u8fc7",value:"4"}),t.push({text:"\u5ba1\u6838\u4e0d\u901a\u8fc7",value:"3"}));let n=0;n=t.findIndex(e=>e.value==this.theFilter.StatusType),e.push({name:"1",selectedIndex:n,options:t}),(yield this.pickerController.create({buttons:[{role:"cancel",text:"\u53d6\u6d88",handler:()=>{}},{text:"\u786e\u5b9a",handler:e=>{this.theFilter.PageIndex=1,this.theFilter.StatusType=e[1].value,this.hasMore=!0,this.init()}}],columns:e})).present()}))}init(){return Object(l.a)(this,void 0,void 0,(function*(){this.user=yield this.auth.get_user(),1!=(yield this.auth.is_admin())&&(this.theFilter.UserCode=this.user.userCode);let e=yield this.cache.get("USER_ROLE");this.theFilter.UserType=e.userType,null!=this.the_event&&(this.the_event.target.disabled=!1,this.the_event.target.complete()),this.load()}))}load(){return Object(l.a)(this,void 0,void 0,(function*(){this.theGroupList=yield this.getData()}))}getData(){return Object(l.a)(this,void 0,void 0,(function*(){this.loading=!0;let e=(yield this.orsv.enrollstudent_list(this.theFilter)).data;return e.filter(e=>{null!=e.avatar&&""!=e.avatar||(e.avatar=h.a.default_avatar)}),this.loading=!1,e}))}search(e){return Object(l.a)(this,void 0,void 0,(function*(){this.load()}))}loadData(e){return Object(l.a)(this,void 0,void 0,(function*(){this.the_event=e,this.theFilter.PageIndex+=1;var t=yield this.getData();0==t.length?(e.target.disabled=!0,this.hasMore=!1):this.theGroupList=this.theGroupList.concat(t),e.target.complete()}))}kick(e){return Object(l.a)(this,void 0,void 0,(function*(){this.router.navigate(["/features/enroll/enroll-audit",{studentId:e.id}])}))}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](s.a),m["\u0275\u0275directiveInject"](o.a),m["\u0275\u0275directiveInject"](o.g),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](r.PickerController),m["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-enroll-list"]],decls:19,vars:5,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","tabs"],[1,"bgfff"],[1,"display-table","bgfff"],[1,"table-cell"],["placeholder","\u59d3\u540d/\u8eab\u4efd\u8bc1\u53f7","debounce","500",3,"animated","ngModel","ionChange","ngModelChange"],[1,"table-cell",2,"width","3rem"],[3,"click"],["aria-hidden","true",1,"icon"],[0,"xlink","href","#iconInterface58-24px"],[3,"show","loading"],["class","mt20 bgfff",4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","\u6b63\u5728\u52a0\u8f7d\u6570\u636e...."],[1,"mt20","bgfff"],["button","",3,"click",4,"ngFor","ngForOf"],["style","font-size: x-small; text-align: center;",4,"ngIf"],["button","",3,"click"],["slot","start",1,"avatar"],[1,"avatar-image",3,"src"],[2,"font-size","x-small"],[2,"font-size","x-small","text-align","center"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-header",0),m["\u0275\u0275elementStart"](1,"ion-toolbar"),m["\u0275\u0275elementStart"](2,"ion-buttons",1),m["\u0275\u0275element"](3,"ion-back-button",2),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"ion-title"),m["\u0275\u0275text"](5,"\u62a5\u5230\u8be6\u60c5"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"ion-content"),m["\u0275\u0275elementStart"](7,"div",3),m["\u0275\u0275elementStart"](8,"div",4),m["\u0275\u0275elementStart"](9,"div",5),m["\u0275\u0275elementStart"](10,"ion-searchbar",6),m["\u0275\u0275listener"]("ionChange",(function(e){return t.search(e)}))("ngModelChange",(function(e){return t.theFilter.SearchKeyword=e})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"div",7),m["\u0275\u0275elementStart"](12,"a",8),m["\u0275\u0275listener"]("click",(function(){return t.openFilter()})),m["\u0275\u0275namespaceSVG"](),m["\u0275\u0275elementStart"](13,"svg",9),m["\u0275\u0275element"](14,"use",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275namespaceHTML"](),m["\u0275\u0275element"](15,"app-loading-process",11),m["\u0275\u0275template"](16,v,3,2,"ion-list",12),m["\u0275\u0275elementStart"](17,"ion-infinite-scroll",13),m["\u0275\u0275listener"]("ionInfinite",(function(e){return t.loadData(e)})),m["\u0275\u0275element"](18,"ion-infinite-scroll-content",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("animated",!0)("ngModel",t.theFilter.SearchKeyword),m["\u0275\u0275advance"](5),m["\u0275\u0275property"]("show",(!t.theGroupList||0==t.theGroupList.length)&&0==t.loading)("loading",t.loading),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf",t.theGroupList))},directives:[r.IonHeader,r.IonToolbar,r.IonButtons,r.IonBackButton,r.IonBackButtonDelegate,r.IonTitle,r.IonContent,r.IonSearchbar,r.TextValueAccessor,a.NgControlStatus,a.NgModel,p.a,i.NgIf,r.IonInfiniteScroll,r.IonInfiniteScrollContent,r.IonList,i.NgForOf,r.IonItem,r.IonThumbnail,r.IonLabel,r.IonNote],styles:[".icon[_ngcontent-%COMP%]{width:2em;height:2em;vertical-align:-.5em;fill:currentColor;overflow:hidden}"]}),e})()}];let b=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.i.forChild(I)],o.i]}),e})();var S=n("Ql/B");n.d(t,"EnrollListPageModule",(function(){return y}));let y=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,a.FormsModule,r.IonicModule,b,S.a]]}),e})()}}]);