(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{pjjl:function(e,n,t){"use strict";t.r(n);var o=t("ofXK"),i=t("3Pt+"),s=t("TEn/"),r=t("tyNb"),a=t("mrSG"),c=t("BLr9"),l=t("fLLL"),d=t("fXoL");let u=(()=>{class e{constructor(e,n){this.platform=e,this.nativeAudio=n,this.sounds=[],this.audio_player=new Audio,this.forceWebAudio=!0}preload(e,n){this.platform.is("cordova")&&!this.forceWebAudio?(this.nativeAudio.preloadSimple(e,n),this.sounds.push({key:e,asset:n,isNative:!0})):((new Audio).src=n,this.sounds.push({key:e,asset:n,isNative:!1}))}play(e){let n=this.sounds.find(n=>n.key===e);n.isNative?this.nativeAudio.play(n.asset).then(e=>{console.log(e)},e=>{console.log(e)}):(this.audio_player.src=n.asset,this.audio_player.play())}}return e.\u0275fac=function(n){return new(n||e)(d["\u0275\u0275inject"](s.Platform),d["\u0275\u0275inject"](l.a))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const h=[{path:"",component:(()=>{class e{constructor(e,n,t,o){this.qrScanner=e,this.toast=n,this.audio=t,this.router=o,this.readyToScan=!1,this.scanning=!1}ngOnInit(){this.prepareScanner()}ngOnDestroy(){this.stopScanning()}ngAfterViewInit(){this.audio.preload("scanbeep","assets/sounds/qr_code_beep.mp3")}prepareScanner(){this.qrScanner.prepare().then(e=>{if(e.authorized){console.log("Camera permision authorized"),this.readyToScan=!0,this.scanning=!0;let e=this.qrScanner.scan().subscribe(n=>{this.audio.play("scanbeep"),console.log("Scanned something",n),this.navto(n),this.qrScanner.hide(),e.unsubscribe()});this.startScanning()}else e.denied?console.log("Camera permission permanently denied"):console.log("Camera permision temporarily denied")}).catch(e=>{console.log("Error is",e)})}toggleScanner(){this.scanning=!this.scanning,console.log("Toggled Scanner",this.scanning),this.scanning?this.startScanning():this.stopScanning()}startScanning(){console.log("Started Scanning"),window.document.querySelector("html").classList.add("cameraView"),this.qrScanner.show()}stopScanning(){console.log("Stopped Scanning"),window.document.querySelector("html").classList.remove("cameraView"),this.qrScanner.hide(),this.qrScanner.destroy()}presentToast(e){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.toast.create({message:e,color:"dark",duration:2e3})).present()}))}navto(e){this.stopScanning(),this.router.navigate(["/tabs/features/equipment"])}}return e.\u0275fac=function(n){return new(n||e)(d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](s.ToastController),d["\u0275\u0275directiveInject"](u),d["\u0275\u0275directiveInject"](r.g))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-qrscanner"]],decls:9,vars:0,consts:[["slot","start"],["defaultHref","tabs"],["id","container"],["src","assets/images/scan.gif",2,"width","128px","height","128px"]],template:function(e,n){1&e&&(d["\u0275\u0275elementStart"](0,"ion-header"),d["\u0275\u0275elementStart"](1,"ion-toolbar"),d["\u0275\u0275elementStart"](2,"ion-buttons",0),d["\u0275\u0275element"](3,"ion-back-button",1),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"ion-title"),d["\u0275\u0275text"](5,"\u626b\u63cf\u4e8c\u7ef4\u7801"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"ion-content"),d["\u0275\u0275elementStart"](7,"div",2),d["\u0275\u0275element"](8,"img",3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())},directives:[s.IonHeader,s.IonToolbar,s.IonButtons,s.IonBackButton,s.IonBackButtonDelegate,s.IonTitle,s.IonContent],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-background-color,transparent)}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(n){return new(n||e)},imports:[[r.i.forChild(h)],r.i]}),e})();t.d(n,"QrscannerPageModule",(function(){return g}));let g=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(n){return new(n||e)},imports:[[o.CommonModule,i.FormsModule,s.IonicModule,p]]}),e})()}}]);