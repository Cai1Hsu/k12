function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[142],{hB0V:function(e,t,n){"use strict";n.r(t);var r=n("TEn/"),i=n("tyNb"),o=n("ofXK"),a=n("3Pt+"),s=n("mrSG"),c=n("qXBG"),l=n("LWQN"),u=n("7w+u"),m=n("D+jN"),d=n("26ZW"),h=n("m/P+"),p=n("fXoL");function f(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",11),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=t.$implicit;return p["\u0275\u0275nextContext"](2).nav(e)})),p["\u0275\u0275elementStart"](1,"ion-badge",12),p["\u0275\u0275element"](2,"ion-icon",13),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"div"),p["\u0275\u0275elementStart"](4,"ion-label",14),p["\u0275\u0275text"](5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("color",r.color),p["\u0275\u0275advance"](1),p["\u0275\u0275classMapInterpolate1"]("iconfont ym-font ",r.icon,""),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",r.name," ")}}function v(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"div",11),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var e=t.$implicit;return p["\u0275\u0275nextContext"](3).nav(e)})),p["\u0275\u0275elementStart"](1,"ion-badge",12),p["\u0275\u0275element"](2,"ion-icon",13),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"div"),p["\u0275\u0275elementStart"](4,"ion-label",14),p["\u0275\u0275text"](5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;p["\u0275\u0275advance"](1),p["\u0275\u0275propertyInterpolate"]("color",r.color),p["\u0275\u0275advance"](1),p["\u0275\u0275classMapInterpolate1"]("iconfont ym-font ",r.icon,""),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate1"](" ",r.name," ")}}function g(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"ion-list"),p["\u0275\u0275elementStart"](1,"ion-list-header"),p["\u0275\u0275elementStart"](2,"ion-label",6),p["\u0275\u0275text"](3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,v,6,5,"div",9),p["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](n.appGroupName),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",n.appList)}}function b(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-content"),p["\u0275\u0275elementStart"](1,"div"),p["\u0275\u0275elementStart"](2,"ion-list"),p["\u0275\u0275elementStart"](3,"ion-list-header"),p["\u0275\u0275elementStart"](4,"ion-label",6),p["\u0275\u0275text"](5,"\u5e38\u7528\u7684"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"ion-buttons",7),p["\u0275\u0275elementStart"](7,"ion-button",8),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](n),p["\u0275\u0275nextContext"]().commonly()})),p["\u0275\u0275text"](8," \u7f16\u8f91 "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](9,f,6,5,"div",9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](10,g,5,2,"ion-list",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var r=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](9),p["\u0275\u0275property"]("ngForOf",r.user_commonly_app),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngForOf",r.the_app)}}var x,_=((x=function(){function e(t,n,r,i,o,a,s,c){_classCallCheck(this,e),this.router=t,this.auth=n,this.route=r,this.modalController=i,this.comm=o,this.cache=a,this.osrv=s,this.iab=c,this.user_commonly_app=[],this.the_app=[]}return _createClass(e,[{key:"init",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.get_user();case 2:return this.user=e.sent,e.next=5,this.auth.is_admin();case 5:return this.is_admin=e.sent,e.next=8,this.auth.is_teacher();case 8:return this.is_teacher=e.sent,e.next=11,this.auth.is_student();case 11:return this.is_student=e.sent,this.user_commonly_app=this.user.myMobileUsuallyAppList,e.next=15,this.cache.get("USER_ROLE");case 15:return this.user_role=e.sent,e.next=18,this.osrv.getRoleApp(this.user_role.roleID);case 18:return e.next=20,e.sent.data;case 20:this.the_app=e.sent;case 21:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnInit",value:function(){var e=this;this.route.url.subscribe((function(t){e.init()}))}},{key:"navto_teachers",value:function(){this.router.navigate(["/features/teachers"])}},{key:"navto_students",value:function(){this.router.navigate(["/features/students"])}},{key:"nav",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.url.startsWith("http")){t.next=14;break}return t.next=4,this.auth.get_token();case 4:return n=t.sent,t.next=7,this.cache.get("appId");case 7:return r=t.sent,t.next=10,this.cache.get("roleId");case 10:i=t.sent,this.iab.create(e.url+"?access_token="+n+"&roleId="+i+"&appId="+r,"_self").show(),t.next=15;break;case 14:this.router.navigate([e.url]);case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),this.comm.presentToast("\u529f\u80fd\u9519\u8bef\uff0c\u8bf7\u786e\u8ba4\u4f60\u5ba2\u6237\u7aef\u662f\u5426\u662f\u6700\u65b0\u7248\u672c\uff01");case 20:case"end":return t.stop()}}),t,this,[[0,17]])})))}},{key:"changeRole",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["/me/change-role/",{}]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"showSearch",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.is_student){e.next=4;break}this.router.navigate(["/features/teachers"]),e.next=7;break;case 4:return e.next=6,this.comm.presentModal(u.a,"",{title:"\u67e5  \u8be2",arr:[{title:"\u67e5\u6559\u5e08",icon:"iconjiaoshi",url:"/features/teachers"},{title:"\u67e5\u5b66\u751f",icon:"iconxuesheng",url:"/features/students"}]});case 6:e.sent.onDidDismiss().then((function(e){e.data&&0!=e.data.flag&&t.router.navigate([e.data.data.url])}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"commonly",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["/features/commonly-app"]);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||x)(p["\u0275\u0275directiveInject"](i.g),p["\u0275\u0275directiveInject"](c.a),p["\u0275\u0275directiveInject"](i.a),p["\u0275\u0275directiveInject"](r.ModalController),p["\u0275\u0275directiveInject"](l.a),p["\u0275\u0275directiveInject"](m.a),p["\u0275\u0275directiveInject"](d.a),p["\u0275\u0275directiveInject"](h.a))},x.\u0275cmp=p["\u0275\u0275defineComponent"]({type:x,selectors:[["app-features"]],viewQuery:function(e,t){var n;1&e&&p["\u0275\u0275viewQuery"](r.IonTabs,!0),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.tabs=n.first)},decls:8,vars:2,consts:[[1,"ion-no-border",3,"translucent"],[2,"color","#1d1d1f"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","Success"],["name","search-outline","size","medium"],[2,"color","#000000","font-size","0.9rem","font-weight","800"],["color","blues"],[2,"font-size","0.8rem","font-weight","800","margin-right","1rem",3,"click"],["class","box",3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"box",3,"click"],[3,"color"],["color","light"],[1,"app-name"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar"),p["\u0275\u0275elementStart"](2,"ion-title",1),p["\u0275\u0275text"](3," \u6570\u5b57\u6821\u56ed "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](4,b,11,2,"ion-content",2),p["\u0275\u0275elementStart"](5,"ion-fab",3),p["\u0275\u0275listener"]("click",(function(){return t.showSearch()})),p["\u0275\u0275elementStart"](6,"ion-fab-button",4),p["\u0275\u0275element"](7,"ion-icon",5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275property"]("translucent",!0),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngIf",t.the_app&&t.user_commonly_app))},directives:[r.IonHeader,r.IonToolbar,r.IonTitle,o.NgIf,r.IonFab,r.IonFabButton,r.IonIcon,r.IonContent,r.IonList,r.IonListHeader,r.IonLabel,r.IonButtons,r.IonButton,o.NgForOf,r.IonBadge],styles:["ion-icon[_ngcontent-%COMP%]{font-size:32px;--ionicon-stroke-width:16px}ion-item[_ngcontent-%COMP%]{--padding-start:10px;height:2rem}ion-badge[_ngcontent-%COMP%]{--padding-start:0.3rem;--padding-end:0.3rem;--padding-top:0.5rem;--padding-bottom:0.5rem;min-width:2.8rem}.iconfont[_ngcontent-%COMP%]{font-size:24px!important}.app-name[_ngcontent-%COMP%]{font-size:.6rem;color:#666}.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;vertical-align:-.15em;fill:currentColor;overflow:hidden}.title[_ngcontent-%COMP%]{font-weight:900;font-size:larger;text-align:left}.box[_ngcontent-%COMP%]{text-align:center;width:20%;display:inline-block;margin:1rem 0;position:relative}ion-list-header[_ngcontent-%COMP%]{height:2rem}"]}),x),w=n("qtYk");n.d(t,"FeaturesPageModule",(function(){return y}));var I,y=((I=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[r.IonicModule,o.CommonModule,a.FormsModule,w.a,i.i.forChild([{path:"",component:_}])]]}),I)}}]);