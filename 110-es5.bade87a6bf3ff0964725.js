function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{"6/gD":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("mrSG"),o=n("AytR"),a=n("a/9d"),i=n("fXoL"),l=function(){var e=function(){function e(t){_classCallCheck(this,e),this.camera=t,this.photos=[],this.photo_info=[]}return _createClass(e,[{key:"add_new",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={quality:o.a.quality,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,sourceType:this.camera.PictureSourceType.CAMERA,correctOrientation:!1,saveToPhotoAlbum:!1,targetWidth:o.a.image_width,targetHeight:o.a.image_height},e.next=3,this.camera.getPicture(t);case 3:n=e.sent,this.photo_info.push({base64:"data:image/jpeg;base64,"+n,ext:".jpg",name:"",url:""});case 5:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275inject"](a.a))},e.\u0275prov=i["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qXzE:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),i=n("tyNb"),l=n("mrSG"),s=n("amuj"),c=n("cq/f"),m=n("LWQN"),u=n("+71z"),d=n("fXoL");function h(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ion-grid"),d["\u0275\u0275elementStart"](1,"ion-row"),d["\u0275\u0275elementStart"](2,"ion-col"),d["\u0275\u0275elementStart"](3,"div"),d["\u0275\u0275elementStart"](4,"ion-label"),d["\u0275\u0275element"](5,"h3"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"div"),d["\u0275\u0275elementStart"](7,"ion-label"),d["\u0275\u0275element"](8,"p"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"ion-row"),d["\u0275\u0275elementStart"](10,"ion-col"),d["\u0275\u0275elementStart"](11,"ion-item",6),d["\u0275\u0275elementStart"](12,"ion-label",7),d["\u0275\u0275elementStart"](13,"h3"),d["\u0275\u0275text"](14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](15,"p",8),d["\u0275\u0275text"](16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](17,"ion-textarea",9),d["\u0275\u0275listener"]("ngModelChange",(function(e){return d["\u0275\u0275restoreView"](n),d["\u0275\u0275nextContext"]().the_model.comment=e})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](14),d["\u0275\u0275textInterpolate2"](" ",r.the_model.categoryName,"/ ",r.the_model.subCategoryName," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate1"](" ",r.the_model.studentName," "),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngModel",r.the_model.comment)}}var p,f,g=[{path:"",component:(p=function(){function e(t,n,r,o){_classCallCheck(this,e),this.ic=t,this.router=n,this.route=r,this.comm=o,this.the_model=new s.c}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.the_model.categoryName=t.get("categoryName"),e.the_model.categoryId=t.get("categoryId"),e.the_model.subCategoryId=t.get("subCategoryId"),e.the_model.subCategoryName=t.get("subCategoryName"),e.the_model.studentName=t.get("studentName"),e.the_model.StudentId=t.get("studentId"),e.init()}))}},{key:"init",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"submit",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.comm.loadingPresent("\u52a0\u8f7d\u4e2d...\uff01");case 2:if(t=e.sent,""!=this.the_model.comment&&null!=this.the_model.comment&&null!=this.the_model.comment){e.next=5;break}return e.abrupt("return",(t.dismiss(),void this.comm.presentToast("\u8bf7\u8f93\u5165\u63cf\u8ff0")));case 5:return n=new Array,this.uploader.the_records.forEach((function(e){n.push({url:e.url,thumbnail:e.thumbnail})})),this.the_model.photos=n,e.next=9,this.ic.publish(this.the_model);case 9:0==(r=e.sent).code?this.comm.presentAlert("\u53d1\u5e03\u6210\u529f\uff01",null,"\u7efc\u5408\u7d20\u8d28\u53d1\u5e03\u6210\u529f\uff0c\u8bf7\u95ee\u60a8\u8981\u7ee7\u7eed\u64cd\u4f5c\u5417\uff1f",[{text:"\u505c\u7559\u5728\u5f53\u524d\u9875\u9762",handler:function(e){o.the_model.photos=[],o.the_model.comment=void 0,o.uploader.the_records=[]}},{text:"\u8fd4\u56de\u81f3\u5217\u8868",handler:function(e){o.router.navigate(["/features/integrated-capability/integrated-capability-list"],{replaceUrl:!0,skipLocationChange:!0})}},{text:"\u7ee7\u7eed\u53d1\u5e03\u7efc\u5408\u7d20\u8d28",handler:function(e){history.back()}}]):this.comm.presentToast(r.msg),t.dismiss();case 11:case"end":return e.stop()}}),e,this)})))}}]),e}(),p.\u0275fac=function(e){return new(e||p)(d["\u0275\u0275directiveInject"](u.a),d["\u0275\u0275directiveInject"](i.g),d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](m.a))},p.\u0275cmp=d["\u0275\u0275defineComponent"]({type:p,selectors:[["app-integrated-capability-publish"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](c.a,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.uploader=n.first)},decls:13,vars:2,consts:[["slot","start"],["defaultHref","tabs"],[3,"ngSubmit"],["form","ngForm"],[4,"ngIf"],["expand","block","type","submit",3,"disabled"],[1,"ion-no-padding","ion-no-border"],["position","stacked"],["color","primary"],["rows","6","cols","20","placeholder","\u8bf7\u586b\u5199\u6d3b\u52a8\u5185\u5bb9","name","comment","required","",2,"font-size","small",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e){var n=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ion-header"),d["\u0275\u0275elementStart"](1,"ion-toolbar"),d["\u0275\u0275elementStart"](2,"ion-buttons",0),d["\u0275\u0275element"](3,"ion-back-button",1),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"ion-title"),d["\u0275\u0275text"](5,"\u7efc\u5408\u7d20\u8d28\u53d1\u5e03"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"ion-content"),d["\u0275\u0275elementStart"](7,"form",2,3),d["\u0275\u0275listener"]("ngSubmit",(function(){d["\u0275\u0275restoreView"](n);var e=d["\u0275\u0275reference"](8);return t.submit(e)})),d["\u0275\u0275template"](9,h,18,4,"ion-grid",4),d["\u0275\u0275element"](10,"app-upload-picture"),d["\u0275\u0275elementStart"](11,"ion-button",5),d["\u0275\u0275text"](12,"\u63d0\u4ea4"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){var r=d["\u0275\u0275reference"](8);d["\u0275\u0275advance"](9),d["\u0275\u0275property"]("ngIf",t.the_model),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("disabled",r.invalid)}},directives:[a.IonHeader,a.IonToolbar,a.IonButtons,a.IonBackButton,a.IonBackButtonDelegate,a.IonTitle,a.IonContent,o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.NgForm,r.NgIf,c.a,a.IonButton,a.IonGrid,a.IonRow,a.IonCol,a.IonLabel,a.IonItem,a.IonTextarea,a.TextValueAccessor,o.RequiredValidator,o.NgControlStatus,o.NgModel],styles:[""]}),p)}],b=((f=function e(){_classCallCheck(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:f}),f.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||f)},imports:[[i.i.forChild(g)],i.i]}),f),y=n("Ql/B");n.d(t,"IntegratedCapabilityPublishPageModule",(function(){return _}));var v,_=((v=function e(){_classCallCheck(this,e)}).\u0275mod=d["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[r.CommonModule,o.FormsModule,a.IonicModule,b,y.a]]}),v)}}]);