(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{hB0V:function(e,t,n){"use strict";n.r(t);var i=n("TEn/"),o=n("tyNb"),r=n("ofXK"),a=n("3Pt+"),l=n("mrSG"),s=n("qXBG"),c=n("LWQN"),d=n("7w+u"),m=n("D+jN"),u=n("26ZW"),h=n("m/P+"),p=n("tk/3"),f=n("fXoL");function g(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",11),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](2).nav(n)})),f["\u0275\u0275elementStart"](1,"ion-badge",12),f["\u0275\u0275element"](2,"ion-icon",13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"div"),f["\u0275\u0275elementStart"](4,"ion-label",14),f["\u0275\u0275text"](5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275propertyInterpolate"]("color",e.color),f["\u0275\u0275advance"](1),f["\u0275\u0275classMapInterpolate1"]("iconfont ym-font ",e.icon,""),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function v(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",11),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](3).nav(n)})),f["\u0275\u0275elementStart"](1,"ion-badge",12),f["\u0275\u0275element"](2,"ion-icon",13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"div"),f["\u0275\u0275elementStart"](4,"ion-label",14),f["\u0275\u0275text"](5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275propertyInterpolate"]("color",e.color),f["\u0275\u0275advance"](1),f["\u0275\u0275classMapInterpolate1"]("iconfont ym-font ",e.icon,""),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",e.name," ")}}function b(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"ion-list"),f["\u0275\u0275elementStart"](1,"ion-list-header"),f["\u0275\u0275elementStart"](2,"ion-label",6),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,v,6,5,"div",9),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](e.appGroupName),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.appList)}}function I(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"ion-content"),f["\u0275\u0275elementStart"](1,"div"),f["\u0275\u0275elementStart"](2,"ion-list"),f["\u0275\u0275elementStart"](3,"ion-list-header"),f["\u0275\u0275elementStart"](4,"ion-label",6),f["\u0275\u0275text"](5,"\u5e38\u7528\u7684"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"ion-buttons",7),f["\u0275\u0275elementStart"](7,"ion-button",8),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().commonly()})),f["\u0275\u0275text"](8," \u7f16\u8f91 "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](9,g,6,5,"div",9),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](10,b,5,2,"ion-list",10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](9),f["\u0275\u0275property"]("ngForOf",e.user_commonly_app),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.the_app)}}let y=(()=>{class e{constructor(e,t,n,i,o,r,a,l){this.router=e,this.auth=t,this.route=n,this.modalController=i,this.comm=o,this.cache=r,this.osrv=a,this.iab=l,this.user_commonly_app=[],this.the_app=[]}init(){return Object(l.a)(this,void 0,void 0,(function*(){this.user=yield this.auth.get_user(),this.is_admin=yield this.auth.is_admin(),this.is_teacher=yield this.auth.is_teacher(),this.is_student=yield this.auth.is_student(),this.user_commonly_app=this.user.myMobileUsuallyAppList,this.user_role=yield this.cache.get("USER_ROLE"),this.the_app=yield(yield this.osrv.getRoleApp(this.user_role.roleID)).data}))}ngOnInit(){this.route.url.subscribe(e=>{this.init()})}navto_teachers(){this.router.navigate(["/features/teachers"])}navto_students(){this.router.navigate(["/features/students"])}nav(e){return Object(l.a)(this,void 0,void 0,(function*(){try{if(e.url.startsWith("http")){var t=yield this.auth.get_token(),n=yield this.cache.get("roleId");const o=new p.f({fromObject:{access_token:t,roleId:n,appId:e.id.toString()}});var i=e.url;i.indexOf("?")>-1?i+="&":i+="?",this.iab.create(i+o.toString(),"_system").show()}else this.router.navigate([e.url])}catch(o){this.comm.presentToast("\u529f\u80fd\u9519\u8bef\uff0c\u8bf7\u786e\u8ba4\u4f60\u5ba2\u6237\u7aef\u662f\u5426\u662f\u6700\u65b0\u7248\u672c\uff01")}}))}changeRole(){return Object(l.a)(this,void 0,void 0,(function*(){this.router.navigate(["/me/change-role/",{}])}))}showSearch(){return Object(l.a)(this,void 0,void 0,(function*(){!0===this.is_student?this.router.navigate(["/features/teachers"]):(yield this.comm.presentModal(d.a,"",{title:"\u67e5  \u8be2",arr:[{title:"\u67e5\u6559\u5e08",icon:"iconjiaoshi",url:"/features/teachers"},{title:"\u67e5\u5b66\u751f",icon:"iconxuesheng",url:"/features/students"}]})).onDidDismiss().then(e=>{e.data&&0!=e.data.flag&&this.router.navigate([e.data.data.url])})}))}commonly(){return Object(l.a)(this,void 0,void 0,(function*(){this.router.navigate(["/features/commonly-app"])}))}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](o.g),f["\u0275\u0275directiveInject"](s.a),f["\u0275\u0275directiveInject"](o.a),f["\u0275\u0275directiveInject"](i.ModalController),f["\u0275\u0275directiveInject"](c.a),f["\u0275\u0275directiveInject"](m.a),f["\u0275\u0275directiveInject"](u.a),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-features"]],viewQuery:function(e,t){var n;1&e&&f["\u0275\u0275viewQuery"](i.IonTabs,!0),2&e&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.tabs=n.first)},decls:8,vars:1,consts:[[1,"ion-no-border"],[2,"color","#1d1d1f"],[4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed",3,"click"],["color","Success"],["name","search-outline","size","medium"],[2,"color","#000000","font-size","0.9rem","font-weight","800"],["color","blues"],[2,"font-size","0.8rem","font-weight","800","margin-right","1rem",3,"click"],["class","box",3,"click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"box",3,"click"],[3,"color"],["color","light"],[1,"app-name"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-header",0),f["\u0275\u0275elementStart"](1,"ion-toolbar"),f["\u0275\u0275elementStart"](2,"ion-title",1),f["\u0275\u0275text"](3," \u6570\u5b57\u6821\u56ed "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,I,11,2,"ion-content",2),f["\u0275\u0275elementStart"](5,"ion-fab",3),f["\u0275\u0275listener"]("click",(function(){return t.showSearch()})),f["\u0275\u0275elementStart"](6,"ion-fab-button",4),f["\u0275\u0275element"](7,"ion-icon",5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",t.the_app&&t.user_commonly_app))},directives:[i.IonHeader,i.IonToolbar,i.IonTitle,r.NgIf,i.IonFab,i.IonFabButton,i.IonIcon,i.IonContent,i.IonList,i.IonListHeader,i.IonLabel,i.IonButtons,i.IonButton,r.NgForOf,i.IonBadge],styles:["ion-icon[_ngcontent-%COMP%]{font-size:32px;--ionicon-stroke-width:16px}ion-item[_ngcontent-%COMP%]{--padding-start:10px;height:2rem}ion-badge[_ngcontent-%COMP%]{--padding-start:0.3rem;--padding-end:0.3rem;--padding-top:0.5rem;--padding-bottom:0.5rem;min-width:2.8rem}.iconfont[_ngcontent-%COMP%]{font-size:24px!important}.app-name[_ngcontent-%COMP%]{font-size:.6rem;color:#666}.icon[_ngcontent-%COMP%]{width:1rem;height:1rem;vertical-align:-.15em;fill:currentColor;overflow:hidden}.title[_ngcontent-%COMP%]{font-weight:900;font-size:larger;text-align:left}.box[_ngcontent-%COMP%]{text-align:center;width:20%;display:inline-block;margin:1rem 0;position:relative}ion-list-header[_ngcontent-%COMP%]{height:2rem}"]}),e})();var _=n("qtYk");n.d(t,"FeaturesPageModule",(function(){return S}));let S=(()=>{class e{}return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.IonicModule,r.CommonModule,a.FormsModule,_.a,o.i.forChild([{path:"",component:y}])]]}),e})()}}]);