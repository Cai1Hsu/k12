function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{PKS2:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),l=n("tyNb"),i=n("mrSG"),s=n("4VNH"),c=n("26ZW"),d=n("AytR"),m=n("qXBG"),u=n("LWQN"),h=n("fXoL");function p(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-list"),h["\u0275\u0275elementStart"](1,"ion-item"),h["\u0275\u0275elementStart"](2,"ion-thumbnail",3),h["\u0275\u0275element"](3,"img",4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"ion-label"),h["\u0275\u0275text"](5),h["\u0275\u0275elementStart"](6,"ion-text",5),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275element"](8,"p"),h["\u0275\u0275element"](9,"p"),h["\u0275\u0275elementStart"](10,"p"),h["\u0275\u0275text"](11),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](12,"ion-badge",6),h["\u0275\u0275text"](13),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](14,"ion-item"),h["\u0275\u0275elementStart"](15,"ion-label"),h["\u0275\u0275elementStart"](16,"h3"),h["\u0275\u0275text"](17,"\u8bf7\u5047\u7c7b\u578b"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](18,"ion-label"),h["\u0275\u0275elementStart"](19,"h3"),h["\u0275\u0275text"](20),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](21,"ion-item"),h["\u0275\u0275elementStart"](22,"ion-label"),h["\u0275\u0275elementStart"](23,"h3"),h["\u0275\u0275text"](24,"\u8bf7\u5047\u65b9\u5f0f"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](25,"ion-label"),h["\u0275\u0275elementStart"](26,"h3"),h["\u0275\u0275text"](27),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](28,"ion-item"),h["\u0275\u0275elementStart"](29,"ion-label"),h["\u0275\u0275elementStart"](30,"h3"),h["\u0275\u0275text"](31,"\u8bf7\u5047\u4e8b\u7531"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](32,"ion-label",7),h["\u0275\u0275elementStart"](33,"h3"),h["\u0275\u0275text"](34),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](35,"ion-item"),h["\u0275\u0275elementStart"](36,"ion-label"),h["\u0275\u0275elementStart"](37,"h3"),h["\u0275\u0275text"](38,"\u65f6\u95f4"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](39,"ion-label",7),h["\u0275\u0275elementStart"](40,"h3"),h["\u0275\u0275text"](41),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](42,"ion-item"),h["\u0275\u0275elementStart"](43,"ion-label"),h["\u0275\u0275elementStart"](44,"h3"),h["\u0275\u0275text"](45,"\u7533\u8bf7\u65f6\u95f4"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](46,"ion-label"),h["\u0275\u0275elementStart"](47,"h3"),h["\u0275\u0275text"](48),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](49,"ion-item"),h["\u0275\u0275elementStart"](50,"ion-label"),h["\u0275\u0275elementStart"](51,"h3"),h["\u0275\u0275text"](52,"\u7533\u8bf7\u4eba"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](53,"ion-label"),h["\u0275\u0275elementStart"](54,"h3"),h["\u0275\u0275text"](55),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](56,"ion-item"),h["\u0275\u0275elementStart"](57,"ion-label"),h["\u0275\u0275elementStart"](58,"h3"),h["\u0275\u0275text"](59,"\u5ba1\u6838\u65f6\u95f4"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](60,"ion-label"),h["\u0275\u0275elementStart"](61,"h3"),h["\u0275\u0275text"](62),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](63,"ion-item"),h["\u0275\u0275elementStart"](64,"ion-label"),h["\u0275\u0275elementStart"](65,"h3"),h["\u0275\u0275text"](66,"\u5ba1\u6838\u4eba"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](67,"ion-label"),h["\u0275\u0275elementStart"](68,"h3"),h["\u0275\u0275text"](69),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](70,"ion-item"),h["\u0275\u0275elementStart"](71,"ion-label"),h["\u0275\u0275elementStart"](72,"h3"),h["\u0275\u0275text"](73,"\u5ba1\u6838\u610f\u89c1"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](74,"ion-label",7),h["\u0275\u0275elementStart"](75,"h3"),h["\u0275\u0275text"](76),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](3),h["\u0275\u0275property"]("src",n.the_record.student.avatar,h["\u0275\u0275sanitizeUrl"]),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",n.the_record.student.name," "),h["\u0275\u0275advance"](1),h["\u0275\u0275propertyInterpolate"]("color",n.status_color),h["\u0275\u0275advance"](1),h["\u0275\u0275textInterpolate1"](" \xa0\xa0\xa0",n.the_record.status_text," "),h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate"](n.the_record.student.registerid),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",n.the_record.student.grade.name," "),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.leave_type),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.occurence),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.reason),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.leave_data_description),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.submit_on),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.reputy_by),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](0==n.the_record.status?"":n.the_record.approve_on),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](0==n.the_record.status?"":n.the_record.approve_by),h["\u0275\u0275advance"](7),h["\u0275\u0275textInterpolate"](n.the_record.approve_remark)}}function f(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"ion-footer"),h["\u0275\u0275elementStart"](1,"ion-grid"),h["\u0275\u0275elementStart"](2,"ion-row"),h["\u0275\u0275elementStart"](3,"ion-col"),h["\u0275\u0275elementStart"](4,"ion-button",8),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().audit(!0)})),h["\u0275\u0275element"](5,"ion-icon",9),h["\u0275\u0275text"](6,"\u901a\u8fc7 "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"ion-col"),h["\u0275\u0275elementStart"](8,"ion-button",10),h["\u0275\u0275listener"]("click",(function(){return h["\u0275\u0275restoreView"](n),h["\u0275\u0275nextContext"]().audit(!1)})),h["\u0275\u0275element"](9,"ion-icon",11),h["\u0275\u0275text"](10,"\u62d2\u7edd "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}var v,E,x=[{path:"",component:(v=function(){function e(t,n,r,a,o){_classCallCheck(this,e),this.osrv=t,this.route=n,this.alertController=r,this.auth=a,this.comm=o,this.isTeacher=!1,this.status_color="success"}return _createClass(e,[{key:"ngOnInit",value:function(){this.load()}},{key:"load",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.route.params.subscribe((function(e){return Object(i.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.comm.loadingPresent();case 2:return n=t.sent,this.theId=e.id,t.next=6,this.osrv.get_leave_detail(e.id);case 6:if(r=t.sent,this.the_record=r.data,!this.the_record){t.next=16;break}t.t0=this.the_record.status,t.next=0===t.t0?11:1===t.t0?13:2===t.t0?15:16;break;case 11:return this.status_color="primary",t.abrupt("break",16);case 13:return this.status_color="success",t.abrupt("break",16);case 15:this.status_color="danger";case 16:this.the_record&&this.the_record.student&&(""==this.the_record.student.avatar||null==this.the_record.student.avatar)&&(this.the_record.student.avatar=d.a.default_avatar),n.dismiss();case 17:case"end":return t.stop()}}),t,this)})))})),e.next=3,this.auth.get_user();case 3:this.theUser=e.sent,this.theUser.roles.forEach((function(e){4==e.userType&&(t.isTeacher=!0)}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"audit",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=4;break}this.audit_post(!0,"\u8bf7\u5047\u901a\u8fc7"),t.next=9;break;case 4:return t.next=6,this.alertController.create({header:"\u8bf7\u8f93\u5165\u62d2\u7edd\u539f\u56e0",inputs:[{name:"reason",type:"textarea",placeholder:"\u8bf7\u8f93\u5165\u62d2\u7edd\u539f\u56e0"}],buttons:[{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:function(){}},{text:"\u786e\u5b9a",handler:function(e){if(""==e.reason)return r.comm.presentToast("\u8bf7\u8f93\u5165\u62d2\u7edd\u539f\u56e0"),!1;r.audit_post(!1,e.reason)}}]});case 6:return n=t.sent,t.next=9,n.present();case 9:case"end":return t.stop()}}),t,this)})))}},{key:"audit_post",value:function(e,t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(r=new s.a).Audit=e,r.Reason=t,r.Id=this.theId,r.UserName=this.theUser.userName,this.osrv.post_leave_audit(r).then((function(e){return"0"==e.code?(a.comm.presentToast("\u5ba1\u6838\u6210\u529f"),a.load(),!1):(a.comm.presentToast(e.msg),!1)}));case 2:case"end":return n.stop()}}),n,this)})))}}]),e}(),v.\u0275fac=function(e){return new(e||v)(h["\u0275\u0275directiveInject"](c.a),h["\u0275\u0275directiveInject"](l.a),h["\u0275\u0275directiveInject"](o.AlertController),h["\u0275\u0275directiveInject"](m.a),h["\u0275\u0275directiveInject"](u.a))},v.\u0275cmp=h["\u0275\u0275defineComponent"]({type:v,selectors:[["app-leaves-detail"]],decls:9,vars:2,consts:[["slot","start"],["defaultHref","tabs"],[4,"ngIf"],["slot","start",1,"avatar"],[1,"avatar-image",3,"src"],[2,"font-size","small",3,"color"],["slot","end",1,"grade_badge"],[1,"ion-text-wrap"],["color","primary","expand","block",3,"click"],["name","checkmark-outline"],["color","danger","expand","block",3,"click"],["name","close-outline"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"ion-header"),h["\u0275\u0275elementStart"](1,"ion-toolbar"),h["\u0275\u0275elementStart"](2,"ion-buttons",0),h["\u0275\u0275element"](3,"ion-back-button",1),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"ion-title"),h["\u0275\u0275text"](5,"\u5b66\u751f\u8bf7\u5047\u660e\u7ec6"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"ion-content"),h["\u0275\u0275template"](7,p,77,15,"ion-list",2),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](8,f,11,0,"ion-footer",2)),2&e&&(h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.the_record),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",t.the_record&&0==t.the_record.status&&t.isTeacher))},directives:[o.IonHeader,o.IonToolbar,o.IonButtons,o.IonBackButton,o.IonBackButtonDelegate,o.IonTitle,o.IonContent,r.NgIf,o.IonList,o.IonItem,o.IonThumbnail,o.IonLabel,o.IonText,o.IonBadge,o.IonFooter,o.IonGrid,o.IonRow,o.IonCol,o.IonButton,o.IonIcon],styles:[".grade_badge[_ngcontent-%COMP%]{background:#e3e8fb;color:#42316d;font-weight:400}"]}),v)}],S=((E=function e(){_classCallCheck(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:E}),E.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||E)},imports:[[l.i.forChild(x)],l.i]}),E);n.d(t,"LeavesDetailPageModule",(function(){return _}));var b,_=((b=function e(){_classCallCheck(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:b}),b.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||b)},imports:[[r.CommonModule,a.FormsModule,o.IonicModule,S]]}),b)}}]);