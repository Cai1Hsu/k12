function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{"Ql/B":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("ofXK"),a=n("TEn/"),i=n("3Pt+"),o=n("UMfn"),c=n("xiOZ"),s=n("/l6y"),l=n("L1u3"),d=n("8pq7"),m=n("ZE2D"),u=n("DKVz"),h=n("DXzV"),p=n("fXoL"),f=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,a.IonicModule,i.FormsModule,o.a,c.b,s.d,d.c,d.b,d.e,d.a,d.f,l.b,u.a,m.b,h.b],o.a,l.b,d.c,d.b,d.e,d.a,d.f,m.b,h.b]}),e}()},ZE2D:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return g}));var r=n("207e"),a=n("JMSK"),i=n("fXoL"),o=n("2Suw"),c=n("/KA4"),s=n("IjuJ"),l=n("ofXK"),d=n("FwiY"),m=["textEl"];function u(e,t){if(1&e&&i["\u0275\u0275element"](0,"i",3),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("nzType",n.nzIcon)}}function h(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"img",4),i["\u0275\u0275listener"]("error",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().imgError(e)})),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("src",r.nzSrc,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275attribute"]("srcset",r.nzSrcSet,i["\u0275\u0275sanitizeUrl"])("alt",r.nzAlt)}}function p(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",5,6),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",n.textStyles),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.nzText)}}var f=["*"],v=function(){var e=function(){function e(t,n,r,a){_classCallCheck(this,e),this.nzConfigService=t,this.elementRef=n,this.cdr=r,this.platform=a,this._nzModuleName="avatar",this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new i.EventEmitter,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.textStyles={},this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement,this.elementRef.nativeElement.classList.add("ant-avatar")}return _createClass(e,[{key:"imgError",value:function(e){this.nzError.emit(e),e.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}},{key:"ngOnChanges",value:function(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}},{key:"calcStringSize",value:function(){if(this.hasText){var e=this.textEl.nativeElement.offsetWidth,t=this.el.getBoundingClientRect().width,n=2*this.nzGap<t?2*this.nzGap:8;this.textStyles={transform:"scale(".concat(t-n<e?(t-n)/e:1,") translateX(-50%)")},this.customSize&&Object.assign(this.textStyles,{lineHeight:this.customSize}),this.cdr.detectChanges()}}},{key:"notifyCalc",value:function(){var e=this;this.platform.isBrowser&&setTimeout((function(){e.calcStringSize()}))}},{key:"setSizeStyle",value:function(){this.customSize="number"==typeof this.nzSize?"".concat(this.nzSize,"px"):null,this.cdr.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](o.a),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-avatar"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](m,!0),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.textEl=n.first)},hostVars:20,hostBindings:function(e,t){2&e&&(i["\u0275\u0275styleProp"]("width",t.customSize)("height",t.customSize)("line-height",t.customSize)("font-size",t.hasIcon&&t.customSize?t.nzSize/2:null,"px"),i["\u0275\u0275classProp"]("ant-avatar-lg","large"===t.nzSize)("ant-avatar-sm","small"===t.nzSize)("ant-avatar-square","square"===t.nzShape)("ant-avatar-circle","circle"===t.nzShape)("ant-avatar-icon",t.nzIcon)("ant-avatar-image",t.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[i["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,u,1,1,"i",0),i["\u0275\u0275template"](1,h,1,3,"img",1),i["\u0275\u0275template"](2,p,3,2,"span",2)),2&e&&(i["\u0275\u0275property"]("ngIf",t.nzIcon&&t.hasIcon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.nzSrc&&t.hasSrc),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.nzText&&t.hasText))},directives:[l.NgIf,d.a,l.NgStyle],encapsulation:2,changeDetection:0}),Object(r.a)([Object(o.b)(),Object(r.b)("design:type",String)],e.prototype,"nzShape",void 0),Object(r.a)([Object(o.b)(),Object(r.b)("design:type",Object)],e.prototype,"nzSize",void 0),Object(r.a)([Object(o.b)(),Object(c.b)(),Object(r.b)("design:type",Object)],e.prototype,"nzGap",void 0),e}(),g=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-avatar-group"]],hostAttrs:[1,"ant-avatar-group"],exportAs:["nzAvatarGroup"],ngContentSelectors:f,decls:1,vars:0,template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275projection"](0))},encapsulation:2,changeDetection:0}),e}(),x=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.a,l.CommonModule,d.b,a.b]]}),e}()},h2Q0:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("mrSG"),a=n("B7Rs"),i=n("FAH8"),o=n("LWQN"),c=n("AytR"),s=n("WOgW"),l=n("vZKB"),d=n("fXoL"),m=n("TEn/"),u=function(){var e=function(){function e(t,n,r,a,i,o){_classCallCheck(this,e),this.transfer=t,this.file=n,this.platform=r,this.comm=a,this.androidPermissions=i,this.openNativeSettings=o,this.fileTransfer=this.transfer.create()}return _createClass(e,[{key:"getCover",value:function(e){var t="yuwen";switch(e){case"\u8bed\u6587":t="yuwen";break;case"\u6570\u5b66":t="shuxue";break;case"\u73ed\u4f1a":t="banhui";break;case"\u521b\u65b0":t="chuangxin";break;case"\u9053\u5fb7\u4e0e\u6cd5\u5236":t="daodeyufazhi";break;case"\u5bfc\u5e08\u73ed":t="daoshiban";break;case"\u5bfc\u5e08\u8bfe":t="daoshike";break;case"\u5bfc\u5e08\u81ea\u4e60\u8bfe":t="daoshizixike";break;case"\u5730\u7406":t="dili";break;case"\u5316\u5b66":t="huaxue";break;case"\u6280\u672f":t="jishu";break;case"\u79d1\u521b/\u52b3\u6280":t="kechuanglaoji";break;case"\u5386\u53f2":t="lishi";break;case"\u793c\u4eea":t="liyi";break;case"\u7f8e\u672f":t="meishu";break;case"\u751f\u7269":t="shengwu";break;case"\u751f\u6daf\u6559\u80b2\u804c\u4e1a\u4f53\u9a8c\u5355\u4f4d":t="shengyajiaoyuzhiyetiyandanwei";break;case"\u793e\u56e2":t="shetuan";break;case"\u4e66\u6cd5":t="shufa";break;case"\u601d\u54c1":case"\u601d\u60f3\u54c1\u5fb7":t="sipin";break;case"\u4f53\u953b":t="tiduan";break;case"\u4f53\u80b2":t="tiyu";break;case"\u901a\u7528\u6280\u672f":t="tongyongjishu";break;case"\u5916\u6559":t="waijiao";break;case"\u665a\u81ea\u4e60":t="wanzixi";break;case"\u7269\u7406":t="wuli";break;case"\u6821\u672c":t="xiaoben";break;case"\u6821\u672c\u9009\u4fee":t="xiaobenxuanxiu";break;case"\u5fc3\u7406":t="xinli";break;case"\u4fe1\u606f\u6280\u672f":t="xinxijishu";break;case"\u9009\u4fee\uff08\u8bed\uff09":t="xuanxiuyu";break;case"\u7814\u7a76\u6027\u5b66\u4e60":t="yanjiuxingxuexi";break;case"\u82f1\u8bed":t="yingyu";break;case"\u97f3\u4e50":t="yinyue";break;case"\u827a\u672f":t="yishu";break;case"\u8bed\u6587\uff08\u9009\uff09":t="yuwenxuan";break;case"\u653f\u6cbb":t="zhengzhi";break;case"\u81ea\u4e60":t="zixi"}return"assets/images/subject/"+t+".png"}},{key:"getYear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=(new Date).getFullYear(),r=[],a=n-9;a<=n+1;a++)r.push({id:a.toString(),name:a+"\u5e74",selected:n==a&&e,hasChild:!1,child:null,catalogs:null,level:0});return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))}},{key:"downLoad",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"szymr",a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var d,m=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d="",n||(n=c.a.root_directory),1==this.platform.is("ios")){r.next=10;break}return r.next=5,this.file.createDir(this.file.dataDirectory,n,!0);case 5:r.t1=r.sent.toURL(),r.t2=t,r.t0=r.t1+r.t2,r.next=11;break;case 10:r.t0=this.file.documentsDirectory+t;case 11:d=r.t0,i&&i(),this.fileTransfer=this.transfer.create(),l&&(this.fileTransfer.onProgress=function(e){l(e)}),this.fileTransfer.download(e,d,!1,{headers:{Authorization:"Bearer "+a}}).then((function(e){o&&o(e)})).catch((function(e){switch(e.code){case 1:m.comm.presentToast("\u6587\u4ef6\u4e0d\u5b58\u5728\uff01");break;case 2:m.comm.presentToast("\u4e0b\u8f7d\u5730\u5740\u9519\u8bef\uff01");break;case 3:m.comm.presentToast("\u7f51\u7edc\u8fde\u63a5\u9519\u8bef\uff01");break;case 4:m.comm.presentToast("\u624b\u52a8\u7ec8\u6b62\u4e86\u4e0b\u8f7d\uff01");break;case 5:m.comm.presentToast("\u6ca1\u6709\u6743\u9650\uff01")}s&&s(e)}));case 16:case"end":return r.stop()}}),r,this)})))}},{key:"checkPermission",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE);case 3:return t=e.sent,e.abrupt("return",(1!=t.hasPermission&&this.comm.presentAlertConfirm("\u6743\u9650\u63d0\u793a","\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\u4e0d\u5141\u8bb8\u5b58\u50a8\u4e0e\u8bbf\u95ee\u6240\u6709\u7c7b\u578b\u6587\u4ef6\uff0c\u8bf7\u8fdb\u5165\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\uff0c\u5f00\u542f\u5b58\u50a8\u7a7a\u95f4\uff01",[{text:"\u4e0b\u6b21\u8bbe\u7f6e"},{text:"\u597d\u7684\uff0c\u53bb\u8bbe\u7f6e",handler:function(e){return Object(r.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openNativeSettings.open("application_details");case 2:case"end":return e.stop()}}),e,this)})))}}]),t.hasPermission));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getMessageFrom",value:function(e){var t=[];return"notice"==e&&(t.push({edit:!1,id:"1",value:1,name:"\u5fb7\u80b2",selected:!1}),t.push({edit:!1,id:"2",value:2,name:"\u8bf7\u5047",selected:!1}),t.push({edit:!1,id:"3",value:3,name:"\u7efc\u5408\u7d20\u8d28",selected:!1}),t.push({edit:!1,id:"4",value:4,name:"\u5bbf\u820d\u8003\u8bc4",selected:!1}),t.push({edit:!1,id:"5",value:5,name:"\u8c03\u8bfe",selected:!1}),t.push({edit:!1,id:"6",value:6,name:"\u7814\u7a76\u6027\u5b66\u4e60",selected:!1}),t.push({edit:!1,id:"8",value:7,name:"\u529f\u80fd\u5ba4",selected:!1}),t.push({edit:!1,id:"8",value:8,name:"\u5f02\u5e38\u5f52\u5bdd",selected:!1})),"todo"==e&&(t.push({edit:!1,id:"2",value:2,name:"\u8bf7\u5047",selected:!1}),t.push({edit:!1,id:"3",value:3,name:"\u7efc\u5408\u7d20\u8d28",selected:!1}),t.push({edit:!1,id:"8",value:7,name:"\u529f\u80fd\u5ba4",selected:!1})),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275inject"](a.a),d["\u0275\u0275inject"](i.a),d["\u0275\u0275inject"](m.Platform),d["\u0275\u0275inject"](o.a),d["\u0275\u0275inject"](s.a),d["\u0275\u0275inject"](l.a))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},zqCP:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("3Pt+"),i=n("TEn/"),o=n("tyNb"),c=n("mrSG"),s=n("wd/R"),l=n("qXBG"),d=n("AFSq"),m=n("LWQN"),u=n("YtY+"),h=n("m88C"),p=n("AytR"),f=n("B7Rs"),v=n("FAH8"),g=n("D+jN"),x=n("te5A"),y=n("h2Q0"),b=n("fXoL"),_=n("L1u3"),k=n("tk/3"),w=n("jhN1"),C=n("xiOZ");function S(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",1),b["\u0275\u0275element"](1,"onlyoffice",2),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("config",n.myConfig)}}function I(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",1),b["\u0275\u0275element"](1,"iframe",3),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("src",n.url,b["\u0275\u0275sanitizeResourceUrl"])}}var z,E,T,R=((z=function(){function e(t,n){_classCallCheck(this,e),this.platform=t,this.sanitizer=n,this.showIframe=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t="word";if([".doc",".docm",".docx",".dot",".dotm",".dotx",".epub",".fodt",".htm",".html",".mht",".odt",".ott",".pdf",".rtf",".txt",".djvu",".xps"].filter((function(t){return e.data.doc.fileType==t})).length>0&&(t="word"),[".csv",".fods",".ods",".ots",".xls",".xlsm",".xlsx",".xlt",".xltm",".xltx","wps"].filter((function(t){return e.data.doc.fileType==t})).length>0&&(t="cell"),[".fodp",".odp",".otp",".pot",".potm",".potx",".pps",".ppsm",".ppsx",".ppt",".pptm",".pptx"].filter((function(t){return e.data.doc.fileType==t})).length>0&&(t="slide"),this.platform.is("ios")){this.showIframe=!0;var n=new k.f({fromObject:{documentType:t,url:encodeURI(this.data.url),title:this.data.doc.name+this.data.doc.fileType,fileType:this.data.doc.fileType.replace(".","")}});this.url=this.sanitizer.bypassSecurityTrustResourceUrl(p.a.only_office_preview+"?"+n.toString())}else this.myConfig={editorConfig:{document:{fileType:this.data.doc.fileType.replace(".",""),info:{author:this.data.teacherName,created:this.data.uploadTime},key:this.data.doc.id,permissions:{download:!1,edit:!1,comment:!1,changeHistory:!1,copy:!1,fillForms:!1,modifyContentControl:!1,modifyFilter:!1,print:!1,review:!1},title:this.data.doc.name+this.data.doc.fileType,url:this.data.url},documentType:t,editorConfig:{mode:"view",callbackUrl:"",user:{id:"",name:""},customization:{goback:{url:null},help:!1,leftMenu:!1,hideRightMenu:!0,hideLeftMenu:!0,autosave:!1,chat:!1,comments:!1,compactHeader:!1,compactToolbar:!1,compatibleFeatures:!1,macros:!1,mentionShare:!1,reviewDisplay:"original",showReviewChanges:!1,spellcheck:!0,toolbarHideFileName:!1,toolbarNoTabs:!0},embedded:null,lang:"zh-CN"},events:{onBack:console.log,onDocumentStateChange:console.log,onError:console.log,onReady:console.log,onRequestEditRights:console.log,onSave:console.log},height:"100%",type:"embedded",width:"100%"},script:p.a.only_office}}}]),e}()).\u0275fac=function(e){return new(e||z)(b["\u0275\u0275directiveInject"](i.Platform),b["\u0275\u0275directiveInject"](w.b))},z.\u0275cmp=b["\u0275\u0275defineComponent"]({type:z,selectors:[["app-resource-office-viewer"]],inputs:{data:"data"},decls:2,vars:2,consts:[["style","height: 40rem;",4,"ngIf"],[2,"height","40rem"],[3,"config"],["frameborder","0","allowfullscreen","","onmousewheel","",2,"height","100%","width","100%",3,"src"]],template:function(e,t){1&e&&(b["\u0275\u0275template"](0,S,2,1,"div",0),b["\u0275\u0275template"](1,I,2,1,"div",0)),2&e&&(b["\u0275\u0275property"]("ngIf",1!=t.showIframe),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===t.showIframe))},directives:[r.NgIf,C.a],styles:[""]}),z),O={play:"\u64ad\u653e",pause:"\u6682\u505c",randomWord:"Rastgele kelime",playback:"randomWord",scrubber:"scrubber",scrubberLabel:"scrubberLabel",played:"played",duration:"duration",buffered:"buffered",close:"close",currentTime:"currentTime",live:"live",volume:"\u58f0\u97f3",mute:"\u9759\u97f3",unmute:"\u5173\u95ed\u9759\u97f3",captions:"captions",audio:"audio",default:"\u9ed8\u8ba4",subtitlesOrCc:"subtitlesOrCc",disableCaptions:"disableCaptions",enableCaptions:"enableCaptions",auto:"\u81ea\u52a8",fullscreen:"\u5168\u5c4f",enterFullscreen:"\u56de\u8f66\u5168\u5c4f",exitFullscreen:"\u9000\u51fa\u5168\u5c4f",settings:"\u8bbe\u7f6e",seekBackward:"seekBackward",seekForward:"seekForward",seekTotal:"seekTotal",normal:"normal",none:"none",playbackRate:"playbackRate",playbackQuality:"playbackQuality",loop:"\u5faa\u73af",disabled:"\u7981\u7528",off:"\u5173\u95ed",enabled:"\u542f\u7528",pip:"pip",enterPiP:"enterPiP",exitPiP:"exitPiP"},j=n("/l6y"),M=["player"],P=((E=function(){function e(){_classCallCheck(this,e),this.translations={zh:O}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"vmReady",value:function(){}},{key:"vmVolumeChange",value:function(e){}},{key:"vmPlaybackReady",value:function(){this.player.extendLanguage("zh",O)}}]),e}()).\u0275fac=function(e){return new(e||E)},E.\u0275cmp=b["\u0275\u0275defineComponent"]({type:E,selectors:[["app-resource-audio-viewer"]],viewQuery:function(e,t){var n;1&e&&b["\u0275\u0275viewQuery"](M,!0),2&e&&b["\u0275\u0275queryRefresh"](n=b["\u0275\u0275loadQuery"]())&&(t.player=n.first)},inputs:{src:"src"},decls:6,vars:2,consts:[[1,"padding-top-bottom-20"],["theme","dark","language","zh","autoplay","true","debug","true",3,"translations","vmVolumeChange","vmPlaybackReady"],["player",""],["type","audio/mp3",3,"src"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"div",0),b["\u0275\u0275elementStart"](1,"vm-player",1,2),b["\u0275\u0275listener"]("vmVolumeChange",(function(e){return t.vmVolumeChange(e)}))("vmPlaybackReady",(function(){return t.vmPlaybackReady()})),b["\u0275\u0275elementStart"](3,"vm-audio"),b["\u0275\u0275element"](4,"source",3),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](5,"vm-default-ui"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("translations",t.translations),b["\u0275\u0275advance"](3),b["\u0275\u0275propertyInterpolate"]("src",t.src,b["\u0275\u0275sanitizeUrl"]))},directives:[j.c,j.a,j.b],styles:[""]}),E),N=n("OKzL"),F=((T=function(){function e(t){_classCallCheck(this,e),this.comm=t}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"showImages",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.comm.presentModal(N.a,"",{Images:[this.src],index:0});case 1:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||T)(b["\u0275\u0275directiveInject"](m.a))},T.\u0275cmp=b["\u0275\u0275defineComponent"]({type:T,selectors:[["app-resource-image-viewer"]],inputs:{src:"src"},decls:1,vars:1,consts:[[3,"src","click"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"img",0),b["\u0275\u0275listener"]("click",(function(){return t.showImages()})),b["\u0275\u0275elementEnd"]()),2&e&&b["\u0275\u0275property"]("src",t.src,b["\u0275\u0275sanitizeUrl"])},styles:["img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]}),T),A=n("Xj7U");function D(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"ion-col",3),b["\u0275\u0275elementStart"](1,"div",4),b["\u0275\u0275namespaceSVG"](),b["\u0275\u0275elementStart"](2,"svg",5),b["\u0275\u0275element"](3,"use"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275namespaceHTML"](),b["\u0275\u0275elementStart"](4,"a",6),b["\u0275\u0275text"](5),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;b["\u0275\u0275advance"](3),b["\u0275\u0275attribute"]("href",n.icon,null,"xlink"),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate"](n.name)}}var V,L=((V=function(){function e(t){_classCallCheck(this,e),this.comm=t,this.data=[],this.the_record=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=[];this.data.forEach((function(n){var r=n.substring(n.lastIndexOf("."));t.push({fileType:r,icon:"#"+e.comm.getFileIcon(r),id:n,name:n,size:"0",progress:0,show:!1,open:!1})})),this.the_record=t}}]),e}()).\u0275fac=function(e){return new(e||V)(b["\u0275\u0275directiveInject"](m.a))},V.\u0275cmp=b["\u0275\u0275defineComponent"]({type:V,selectors:[["app-resource-other-viewer"]],inputs:{data:"data"},decls:6,vars:1,consts:[[1,"padding-left-right-20"],[1,"b","font-16","color-1d1d1f"],["size","4",4,"ngFor","ngForOf"],["size","4"],[1,"padding-20","box","text-center"],["aria-hidden","true",1,"icon","font-20"],[1,"font-12","color-999"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"div",0),b["\u0275\u0275elementStart"](1,"a",1),b["\u0275\u0275text"](2,"\u8d44\u6599\u9884\u89c8"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](3,"ion-grid"),b["\u0275\u0275elementStart"](4,"ion-row"),b["\u0275\u0275template"](5,D,6,2,"ion-col",2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](5),b["\u0275\u0275property"]("ngForOf",t.the_record))},directives:[i.IonGrid,i.IonRow,r.NgForOf,i.IonCol],styles:[".icon[_ngcontent-%COMP%]{width:4em;height:4em;fill:currentColor;overflow:hidden;display:block;margin:0 auto}.box[_ngcontent-%COMP%]{border:2px solid #fff}.box[_ngcontent-%COMP%]:hover{border:2px solid #ededed}"]}),V),B=n("FwiY"),U=n("ZVAZ"),G=n("ZE2D"),$=["comment_content"];function Q(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",38),b["\u0275\u0275element"](1,"app-resource-office-viewer",39),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("data",n.the_record)}}function H(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",38),b["\u0275\u0275element"](1,"app-resource-audio-viewer",40),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("src",n.the_record.url)}}function W(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",38),b["\u0275\u0275element"](1,"app-resource-image-viewer",40),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("src",n.the_record.url)}}function X(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",41),b["\u0275\u0275element"](1,"app-resource-video-viewer",40),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("src",n.the_record.url)}}function q(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",41),b["\u0275\u0275element"](1,"app-resource-other-viewer",39),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("data",n.the_record.zipFileList)}}function Y(e,t){1&e&&b["\u0275\u0275element"](0,"i",42)}function K(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"ion-segment-button",34),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"](2).segmentChange("video")})),b["\u0275\u0275elementStart"](1,"ion-label"),b["\u0275\u0275text"](2,"\u5b66\u4e60\u8d44\u6e90"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](3,"div",35),b["\u0275\u0275elementEnd"]()}2&e&&b["\u0275\u0275property"]("value","video")}function Z(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"div",17),b["\u0275\u0275elementStart"](1,"ion-item",14),b["\u0275\u0275elementStart"](2,"ion-thumbnail",15),b["\u0275\u0275element"](3,"img",16),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"ion-input",47,48),b["\u0275\u0275listener"]("ngModelChange",(function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"](3).the_comment_submit.content=e})),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"ion-button",49),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"](3).comment()})),b["\u0275\u0275text"](7,"\u53d1\u5e03"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"](3);b["\u0275\u0275advance"](3),b["\u0275\u0275property"]("src",r.user.avatarUrl,b["\u0275\u0275sanitizeUrl"]),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngModel",r.the_comment_submit.content)("placeholder",r.the_place_holder)}}function J(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",53),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"]().$implicit;return b["\u0275\u0275nextContext"](3).reply(e)})),b["\u0275\u0275text"](1,"\u56de\u590d"),b["\u0275\u0275elementEnd"]()}}function ee(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",53),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"]().$implicit;return b["\u0275\u0275nextContext"](3).delete(e,null)})),b["\u0275\u0275text"](1,"\u5220\u9664"),b["\u0275\u0275elementEnd"]()}}function te(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"span"),b["\u0275\u0275text"](1,"\xa0\u56de\u590d\xa0"),b["\u0275\u0275elementStart"](2,"span",57),b["\u0275\u0275text"](3),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2).$implicit;b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](n.replyTeacherName)}}function ne(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",53),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"](2).$implicit;return b["\u0275\u0275nextContext"](5).reply(e)})),b["\u0275\u0275text"](1,"\u56de\u590d"),b["\u0275\u0275elementEnd"]()}}function re(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",53),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"](2).$implicit,t=b["\u0275\u0275nextContext"](2).$implicit;return b["\u0275\u0275nextContext"](3).delete(e,t)})),b["\u0275\u0275text"](1,"\u5220\u9664"),b["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"nz-comment",50),b["\u0275\u0275element"](1,"nz-avatar",51),b["\u0275\u0275elementStart"](2,"nz-comment-content"),b["\u0275\u0275elementStart"](3,"p"),b["\u0275\u0275template"](4,te,4,1,"span",3),b["\u0275\u0275text"](5),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"nz-comment-action"),b["\u0275\u0275template"](7,ne,2,0,"a",52),b["\u0275\u0275template"](8,re,2,0,"a",52),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]().$implicit,r=b["\u0275\u0275nextContext"](5);b["\u0275\u0275property"]("nzAuthor",n.teacherName)("nzDatetime",n.createdOnName),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("nzSrc",n.avatar),b["\u0275\u0275advance"](3),b["\u0275\u0275property"]("ngIf",n.replyTeacherName),b["\u0275\u0275advance"](1),b["\u0275\u0275textInterpolate1"](" ",n.content," "),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf",!0===r.can_reply),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===n.canDelete)}}function ie(e,t){if(1&e&&(b["\u0275\u0275elementContainerStart"](0),b["\u0275\u0275template"](1,ae,9,7,"nz-comment",56),b["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===n.show)}}function oe(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",58),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"](2).$implicit;return b["\u0275\u0275nextContext"](3).load_child_more(e)})),b["\u0275\u0275text"](1),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"](2).$implicit;b["\u0275\u0275advance"](1),b["\u0275\u0275textInterpolate1"]("\u5171",r.comments.length,"\u6761\u56de\u590d>")}}function ce(e,t){if(1&e&&(b["\u0275\u0275elementContainerStart"](0),b["\u0275\u0275template"](1,ie,2,1,"ng-container",54),b["\u0275\u0275template"](2,oe,2,1,"a",55),b["\u0275\u0275elementContainerEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]().$implicit;b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngForOf",n.comments),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===n.showMore)}}function se(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"nz-comment",50),b["\u0275\u0275element"](1,"nz-avatar",51),b["\u0275\u0275elementStart"](2,"nz-comment-content"),b["\u0275\u0275elementStart"](3,"p"),b["\u0275\u0275text"](4),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](5,"nz-comment-action"),b["\u0275\u0275template"](6,J,2,0,"a",52),b["\u0275\u0275template"](7,ee,2,0,"a",52),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](8,ce,3,2,"ng-container",3),b["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=b["\u0275\u0275nextContext"](3);b["\u0275\u0275property"]("nzAuthor",n.teacherName)("nzDatetime",n.createdOnName),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("nzSrc",n.avatar),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate1"](" ",n.content," "),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf",!0===r.can_reply),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===n.canDelete),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",n.comments&&n.comments.length>0)}}function le(e,t){if(1&e&&(b["\u0275\u0275elementContainerStart"](0),b["\u0275\u0275template"](1,Z,8,3,"div",43),b["\u0275\u0275elementStart"](2,"div",44),b["\u0275\u0275elementStart"](3,"a",45),b["\u0275\u0275text"](4),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](5,se,9,7,"nz-comment",46),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementContainerEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===n.can_reply),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate1"]("\u5168\u90e8\u8bc4\u4ef7\uff08",n.the_record.commentNum,"\uff09"),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngForOf",n.the_comment_list)}}function de(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",59),b["\u0275\u0275text"](1),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275textInterpolate1"](" ",n.the_record.dscription," ")}}function me(e,t){if(1&e&&(b["\u0275\u0275elementContainerStart"](0),b["\u0275\u0275text"](1),b["\u0275\u0275elementContainerEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2).$implicit;b["\u0275\u0275advance"](1),b["\u0275\u0275textInterpolate1"](" ",n.progress,"% ")}}function ue(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"ion-button",66),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"]().$implicit;return b["\u0275\u0275nextContext"](3).downloadOther(e)})),b["\u0275\u0275text"](1,"\u4e0b\u8f7d "),b["\u0275\u0275template"](2,me,2,1,"ng-container",3),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"]().$implicit;b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf",!0===r.show)}}function he(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"ion-button",66),b["\u0275\u0275listener"]("click",(function(){b["\u0275\u0275restoreView"](n);var e=b["\u0275\u0275nextContext"]().$implicit;return b["\u0275\u0275nextContext"](3).openOther(e)})),b["\u0275\u0275text"](1,"\u6253\u5f00 "),b["\u0275\u0275elementEnd"]()}}function pe(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"ion-item",61),b["\u0275\u0275namespaceSVG"](),b["\u0275\u0275elementStart"](1,"svg",7),b["\u0275\u0275element"](2,"use"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275namespaceHTML"](),b["\u0275\u0275elementStart"](3,"ion-label"),b["\u0275\u0275elementStart"](4,"a",62),b["\u0275\u0275text"](5),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"p"),b["\u0275\u0275elementStart"](7,"span",63),b["\u0275\u0275text"](8),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](9,"span",64),b["\u0275\u0275text"](10),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](11,ue,3,1,"ion-button",65),b["\u0275\u0275template"](12,he,2,0,"ion-button",65),b["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=b["\u0275\u0275nextContext"](3);b["\u0275\u0275advance"](2),b["\u0275\u0275attribute"]("href",n.icon,null,"xlink"),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](n.name+n.fileType),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](r.the_record.teacherName),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate"](n.size),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",1!=n.open),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===n.open)}}function fe(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"div",59),b["\u0275\u0275elementStart"](1,"ion-list",14),b["\u0275\u0275template"](2,pe,13,6,"ion-item",60),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngForOf",n.the_otherFile)}}var ve=function(e){return{"color-blue":e}};function ge(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"ion-content"),b["\u0275\u0275elementStart"](1,"ion-item"),b["\u0275\u0275namespaceSVG"](),b["\u0275\u0275elementStart"](2,"svg",7),b["\u0275\u0275element"](3,"use"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275namespaceHTML"](),b["\u0275\u0275elementStart"](4,"ion-label",8),b["\u0275\u0275elementStart"](5,"a",9),b["\u0275\u0275text"](6),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](7,"p",10),b["\u0275\u0275elementStart"](8,"span"),b["\u0275\u0275text"](9),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](10,"span",11),b["\u0275\u0275text"](11,"|"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](12,"span"),b["\u0275\u0275text"](13),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](14,"span",11),b["\u0275\u0275text"](15,"|"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](16,"span"),b["\u0275\u0275text"](17),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](18,"span",11),b["\u0275\u0275text"](19,"|"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](20,"span"),b["\u0275\u0275text"](21),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](22,"span",12),b["\u0275\u0275text"](23),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](24,"div",13),b["\u0275\u0275elementStart"](25,"ion-item",14),b["\u0275\u0275elementStart"](26,"ion-thumbnail",15),b["\u0275\u0275element"](27,"img",16),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](28,"ion-label"),b["\u0275\u0275text"](29),b["\u0275\u0275elementStart"](30,"p"),b["\u0275\u0275text"](31," \xa0\xa0- "),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](32,"div",17),b["\u0275\u0275template"](33,Q,2,1,"div",18),b["\u0275\u0275template"](34,H,2,1,"div",18),b["\u0275\u0275template"](35,W,2,1,"div",18),b["\u0275\u0275template"](36,X,2,1,"div",19),b["\u0275\u0275template"](37,q,2,1,"div",19),b["\u0275\u0275element"](38,"div",20),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](39,"div",17),b["\u0275\u0275elementStart"](40,"ion-grid"),b["\u0275\u0275elementStart"](41,"ion-row"),b["\u0275\u0275elementStart"](42,"ion-col",21),b["\u0275\u0275elementStart"](43,"a",22),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().like()})),b["\u0275\u0275namespaceSVG"](),b["\u0275\u0275elementStart"](44,"svg",23),b["\u0275\u0275element"](45,"use",24),b["\u0275\u0275elementEnd"](),b["\u0275\u0275namespaceHTML"](),b["\u0275\u0275element"](46,"br"),b["\u0275\u0275text"](47),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](48,"ion-col",21),b["\u0275\u0275elementStart"](49,"a",22),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().collect()})),b["\u0275\u0275namespaceSVG"](),b["\u0275\u0275elementStart"](50,"svg",23),b["\u0275\u0275element"](51,"use",25),b["\u0275\u0275elementEnd"](),b["\u0275\u0275namespaceHTML"](),b["\u0275\u0275element"](52,"br"),b["\u0275\u0275text"](53),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](54,"ion-col",21),b["\u0275\u0275elementStart"](55,"a",26),b["\u0275\u0275namespaceSVG"](),b["\u0275\u0275elementStart"](56,"svg",27),b["\u0275\u0275element"](57,"use",28),b["\u0275\u0275elementEnd"](),b["\u0275\u0275namespaceHTML"](),b["\u0275\u0275element"](58,"br"),b["\u0275\u0275text"](59),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](60,"ion-col",29),b["\u0275\u0275elementStart"](61,"nz-rate",30),b["\u0275\u0275listener"]("ngModelChange",(function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().the_record.rank=e}))("ngModelChange",(function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().userRanks(e,null)})),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](62,Y,1,0,"ng-template",null,31,b["\u0275\u0275templateRefExtractor"]),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](64,"div",32),b["\u0275\u0275elementStart"](65,"ion-segment",33),b["\u0275\u0275elementStart"](66,"ion-segment-button",34),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().segmentChange("description")})),b["\u0275\u0275elementStart"](67,"ion-label"),b["\u0275\u0275text"](68,"\u7b80\u4ecb"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](69,"div",35),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](70,K,4,1,"ion-segment-button",36),b["\u0275\u0275elementStart"](71,"ion-segment-button",34),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().segmentChange("comment")})),b["\u0275\u0275elementStart"](72,"ion-label"),b["\u0275\u0275text"](73),b["\u0275\u0275elementEnd"](),b["\u0275\u0275element"](74,"div",35),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](75,le,6,3,"ng-container",3),b["\u0275\u0275template"](76,de,2,1,"div",37),b["\u0275\u0275template"](77,fe,3,1,"div",37),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275reference"](63),a=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](3),b["\u0275\u0275attribute"]("href",a.the_record.icon,null,"xlink"),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](a.the_record.title),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate"](a.the_record.uploadTime),b["\u0275\u0275advance"](4),b["\u0275\u0275textInterpolate1"]("",a.the_record.viewNum,"\u6b21\u70b9\u51fb"),b["\u0275\u0275advance"](4),b["\u0275\u0275textInterpolate1"]("",a.the_record.collectNum,"\u6b21\u6536\u85cf"),b["\u0275\u0275advance"](4),b["\u0275\u0275textInterpolate1"]("",a.the_record.commentNum,"\u6b21\u8bc4\u8bba"),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate"](a.the_record.levelName),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("src",a.the_record.avatar,b["\u0275\u0275sanitizeUrl"]),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"](" \xa0\xa0",a.the_record.teacherName," "),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("ngIf",2===a.the_record.showType),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",6===a.the_record.showType),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",4===a.the_record.showType),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",3===a.the_record.showType),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",5===a.the_record.showType),b["\u0275\u0275advance"](6),b["\u0275\u0275property"]("ngClass",b["\u0275\u0275pureFunction1"](32,ve,!0===a.the_record.isLiked)),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngClass",b["\u0275\u0275pureFunction1"](34,ve,!0===a.the_record.isLiked)),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate1"](" ",a.the_record.likeNum," "),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngClass",b["\u0275\u0275pureFunction1"](36,ve,!0===a.the_record.isCollected)),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngClass",b["\u0275\u0275pureFunction1"](38,ve,!0===a.the_record.isCollected)),b["\u0275\u0275advance"](3),b["\u0275\u0275textInterpolate1"](" ",a.the_record.collectNum," "),b["\u0275\u0275advance"](6),b["\u0275\u0275textInterpolate1"](" ",a.the_record.viewNum," "),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngModel",a.the_record.rank)("nzCharacter",r)("nzDisabled",!0),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("value",a.the_segment_value),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("value","description"),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("ngIf",a.the_otherFile&&a.the_otherFile.length>0),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("value","comment"),b["\u0275\u0275advance"](2),b["\u0275\u0275textInterpolate1"]("\u8bc4\u8bba(",a.the_record.commentNum,")"),b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf","comment"===a.the_segment_value),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf","description"===a.the_segment_value),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf","video"===a.the_segment_value)}}function xe(e,t){if(1&e&&(b["\u0275\u0275elementContainerStart"](0),b["\u0275\u0275text"](1),b["\u0275\u0275elementContainerEnd"]()),2&e){var n=b["\u0275\u0275nextContext"](2);b["\u0275\u0275advance"](1),b["\u0275\u0275textInterpolate1"](" ",n.the_progress,"% ")}}function ye(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",67),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().download()})),b["\u0275\u0275text"](1,"\u6587\u4ef6\u4e0b\u8f7d "),b["\u0275\u0275template"](2,xe,2,1,"ng-container",3),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](2),b["\u0275\u0275property"]("ngIf",!0===r.show_progress)}}function be(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"a",67),b["\u0275\u0275listener"]("click",(function(){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"]().open()})),b["\u0275\u0275text"](1,"\u6253\u5f00 "),b["\u0275\u0275elementEnd"]()}}var _e,ke,we=[{path:"",component:(_e=function(){function e(t,n,r,a,i,o,c,s,l,m,u,h){_classCallCheck(this,e),this.route=t,this.rsrv=n,this.rsrp=r,this.comm=a,this.cdr=i,this.auth=o,this.transfer=c,this.file=s,this.platform=l,this.cache=m,this.fileOpener=u,this.utility=h,this.the_otherFile=[],this.the_rank=0,this.showOpen=!1,this.the_segment_value="description",this.the_progress=0,this.show_progress=!1,this.fileTransfer=this.transfer.create(),this.the_comment_filter=new d.a,this.the_comment_list=[],this.the_comment_submit=new d.b,this.the_place_holder="\u8fd9\u91cc\u5f00\u59cb\u8bc4\u8bba\u54e6"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.the_id=t.get("id"),e.init()}))}},{key:"init",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.get_user();case 2:return this.user=e.sent,e.t0=!0,e.next=6,this.rsrp.Auth();case 6:if(e.t1=e.sent,e.t0===e.t1){e.next=9;break}return e.abrupt("return",void this.comm.presentAlert("\u6e29\u99a8\u63d0\u793a",null,"\u5bf9\u4e0d\u8d77\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u6a21\u5757\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u68c0\u67e5\u662f\u5426\u5f00\u901a\u4e86\u8be5\u6a21\u5757\uff01",[{role:"cancel",text:"\u53d6\u6d88",handler:function(){}},{text:"\u597d\u7684",handler:function(){}}]));case 9:return e.next=11,this.rsrp.Token();case 11:return this.the_token=e.sent,e.next=14,this.auth.get_setting(this.user.serialNo);case 14:return this.the_setting=e.sent,this.can_reply=this.the_setting.isOpenResourceLibraryReply,e.next=18,this.rsrv.get_resource_detail(this.the_token,this.the_id);case 18:if(0==(t=e.sent).code){e.next=21;break}return e.abrupt("return",void this.comm.presentToast(t.msg));case 21:return e.next=23,this.cache.get("file_"+this.the_id);case 23:return n=e.sent,this.showOpen=n&&""!=n,this.rsrv.resource_add_view(this.the_token,this.the_id),this.the_record=t.data,this.the_record.doc=this.the_record.attachments[0],this.the_record.showType=this.comm.getPreviewType(this.the_record.doc.fileType),this.the_record.icon="#"+this.comm.getFileIcon(this.the_record.doc.fileType),this.the_record.uploadTime=s(this.the_record.uploadTime).format("YYYY-MM-DD"),this.the_record.showType==d.c.other&&(this.the_record.zipFileList&&0!=this.the_record.zipFileList.length||(this.the_record.zipFileList=[this.the_record.doc.name+this.the_record.doc.fileType])),this.the_record.viewNum+=1,this.the_record.showType==d.c.video&&(r=_toConsumableArray(this.the_record.attachments),this.the_otherFile=r.slice(1),this.the_otherFile.forEach((function(e){e.icon="#"+a.comm.getFileIcon(e.fileType)}))),this.the_record.userRanks&&this.the_record.userRanks.length>0&&(this.the_rank=this.the_record.userRanks[0].rank),this.the_record.avatar&&""!=this.the_record.avatar||(this.the_record.avatar=p.a.default_avatar),this.initComment(),this.platform.is("ios")||this.utility.checkPermission(),e.next=31,this.file.createDir(this.file.dataDirectory,p.a.root_directory,!0).catch((function(e){}));case 31:return e.next=33,this.file.createDir(this.file.dataDirectory,p.a.root_directory+"/resource",!0);case 33:case"end":return e.stop()}}),e,this)})))}},{key:"open",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cache.get("file_"+this.the_id);case 2:if((t=e.sent)&&""!=t){e.next=5;break}return e.abrupt("return",void this.comm.presentToast("\u672a\u80fd\u627e\u5230\u672c\u5730\u6587\u4ef6\uff01"));case 5:return e.next=7,this.comm.getMimeType(this.the_record.doc.fileType);case 7:""!=(n=e.sent)?this.fileOpener.showOpenWithDialog(t,n):this.comm.presentToast("\u8be5\u6587\u4ef6\u65e0\u6cd5\u6253\u5f00\uff01");case 9:case"end":return e.stop()}}),e,this)})))}},{key:"openOther",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cache.get("file_other_"+e.id);case 2:if((n=t.sent)&&""!=n){t.next=5;break}return t.abrupt("return",void this.comm.presentToast("\u672a\u80fd\u627e\u5230\u672c\u5730\u6587\u4ef6\uff01"));case 5:return t.next=7,this.comm.getMimeType(e.fileType);case 7:""!=(r=t.sent)?this.fileOpener.showOpenWithDialog(n,r):this.comm.presentToast("\u8be5\u6587\u4ef6\u65e0\u6cd5\u6253\u5f00\uff01");case 9:case"end":return t.stop()}}),t,this)})))}},{key:"collect",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.comm.loadingPresent(),!0!==this.the_record.isCollected){e.next=7;break}return e.next=4,this.rsrv.resource_cancel_collect(this.the_token,this.the_id);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.rsrv.resource_collect(this.the_token,this.the_id);case 9:e.t0=e.sent;case 10:t=e.t0,this.comm.loadingDismiss(),0==t.code?(!0===this.the_record.isCollected?this.the_record.collectNum-=1:this.the_record.collectNum+=1,this.the_record.isCollected=!this.the_record.isCollected):this.comm.presentToast(t.msg);case 13:case"end":return e.stop()}}),e,this)})))}},{key:"like",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.comm.loadingPresent(),!0!==this.the_record.isLiked){e.next=7;break}return e.next=4,this.rsrv.resource_cancel_like(this.the_token,this.the_id);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,this.rsrv.resource_like(this.the_token,this.the_id);case 9:e.t0=e.sent;case 10:t=e.t0,this.comm.loadingDismiss(),0==t.code?(!0===this.the_record.isLiked?this.the_record.likeNum-=1:this.the_record.likeNum+=1,this.the_record.isLiked=!this.the_record.isLiked):this.comm.presentToast(t.msg);case 13:case"end":return e.stop()}}),e,this)})))}},{key:"userRanks",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.cdr.detectChanges(),n.next=3,this.rsrv.insert_rank(this.the_token,{docId:this.the_id,rank:e,rankId:null==t?void 0:t.id,docType:this.the_record.showType==d.c.video?2:1});case 3:0!=(r=n.sent).code?(this.comm.presentToast(r.msg),t?(a=this.the_record.userRanks.find((function(e){return e.id==t.id})),t.userRanks=a.rank):this.the_rank=this.the_record.userRanks&&this.the_record.userRanks.length>0?this.the_record.userRanks[0].rank:0):t?this.the_record.userRanks.find((function(e){return e.id==t.id})).rank=t.userRanks:this.the_record.userRanks&&this.the_record.userRanks.length>0&&(this.the_record.userRanks[0].rank=this.the_rank);case 5:case"end":return n.stop()}}),n,this)})))}},{key:"segmentChange",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.the_segment_value=e;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"download",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",n=encodeURI(p.a.ym_endpoint+p.a.resource_library+"/Academic/doc/download/"+this.the_record.doc.id),1==this.platform.is("ios")){e.next=11;break}return e.next=4,this.file.createDir(this.file.dataDirectory,p.a.root_directory+"/resource/"+this.the_record.title,!0);case 4:e.t1=e.sent.toURL(),e.t2=this.the_record.doc.name,e.t3=e.t1+e.t2,e.t4=this.the_record.doc.fileType,e.t0=e.t3+e.t4,e.next=12;break;case 11:e.t0=this.file.documentsDirectory+this.the_record.doc.name+this.the_record.doc.fileType;case 12:t=e.t0,this.the_progress=1,this.show_progress=!0,this.fileTransfer.download(n,t,!1,{headers:{Authorization:"Bearer "+this.the_token}}).then((function(e){r.show_progress=!1,r.comm.presentToast("\u4e0b\u8f7d\u6210\u529f\uff01"),r.showOpen=!0,r.setCache(r.the_id,e.nativeURL)}),(function(e){r.comm.presentToast("\u4e0b\u8f7d\u5931\u8d25\uff01")})),this.fileTransfer.onProgress((function(e){r.the_progress=Math.ceil(e.loaded/e.total*100),r.the_progress>=100&&(r.show_progress=!1)}));case 17:case"end":return e.stop()}}),e,this)})))}},{key:"setCache",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.cache.set("file_"+e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"downloadOther",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=encodeURI(p.a.ym_endpoint+p.a.resource_library+"/Academic/doc/download/"+e.id),r="",1==this.platform.is("ios")){t.next=11;break}return t.next=4,this.file.createDir(this.file.dataDirectory,p.a.root_directory+"/resource/"+this.the_record.title,!0);case 4:t.t1=t.sent.toURL(),t.t2=e.name,t.t3=t.t1+t.t2,t.t4=e.fileType,t.t0=t.t3+t.t4,t.next=12;break;case 11:t.t0=this.file.documentsDirectory+e.name+e.fileType;case 12:r=t.t0,e.progress=1,e.show=!0,this.fileTransfer.download(n,r,!1,{headers:{Authorization:"Bearer "+this.the_token}}).then((function(t){e.show=!1,e.open=!0,a.setCache("other_"+e.id,t.nativeURL),a.comm.presentToast("\u4e0b\u8f7d\u6210\u529f\uff01")}),(function(e){a.comm.presentToast("\u4e0b\u8f7d\u5931\u8d25\uff01")})),this.fileTransfer.onProgress((function(t){e.progress=Math.ceil(t.loaded/t.total*100),e.progress>=100&&(e.show=!1)}));case 17:case"end":return t.stop()}}),t,this)})))}},{key:"initComment",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.the_comment_filter=new d.a,this.the_comment_filter.docId=this.the_id,e.next=4,this.loadCommentData();case 4:this.the_comment_list=e.sent;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"loadCommentData",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.rsrv.get_resource_comment_list(this.the_token,this.the_comment_filter);case 2:if(0!=(t=e.sent).code){e.next=14;break}n=0;case 5:if(!(n<t.data.length)){e.next=13;break}return r=t.data[n],e.next=9,this.formatComment(r);case 9:r.comments=e.sent;case 10:n++,e.next=5;break;case 13:return e.abrupt("return",(t.data.forEach((function(e){""!=e.avatar&&null!=e.avatar||(e.avatar=p.a.default_avatar),e.comments&&(e.comments.forEach((function(e){""!=e.avatar&&null!=e.avatar||(e.avatar=p.a.default_avatar)})),e.comments.length>5?(e.showMore=!0,e.comments.forEach((function(e,t){e.show=!(t>=5)}))):e.comments.forEach((function(e){return e.show=!0})),e.comments=e.comments.sort((function(e,t){return new Date(e.createTime).getTime()-new Date(t.createTime).getTime()})))})),this.the_record.commentNum=t.count,t.data));case 14:case"end":return e.stop()}}),e,this)})))}},{key:"formatComment",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,a,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!(e.comments&&e.comments.length>0)){t.next=10;break}n=e.comments,r=regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((a=e.comments[r]).comments&&a.comments.length>0)){t.next=6;break}return t.next=4,o.formatComment(a);case 4:(i=t.sent).forEach((function(e){return e.replyTeacherName=a.teacherName})),n=n.concat(i);case 6:case"end":return t.stop()}}),t)})),a=0;case 5:if(!(a<e.comments.length)){t.next=10;break}return t.delegateYield(r(a),"t0",7);case 7:a++,t.next=5;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)})))}},{key:"comment",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.the_comment_submit.content&&""!=this.the_comment_submit.content){e.next=2;break}return e.abrupt("return",void this.comm.presentToast("\u8bf7\u8f93\u5165\u8bc4\u8bba\uff01"));case 2:return this.the_comment_submit.docId=this.the_id,this.comm.loadingPresent(),e.next=5,this.rsrv.insert_resource_comment(this.the_token,this.the_comment_submit);case 5:t=e.sent,this.comm.loadingDismiss(),0==t.code?(this.the_comment_submit=new d.b,this.the_place_holder="\u8fd9\u91cc\u5f00\u59cb\u8bc4\u8bba\u54e6",this.initComment()):this.comm.presentToast(t.msg);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"reply",value:function(e){this.the_comment_submit.parentId=e.id,this.the_place_holder="@"+e.teacherName+":",this.comment_content.setFocus()}},{key:"delete",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.comm.presentAlertConfirm("\u6e29\u99a8\u63d0\u793a","\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417\uff1f",[{text:"\u786e\u5b9a",handler:function(){t?t.comments.splice(t.comments.findIndex((function(t){return t.id==e.id})),1):r.the_comment_list.splice(r.the_comment_list.findIndex((function(t){return t.id==e.id})),1),r.rsrv.delete_resource_comment(r.the_token,e.id)}},{text:"\u53d6\u6d88",handler:function(){}}]);case 1:case"end":return n.stop()}}),n,this)})))}},{key:"load_child_more",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=1|e.showIndex,n+=1,e.comments.filter((function(e){return 1!=e.show})).forEach((function(e,t){e.show=t<5*n})),e.showMore=e.comments.filter((function(e){return 1!=e.show})).length>0;case 2:case"end":return t.stop()}}),t)})))}}]),e}(),_e.\u0275fac=function(e){return new(e||_e)(b["\u0275\u0275directiveInject"](o.a),b["\u0275\u0275directiveInject"](h.a),b["\u0275\u0275directiveInject"](u.a),b["\u0275\u0275directiveInject"](m.a),b["\u0275\u0275directiveInject"](b.ChangeDetectorRef),b["\u0275\u0275directiveInject"](l.a),b["\u0275\u0275directiveInject"](f.a),b["\u0275\u0275directiveInject"](v.a),b["\u0275\u0275directiveInject"](i.Platform),b["\u0275\u0275directiveInject"](g.a),b["\u0275\u0275directiveInject"](x.a),b["\u0275\u0275directiveInject"](y.a))},_e.\u0275cmp=b["\u0275\u0275defineComponent"]({type:_e,selectors:[["app-resource-detail"]],viewQuery:function(e,t){var n;1&e&&b["\u0275\u0275viewQuery"]($,!0),2&e&&b["\u0275\u0275queryRefresh"](n=b["\u0275\u0275loadQuery"]())&&(t.comment_content=n.first)},decls:12,vars:3,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","tabs"],[4,"ngIf"],[2,"height","1rem","background","#f5f6fa !important"],["class","color-blue font-20 ",3,"click",4,"ngIf"],["class","color-blue font-20",3,"click",4,"ngIf"],["aria-hidden","true",1,"list-icon"],[1,"ion-text-wrap"],[1,"b","title","font-20"],[1,"mt10","font-14"],[1,"padding-left-right-5"],[1,"badge"],[1,"mt20","bgfff"],["lines","none"],[1,"avatar"],[1,"avatar-image",3,"src"],[1,"bgfff"],["class","padding-20",4,"ngIf"],["class","padding-top-bottom-20",4,"ngIf"],[1,"border-lines","padding-top-bottom-20"],["size","2"],[1,"font-16","icon-8f92a1",3,"ngClass","click"],["aria-hidden","true",1,"icon-bar","font-24","icon-8f92a1",3,"ngClass"],[0,"xlink","href","#icondianzan"],[0,"xlink","href","#iconshoucang1"],[1,"font-16","icon-8f92a1"],["aria-hidden","true",1,"icon-bar","font-24","icon-8f92a1"],[0,"xlink","href","#iconxianshi"],["size","6"],[1,"mt20","right",3,"ngModel","nzCharacter","nzDisabled","ngModelChange"],["characterIcon",""],[1,"bgfff","padding-top-bottom-20"],["color","blues","mode","md","slot","start",3,"value"],[3,"value","click"],[1,"bolder-sm"],[3,"value","click",4,"ngIf"],["class","bgfff padding-left-right-20 padding-bottom-20",4,"ngIf"],[1,"padding-20"],[3,"data"],[3,"src"],[1,"padding-top-bottom-20"],["nz-icon","","nzType","star","nzTheme","fill",1,"font-30"],["class","bgfff",4,"ngIf"],[1,"bgfff","padding-20"],[1,"b","font-20","color-1d1d1f"],[3,"nzAuthor","nzDatetime",4,"ngFor","ngForOf"],[1,"reply-input",3,"ngModel","placeholder","ngModelChange"],["comment_content",""],["size","default",3,"click"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc"],["class","mr10 color-999 font-16",3,"click",4,"ngIf"],[1,"mr10","color-999","font-16",3,"click"],[4,"ngFor","ngForOf"],["class","font-16 color-blue",3,"click",4,"ngIf"],[3,"nzAuthor","nzDatetime",4,"ngIf"],[1,"color-blue"],[1,"font-16","color-blue",3,"click"],[1,"bgfff","padding-left-right-20","padding-bottom-20"],["class","otherfile",4,"ngFor","ngForOf"],[1,"otherfile"],[1,"color-1d1d1f","font-20"],[1,"font-16","color-1d1d1f"],[1,"font-16","color-999"],["size","default","slot","end",3,"click",4,"ngIf"],["size","default","slot","end",3,"click"],[1,"color-blue","font-20",3,"click"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"ion-header",0),b["\u0275\u0275elementStart"](1,"ion-toolbar"),b["\u0275\u0275elementStart"](2,"ion-buttons",1),b["\u0275\u0275element"](3,"ion-back-button",2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"ion-title"),b["\u0275\u0275text"](5,"\u8d44\u6e90\u8be6\u60c5"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](6,ge,78,40,"ion-content",3),b["\u0275\u0275elementStart"](7,"ion-footer",0),b["\u0275\u0275element"](8,"div",4),b["\u0275\u0275elementStart"](9,"ion-toolbar"),b["\u0275\u0275template"](10,ye,3,1,"a",5),b["\u0275\u0275template"](11,be,2,0,"a",6),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"]()),2&e&&(b["\u0275\u0275advance"](6),b["\u0275\u0275property"]("ngIf",t.the_record),b["\u0275\u0275advance"](4),b["\u0275\u0275property"]("ngIf",1!=t.showOpen),b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",!0===t.showOpen))},directives:[i.IonHeader,i.IonToolbar,i.IonButtons,i.IonBackButton,i.IonBackButtonDelegate,i.IonTitle,r.NgIf,i.IonFooter,i.IonContent,i.IonItem,i.IonLabel,i.IonThumbnail,i.IonGrid,i.IonRow,i.IonCol,r.NgClass,_.a,a.NgControlStatus,a.NgModel,i.IonSegment,i.SelectValueAccessor,i.IonSegmentButton,R,P,F,A.a,L,B.a,r.NgForOf,i.IonInput,i.TextValueAccessor,i.IonButton,U.c,G.a,U.b,U.d,U.a,i.IonList],styles:[".icon[_ngcontent-%COMP%]{width:2em;height:2em;vertical-align:-.7em}.icon[_ngcontent-%COMP%], .list-icon[_ngcontent-%COMP%]{fill:currentColor;overflow:hidden}.list-icon[_ngcontent-%COMP%]{width:3em;height:3em;vertical-align:-.5em;margin-right:1rem}.border-lines[_ngcontent-%COMP%]{border-bottom:1px solid #e4e4e4}.icon-bar[_ngcontent-%COMP%]{width:2em;height:2em;fill:currentColor;overflow:hidden}.icon-8f92a1[_ngcontent-%COMP%]{color:#8f92a1;text-align:center;display:inline-block}.reply-input[_ngcontent-%COMP%]{--padding-start:1rem!important;border:1px solid #d9d9d9;margin-left:1rem;border-radius:5px;margin-right:1rem}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#fff!important;text-align:center}ion-segment-button[_ngcontent-%COMP%]{--border-width:0px;min-width:4rem;--indicator-height:0rem;font-weight:900;--padding-start:20px;--padding-end:20px}.segment_width[_ngcontent-%COMP%]{min-width:6rem!important}.segment-button-checked[_ngcontent-%COMP%]   .bolder-sm[_ngcontent-%COMP%]{border:1px solid #1982ff;width:1rem;margin:0 auto}.otherfile[_ngcontent-%COMP%]{margin-bottom:1rem;--padding-start:0.5rem;border:1px solid #e3e3e3;opacity:1;border-radius:5px}.ant-comment-content-author[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .ant-comment-content-author[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:.8rem!important}"]}),_e)}],Ce=((ke=function e(){_classCallCheck(this,e)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:ke}),ke.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||ke)},imports:[[o.i.forChild(we)],o.i]}),ke),Se=n("Ql/B"),Ie=n("j7Is"),ze=n("8pq7");n.d(t,"ResourceDetailPageModule",(function(){return Te}));var Ee,Te=((Ee=function e(){_classCallCheck(this,e)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:Ee}),Ee.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Ee)},imports:[[r.CommonModule,a.FormsModule,i.IonicModule,Ce,B.b,U.e,G.b,Ie.b,ze.c,ze.b,ze.e,ze.a,Se.a]]}),Ee)}}]);