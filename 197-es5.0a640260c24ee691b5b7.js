function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{sV7l:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("3Pt+"),o=n("TEn/"),i=n("tyNb"),s=n("mrSG"),c=n("ZuI5"),l=n("26ZW"),u=n("qXBG"),d=n("AytR"),m=n("LWQN"),h=n("fXoL");function f(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"ion-button",8),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=h["\u0275\u0275nextContext"](3);return e.refound(e.the_student_tutor)})),h["\u0275\u0275elementStart"](1,"ion-label"),h["\u0275\u0275elementStart"](2,"p"),h["\u0275\u0275text"](3," \u9000\u9009 "),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}}function p(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-item"),h["\u0275\u0275elementStart"](1,"ion-avatar"),h["\u0275\u0275element"](2,"img",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275elementStart"](4,"h3"),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"p"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"ion-label",6),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](10,f,4,0,"ion-button",7),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"](2);h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("src",n.the_student_tutor.avatar_url,h["\u0275\u0275sanitizeUrl"]),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" \xa0\xa0 ",n.the_student_tutor.name," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" \xa0\xa0 ",n.the_student_tutor.class_name," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate2"]("",n.the_student_tutor.actual," / ",n.the_student_tutor.max," "),h["\u0275\u0275advance"](1),h["\u0275\u0275property"]("ngIf",3==n.the_record.taskState)}}function v(e,t){if(1&e){var n=h["\u0275\u0275getCurrentView"]();h["\u0275\u0275elementStart"](0,"ion-item",9),h["\u0275\u0275listener"]("click",(function(){h["\u0275\u0275restoreView"](n);var e=t.$implicit,r=h["\u0275\u0275nextContext"](2);return 3!=r.the_record.taskState||r.the_student_tutor?"":r.choose(e)})),h["\u0275\u0275elementStart"](1,"ion-avatar"),h["\u0275\u0275element"](2,"img",5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](3,"ion-label"),h["\u0275\u0275elementStart"](4,"h3"),h["\u0275\u0275text"](5),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"p"),h["\u0275\u0275text"](7),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](8,"ion-badge"),h["\u0275\u0275text"](9),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=h["\u0275\u0275nextContext"](2);h["\u0275\u0275propertyInterpolate"]("disabled",3!=a.the_record.taskState&&r.actual>=r.max),h["\u0275\u0275advance"](2),h["\u0275\u0275property"]("src",r.avatar_url,h["\u0275\u0275sanitizeUrl"]),h["\u0275\u0275advance"](3),h["\u0275\u0275textInterpolate1"](" \xa0\xa0 ",r.name," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" \xa0\xa0 ",r.class_name," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate2"](" ",r.actual," / ",r.max," ")}}function _(e,t){if(1&e&&(h["\u0275\u0275elementStart"](0,"ion-list"),h["\u0275\u0275elementStart"](1,"ion-item"),h["\u0275\u0275elementStart"](2,"ion-label"),h["\u0275\u0275elementStart"](3,"h3"),h["\u0275\u0275text"](4),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](5,"p"),h["\u0275\u0275text"](6),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](7,"p"),h["\u0275\u0275text"](8),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](9,"ion-item-divider",3),h["\u0275\u0275elementStart"](10,"h6"),h["\u0275\u0275text"](11,"\u5df2\u9009\u5bfc\u5e08\u73ed"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](12,p,11,6,"ion-item",2),h["\u0275\u0275elementStart"](13,"ion-item-divider",3),h["\u0275\u0275elementStart"](14,"h6"),h["\u0275\u0275text"](15,"\u5f85\u9009\u5bfc\u5e08\u73ed"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275template"](16,v,10,6,"ion-item",4),h["\u0275\u0275elementEnd"]()),2&e){var n=h["\u0275\u0275nextContext"]();h["\u0275\u0275advance"](4),h["\u0275\u0275textInterpolate1"](" ",n.the_record.name," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate2"](" ",n.the_record.status," / ",n.the_record.grade_name," "),h["\u0275\u0275advance"](2),h["\u0275\u0275textInterpolate1"](" ",n.the_record.date," "),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngIf",n.the_student_tutor),h["\u0275\u0275advance"](4),h["\u0275\u0275property"]("ngForOf",n.the_record.tutors)}}var x,g,I=[{path:"",component:(x=function(){function e(t,n,r,a,o){_classCallCheck(this,e),this.osrv=t,this.route=n,this.router=r,this.auth=a,this.comm=o,this.the_filter=new c.b,this.params=new c.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.params.subscribe((function(t){return Object(s.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.the_filter.taskId=t.id,this.params.taskId=this.the_filter.taskId,e.next=4,this.auth.get_user();case 4:this.user=e.sent,this.params.studentSerialNo=this.user.userCode,this.init();case 7:case"end":return e.stop()}}),e,this)})))}))}},{key:"init",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.comm.loadingPresent();case 2:return t=e.sent,e.next=5,this.auth.get_user();case 5:this.user=e.sent,this.the_filter.userType=this.user.roles[0].userType,this.the_filter.userCode=this.user.userCode,this.load(),t.dismiss();case 10:case"end":return e.stop()}}),e,this)})))}},{key:"load",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.osrv.get_select_tutor_detail_bystudent(this.the_filter);case 2:this.the_record=e.sent.data,this.the_student_tutor=this.the_record.tutors.find((function(e){return e.selected})),this.the_record.tutors.filter((function(e){""!=e.avatar_url&&null!=e.avatar_url||(e.avatar_url=d.a.default_avatar)}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"refound",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.comm.presentAlert("\u6e29\u99a8\u63d0\u793a",null,"\u4f60\u786e\u5b9a\u8981\u9000\u9009\u8be5\u6559\u5e08\u5bfc\u5e08\u73ed\u5417\uff1f",[{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"\u786e\u5b9a",handler:function(){return Object(s.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.params.courseId=e.id,t.next=3,this.osrv.select_tutor_refound(this.params);case 3:0==(n=t.sent).code?(this.comm.presentToast("\u64cd\u4f5c\u6210\u529f\uff01"),this.load()):this.comm.presentToast(n.msg);case 5:case"end":return t.stop()}}),t,this)})))}}]);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"choose",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.actual==e.max){t.next=5;break}return t.next=3,this.comm.presentAlert("\u6e29\u99a8\u63d0\u793a",null,"\u4f60\u786e\u5b9a\u8981\u9009\u62e9\u8be5\u6559\u5e08\u5bfc\u5e08\u73ed\u5417\uff1f",[{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"\u786e\u5b9a",handler:function(){return Object(s.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.params.courseId=e.id,t.next=3,this.osrv.select_tutor_choose(this.params);case 3:0==(n=t.sent).code?(this.comm.presentToast("\u64cd\u4f5c\u6210\u529f\uff01"),this.load()):this.comm.presentToast(n.msg);case 5:case"end":return t.stop()}}),t,this)})))}}]);case 3:t.next=6;break;case 5:this.comm.presentToast("\u8be5\u5bfc\u5e08\u73ed\u5df2\u9009\u6ee1\uff01");case 6:case"end":return t.stop()}}),t,this)})))}}]),e}(),x.\u0275fac=function(e){return new(e||x)(h["\u0275\u0275directiveInject"](l.a),h["\u0275\u0275directiveInject"](i.a),h["\u0275\u0275directiveInject"](i.g),h["\u0275\u0275directiveInject"](u.a),h["\u0275\u0275directiveInject"](m.a))},x.\u0275cmp=h["\u0275\u0275defineComponent"]({type:x,selectors:[["app-student-select-tutor"]],decls:8,vars:1,consts:[["slot","start"],["defaultHref","tabs"],[4,"ngIf"],["id","course_group"],[3,"disabled","click",4,"ngFor","ngForOf"],[3,"src"],["color","primary",2,"font-size","small"],["size","small","color","danger",3,"click",4,"ngIf"],["size","small","color","danger",3,"click"],[3,"disabled","click"]],template:function(e,t){1&e&&(h["\u0275\u0275elementStart"](0,"ion-header"),h["\u0275\u0275elementStart"](1,"ion-toolbar"),h["\u0275\u0275elementStart"](2,"ion-buttons",0),h["\u0275\u0275element"](3,"ion-back-button",1),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](4,"ion-title"),h["\u0275\u0275text"](5,"\u9009\u5bfc\u5e08"),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementEnd"](),h["\u0275\u0275elementStart"](6,"ion-content"),h["\u0275\u0275template"](7,_,17,6,"ion-list",2),h["\u0275\u0275elementEnd"]()),2&e&&(h["\u0275\u0275advance"](7),h["\u0275\u0275property"]("ngIf",t.the_record))},directives:[o.IonHeader,o.IonToolbar,o.IonButtons,o.IonBackButton,o.IonBackButtonDelegate,o.IonTitle,o.IonContent,r.NgIf,o.IonList,o.IonItem,o.IonLabel,o.IonItemDivider,r.NgForOf,o.IonAvatar,o.IonButton,o.IonBadge],styles:[""]}),x)}],b=((g=function e(){_classCallCheck(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:g}),g.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||g)},imports:[[i.i.forChild(I)],i.i]}),g);n.d(t,"StudentSelectTutorPageModule",(function(){return k}));var S,k=((S=function e(){_classCallCheck(this,e)}).\u0275mod=h["\u0275\u0275defineNgModule"]({type:S}),S.\u0275inj=h["\u0275\u0275defineInjector"]({factory:function(e){return new(e||S)},imports:[[r.CommonModule,a.FormsModule,o.IonicModule,b]]}),S)}}]);