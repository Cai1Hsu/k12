function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{pjjl:function(e,n,t){"use strict";t.r(n);var o,i,a,r=t("ofXK"),s=t("3Pt+"),c=t("TEn/"),l=t("tyNb"),u=t("mrSG"),d=t("BLr9"),p=t("fLLL"),f=t("fXoL"),h=((o=function(){function e(n,t){_classCallCheck(this,e),this.platform=n,this.nativeAudio=t,this.sounds=[],this.audio_player=new Audio,this.forceWebAudio=!0}return _createClass(e,[{key:"preload",value:function(e,n){this.platform.is("cordova")&&!this.forceWebAudio?(this.nativeAudio.preloadSimple(e,n),this.sounds.push({key:e,asset:n,isNative:!0})):((new Audio).src=n,this.sounds.push({key:e,asset:n,isNative:!1}))}},{key:"play",value:function(e){var n=this.sounds.find((function(n){return n.key===e}));n.isNative?this.nativeAudio.play(n.asset).then((function(e){console.log(e)}),(function(e){console.log(e)})):(this.audio_player.src=n.asset,this.audio_player.play())}}]),e}()).\u0275fac=function(e){return new(e||o)(f["\u0275\u0275inject"](c.Platform),f["\u0275\u0275inject"](p.a))},o.\u0275prov=f["\u0275\u0275defineInjectable"]({token:o,factory:o.\u0275fac,providedIn:"root"}),o),g=[{path:"",component:(i=function(){function e(n,t,o,i){_classCallCheck(this,e),this.qrScanner=n,this.toast=t,this.audio=o,this.router=i,this.readyToScan=!1,this.scanning=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.prepareScanner()}},{key:"ngOnDestroy",value:function(){this.stopScanning()}},{key:"ngAfterViewInit",value:function(){this.audio.preload("scanbeep","assets/sounds/qr_code_beep.mp3")}},{key:"prepareScanner",value:function(){var e=this;this.qrScanner.prepare().then((function(n){if(n.authorized){console.log("Camera permision authorized"),e.readyToScan=!0,e.scanning=!0;var t=e.qrScanner.scan().subscribe((function(n){e.audio.play("scanbeep"),console.log("Scanned something",n),e.navto(n),e.qrScanner.hide(),t.unsubscribe()}));e.startScanning()}else n.denied?console.log("Camera permission permanently denied"):console.log("Camera permision temporarily denied")})).catch((function(e){console.log("Error is",e)}))}},{key:"toggleScanner",value:function(){this.scanning=!this.scanning,console.log("Toggled Scanner",this.scanning),this.scanning?this.startScanning():this.stopScanning()}},{key:"startScanning",value:function(){console.log("Started Scanning"),window.document.querySelector("html").classList.add("cameraView"),this.qrScanner.show()}},{key:"stopScanning",value:function(){console.log("Stopped Scanning"),window.document.querySelector("html").classList.remove("cameraView"),this.qrScanner.hide(),this.qrScanner.destroy()}},{key:"presentToast",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toast.create({message:e,color:"dark",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"navto",value:function(e){this.stopScanning(),this.router.navigate(["/tabs/features/equipment"])}}]),e}(),i.\u0275fac=function(e){return new(e||i)(f["\u0275\u0275directiveInject"](d.a),f["\u0275\u0275directiveInject"](c.ToastController),f["\u0275\u0275directiveInject"](h),f["\u0275\u0275directiveInject"](l.g))},i.\u0275cmp=f["\u0275\u0275defineComponent"]({type:i,selectors:[["app-qrscanner"]],decls:9,vars:0,consts:[["slot","start"],["defaultHref","tabs"],["id","container"],["src","assets/images/scan.gif",2,"width","128px","height","128px"]],template:function(e,n){1&e&&(f["\u0275\u0275elementStart"](0,"ion-header"),f["\u0275\u0275elementStart"](1,"ion-toolbar"),f["\u0275\u0275elementStart"](2,"ion-buttons",0),f["\u0275\u0275element"](3,"ion-back-button",1),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"ion-title"),f["\u0275\u0275text"](5,"\u626b\u63cf\u4e8c\u7ef4\u7801"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"ion-content"),f["\u0275\u0275elementStart"](7,"div",2),f["\u0275\u0275element"](8,"img",3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())},directives:[c.IonHeader,c.IonToolbar,c.IonButtons,c.IonBackButton,c.IonBackButtonDelegate,c.IonTitle,c.IonContent],styles:["ion-content[_ngcontent-%COMP%]{--background:var(--ion-background-color,transparent)}#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),i)}],m=((a=function e(){_classCallCheck(this,e)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:a}),a.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||a)},imports:[[l.i.forChild(g)],l.i]}),a);t.d(n,"QrscannerPageModule",(function(){return y}));var v,y=((v=function e(){_classCallCheck(this,e)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:v}),v.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||v)},imports:[[r.CommonModule,s.FormsModule,c.IonicModule,m]]}),v)}}]);