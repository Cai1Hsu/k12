function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{UcIy:function(e,t,n){"use strict";n.r(t);var s=n("ofXK"),r=n("3Pt+"),a=n("TEn/"),o=n("tyNb"),i=n("mrSG"),l=n("26ZW"),c=n("jMEw"),d=n("H6xx"),m=n("LWQN"),u=n("fXoL"),h=n("e8h1");function p(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",15),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).back()})),u["\u0275\u0275element"](1,"ion-icon",16),u["\u0275\u0275elementEnd"]()}}function v(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"div",17),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"](2).forward()})),u["\u0275\u0275element"](1,"ion-icon",18),u["\u0275\u0275elementEnd"]()}}function g(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-slide"),u["\u0275\u0275elementStart"](1,"h5"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"p",19),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,s=u["\u0275\u0275nextContext"](2);u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.name),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](s.userName)}}function f(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-list"),u["\u0275\u0275elementStart"](1,"ion-item",4),u["\u0275\u0275elementStart"](2,"ion-label",5),u["\u0275\u0275text"](3,"\u73ed\u7ea7"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ion-item",4),u["\u0275\u0275template"](5,p,2,0,"div",6),u["\u0275\u0275template"](6,v,2,0,"div",7),u["\u0275\u0275elementStart"](7,"ion-slides",8),u["\u0275\u0275listener"]("ionSlideDidChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().slideChange(e)})),u["\u0275\u0275template"](8,g,5,2,"ion-slide",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"ion-item",4),u["\u0275\u0275elementStart"](10,"ion-grid"),u["\u0275\u0275elementStart"](11,"ion-row"),u["\u0275\u0275elementStart"](12,"ion-col",10),u["\u0275\u0275elementStart"](13,"ion-label",11),u["\u0275\u0275text"](14,"\u5e94\u5230\u4eba\u6570"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"ion-input",12),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().saveModel.totalPerson=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"ion-col",10),u["\u0275\u0275elementStart"](17,"ion-label",11),u["\u0275\u0275text"](18,"\u5b9e\u5230\u4eba\u6570"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"ion-input",12),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().saveModel.actualPerson=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"ion-row"),u["\u0275\u0275elementStart"](21,"ion-col",10),u["\u0275\u0275elementStart"](22,"ion-label",11),u["\u0275\u0275text"](23,"\u4e8b\u5047\u4eba\u6570"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"ion-input",12),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().saveModel.leavePerson=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"ion-col",10),u["\u0275\u0275elementStart"](26,"ion-label",11),u["\u0275\u0275text"](27,"\u75c5\u5047\u4eba\u6570"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"ion-input",12),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().saveModel.sickPerson=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](29,"ion-item",4),u["\u0275\u0275elementStart"](30,"ion-grid"),u["\u0275\u0275elementStart"](31,"ion-row"),u["\u0275\u0275elementStart"](32,"ion-col",13),u["\u0275\u0275elementStart"](33,"ion-label",11),u["\u0275\u0275text"](34,"\u5907\u6ce8"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"ion-textarea",14),u["\u0275\u0275listener"]("ngModelChange",(function(e){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().saveModel.remark=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var s=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngIf",0!=s.selectIndex),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",s.selectIndex!=s.adminClassList.length-1),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",s.adminClassList),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngModel",s.saveModel.totalPerson),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngModel",s.saveModel.actualPerson),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngModel",s.saveModel.leavePerson),u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngModel",s.saveModel.sickPerson),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngModel",s.saveModel.remark)}}function x(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div",20),u["\u0275\u0275element"](2,"img",21),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-footer",22),u["\u0275\u0275elementStart"](1,"ion-button",23),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](n),u["\u0275\u0275nextContext"]().saveReport()})),u["\u0275\u0275text"](2,"\u63d0\u4ea4"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var s=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate"]("disabled",!(s.adminClassList.length>0))}}var C,I,P=[{path:"",component:(C=function(){function e(t,n,s,r,a,o,i){_classCallCheck(this,e),this.osrv=t,this.ymsrv=n,this.storage=s,this.pickerController=r,this.common=a,this.router=o,this.location=i,this.adminClassList=[],this.the_records=[],this.options=[],this.selectedClassName="",this.userName="",this.saveModel=new d.g,this.selectIndex=0,this.showEmpty=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.getTeacherAdminClassList(),this.slider=document.getElementById("ion-slides")}},{key:"getTeacherAdminClassList",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.storage.get("USER_INFO");case 2:return this.user=e.sent,this.userName=this.user.userName,t="",e.next=7,this.ymsrv.get_current_semester(this.user.serialNo).then((function(e){return Object(i.a)(s,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:0==e.code&&(t=e.data[0].serialNo,this.saveModel.semesterSerialNo=t,this.saveModel.semesterName=e.data[0].name);case 1:case"end":return n.stop()}}),n,this)})))}));case 7:return e.next=9,this.osrv.get_teacherAdminClasses(this.user.userCode,t);case 9:if(0!=(n=e.sent).code){e.next=16;break}if(n.data&&!(n.data.length<=0)){e.next=15;break}return e.next=14,this.common.presentToast("\u4f60\u6ca1\u6709\u5173\u8054\u7684\u884c\u653f\u73ed\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd","red","top");case 14:return e.abrupt("return",void(this.showEmpty=!0));case 15:this.showEmpty=!1,this.the_records=n.data;case 16:this.the_records.length>0&&this.the_records.forEach((function(e){s.adminClassList=s.adminClassList.concat(e.klasses)})),this.adminClassList.length>0&&(this.adminClassList.forEach((function(e){s.options.push({text:e.name,value:e.serialNo,selected:!1})})),this.saveModel.classSerialNo=this.adminClassList[0].serialNo,this.saveModel.className=this.adminClassList[0].name,this.saveModel.eduYearSerialNo=this.adminClassList[0].eduYearSerialNo,this.saveModel.eduYearName=this.adminClassList[0].eduYearName);case 17:case"end":return e.stop()}}),e,this)})))}},{key:"slideChange",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.slider.getActiveIndex().then((function(e){t.selectIndex=e,t.saveModel.classSerialNo=t.adminClassList[e].serialNo,t.saveModel.className=t.adminClassList[e].name,t.saveModel.eduYearSerialNo=t.adminClassList[e].eduYearSerialNo,t.saveModel.eduYearName=t.adminClassList[e].eduYearName,t.saveModel.totalPerson="0",t.saveModel.actualPerson="0",t.saveModel.leavePerson="0",t.saveModel.sickPerson="0",t.saveModel.remark=""}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"back",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.slider.slidePrev();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"forward",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.slider.slideNext();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"saveReport",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.common.loadingPresent("\u6b63\u5728\u63d0\u4ea4...");case 2:if(this.saveModel.totalPerson&&this.saveModel.actualPerson&&this.saveModel.leavePerson&&this.saveModel.sickPerson&&this.saveModel.remark&&""!=this.saveModel.remark&&null!=this.saveModel.remark){e.next=8;break}return e.next=5,this.common.presentToast("\u4eba\u6570\u6216\u5907\u6ce8\u4e0d\u5141\u8bb8\u4e3a\u7a7a","red","top");case 5:return e.next=7,this.common.loadingDismiss();case 7:return e.abrupt("return",void e.sent);case 8:if(!(NaN==parseInt(this.saveModel.totalPerson)||parseInt(this.saveModel.totalPerson)<0||NaN==parseInt(this.saveModel.actualPerson)||parseInt(this.saveModel.actualPerson)<0||NaN==parseInt(this.saveModel.leavePerson)||parseInt(this.saveModel.leavePerson)<0||NaN==parseInt(this.saveModel.sickPerson)||parseInt(this.saveModel.sickPerson)<0)){e.next=14;break}return e.next=11,this.common.presentToast("\u8bf7\u786e\u4fdd\u4eba\u6570\u586b\u5199\u7684\u5747\u4e3a0\u6216\u6b63\u6574\u6570","red","top");case 11:return e.next=13,this.common.loadingDismiss();case 13:return e.abrupt("return",void e.sent);case 14:if(0!=parseInt(this.saveModel.totalPerson)){e.next=20;break}return e.next=17,this.common.presentToast("\u5e94\u5230\u4eba\u6570\u4e0d\u80fd\u4e3a0","red","top");case 17:return e.next=19,this.common.loadingDismiss();case 19:return e.abrupt("return",void e.sent);case 20:if(Number.isInteger(parseInt(this.saveModel.totalPerson))&&Number.isInteger(parseInt(this.saveModel.actualPerson))&&Number.isInteger(parseInt(this.saveModel.leavePerson))&&Number.isInteger(parseInt(this.saveModel.sickPerson))){e.next=26;break}return e.next=23,this.common.presentToast("\u8bf7\u786e\u4fdd\u4eba\u6570\u586b\u5199\u7684\u5747\u4e3a0\u6216\u6b63\u6574\u6570","red","top");case 23:return e.next=25,this.common.loadingDismiss();case 25:return e.abrupt("return",void e.sent);case 26:if(!(parseInt(this.saveModel.totalPerson)<parseInt(this.saveModel.actualPerson)||parseInt(this.saveModel.totalPerson)<parseInt(this.saveModel.leavePerson)||parseInt(this.saveModel.totalPerson)<parseInt(this.saveModel.sickPerson))){e.next=32;break}return e.next=29,this.common.presentToast("\u5e94\u5230\u4eba\u6570\u4e0d\u80fd\u5c0f\u4e8e\u540e\u9762\u4efb\u4f55\u4e00\u9879\u7684\u4eba\u6570","red","top");case 29:return e.next=31,this.common.loadingDismiss();case 31:return e.abrupt("return",void e.sent);case 32:if(parseInt(this.saveModel.totalPerson)!=parseInt(this.saveModel.actualPerson)||!(parseInt(this.saveModel.leavePerson)>0||parseInt(this.saveModel.sickPerson)>0)){e.next=40;break}return e.next=35,this.common.presentToast("\u5e94\u5230\u5b9e\u5230\u4eba\u6570\u76f8\u540c\u65f6\uff0c\u5176\u4ed6\u9879\u53ea\u80fd\u4e3a0","red","top");case 35:return this.saveModel.leavePerson="0",this.saveModel.sickPerson="0",e.next=39,this.common.loadingDismiss();case 39:return e.abrupt("return",void e.sent);case 40:if(!(parseInt(this.saveModel.totalPerson)>parseInt(this.saveModel.actualPerson)&&parseInt(this.saveModel.leavePerson)+parseInt(this.saveModel.sickPerson)>parseInt(this.saveModel.totalPerson)-parseInt(this.saveModel.actualPerson))){e.next=46;break}return e.next=43,this.common.presentToast("\u4e8b\u5047\u4eba\u6570\u548c\u75c5\u5047\u4eba\u6570\u4e4b\u548c\u4e0e\u7f3a\u52e4\u603b\u4eba\u6570\u4e0d\u7b26\uff0c\u8bf7\u68c0\u67e5","red","top");case 43:return e.next=45,this.common.loadingDismiss();case 45:return e.abrupt("return",void e.sent);case 46:if(!(this.saveModel.remark.length>250)){e.next=52;break}return e.next=49,this.common.presentToast("\u5907\u6ce8\u4e0d\u80fd\u8d85\u8fc7250\u4e2a\u5b57\u7b26","red","top");case 49:return e.next=51,this.common.loadingDismiss();case 51:return e.abrupt("return",void e.sent);case 52:return e.next=54,this.osrv.save_teacherReport(this.saveModel);case 54:if(0!=(t=e.sent).code){e.next=62;break}return e.next=58,this.common.presentToast("\u63d0\u4ea4\u6210\u529f","green","top");case 58:return e.next=60,this.common.loadingDismiss();case 60:e.next=66;break;case 62:return e.next=64,this.common.presentToast("\u4fdd\u5b58\u5931\u8d25\uff1a"+t.msg,"red","top");case 64:return e.next=66,this.common.loadingDismiss();case 66:case"end":return e.stop()}}),e,this)})))}}]),e}(),C.\u0275fac=function(e){return new(e||C)(u["\u0275\u0275directiveInject"](l.a),u["\u0275\u0275directiveInject"](c.a),u["\u0275\u0275directiveInject"](h.b),u["\u0275\u0275directiveInject"](a.PickerController),u["\u0275\u0275directiveInject"](m.a),u["\u0275\u0275directiveInject"](o.g),u["\u0275\u0275directiveInject"](s.Location))},C.\u0275cmp=u["\u0275\u0275defineComponent"]({type:C,selectors:[["app-report-student"]],decls:10,vars:3,consts:[["slot","start"],["defaultHref","tabs"],[4,"ngIf"],["class","ion-no-border","style","text-align: center;",4,"ngIf"],["lines","none"],[2,"font-size","14px","color","#8C8C8C"],["class","admin-class admin-class-icon-left",3,"click",4,"ngIf"],["class","admin-class admin-class-icon-right",3,"click",4,"ngIf"],["id","ion-slides",1,"label-class",3,"ionSlideDidChange"],[4,"ngFor","ngForOf"],["size","6"],[1,"person-count-title"],[1,"input-number",3,"ngModel","ngModelChange"],["size","12"],["placeholder","\u8bf7\u8f93\u5165\u5907\u6ce8",1,"input-number","input-remark",3,"ngModel","ngModelChange"],[1,"admin-class","admin-class-icon-left",3,"click"],["name","caret-back-outline"],[1,"admin-class","admin-class-icon-right",3,"click"],["name","caret-forward-outline"],[1,"teacher"],["slot","fixed",2,"text-align","center"],["src","assets/images/zanwushuju.png",2,"max-width","90%","max-height","50%","margin","auto"],[1,"ion-no-border",2,"text-align","center"],["color","primary",2,"width","90%","margin-bottom","20px",3,"disabled","click"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-header"),u["\u0275\u0275elementStart"](1,"ion-toolbar"),u["\u0275\u0275elementStart"](2,"ion-buttons",0),u["\u0275\u0275element"](3,"ion-back-button",1),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ion-title"),u["\u0275\u0275text"](5,"\u6668\u5348\u665a\u68c0"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"ion-content"),u["\u0275\u0275template"](7,f,36,8,"ion-list",2),u["\u0275\u0275template"](8,x,3,0,"div",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](9,M,3,1,"ion-footer",3)),2&e&&(u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngIf",!t.showEmpty),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.showEmpty),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",!t.showEmpty))},directives:[a.IonHeader,a.IonToolbar,a.IonButtons,a.IonBackButton,a.IonBackButtonDelegate,a.IonTitle,a.IonContent,s.NgIf,a.IonList,a.IonItem,a.IonLabel,a.IonSlides,s.NgForOf,a.IonGrid,a.IonRow,a.IonCol,a.IonInput,a.TextValueAccessor,r.NgControlStatus,r.NgModel,a.IonTextarea,a.IonIcon,a.IonSlide,a.IonFooter,a.IonButton],styles:[".label-class[_ngcontent-%COMP%]{background:#f6f6f6;height:80px;border-radius:6px;width:100%}.admin-class[_ngcontent-%COMP%]{position:absolute;display:inline-block;z-index:10001}.admin-class-name[_ngcontent-%COMP%]{float:left;margin-left:16px;margin-top:16px}.admin-class-name[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:PingFang SC;font-weight:700;line-height:18px;color:#000}.admin-class-name[_ngcontent-%COMP%]   p.nj[_ngcontent-%COMP%]{font-size:16px}.admin-class-name[_ngcontent-%COMP%]   p.teacher[_ngcontent-%COMP%]{font-size:14px}.admin-class-icon-right[_ngcontent-%COMP%]{margin-right:16px;right:0}.admin-class-icon-left[_ngcontent-%COMP%]{left:0}.person-count-title[_ngcontent-%COMP%]{font-size:14px;font-family:PingFang SC;font-weight:400;line-height:20px;color:#8c8c8c}.input-number[_ngcontent-%COMP%]{background:#f6f6f6;opacity:1;border-radius:6px;margin-top:9px;padding-left:10px!important;font-size:14px}.input-remark[_ngcontent-%COMP%]{height:90px}ion-grid[_ngcontent-%COMP%]{margin-left:-9px}.swiper-slide[_ngcontent-%COMP%]{display:block;text-align:left;padding-left:20px}.nj[_ngcontent-%COMP%]{font-size:16px}.teacher[_ngcontent-%COMP%]{font-size:14px;margin-top:-10px}"]}),C)}],b=((I=function e(){_classCallCheck(this,e)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[o.i.forChild(P)],o.i]}),I);n.d(t,"ReportStudentPageModule",(function(){return w}));var k,w=((k=function e(){_classCallCheck(this,e)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},imports:[[s.CommonModule,r.FormsModule,a.IonicModule,b]]}),k)}}]);