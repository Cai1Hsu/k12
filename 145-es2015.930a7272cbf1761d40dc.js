(window.webpackJsonp=window.webpackJsonp||[]).push([[145],{"z0x/":function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),d=n("mrSG"),l=n("ed2z"),a=n("LWQN"),m=n("jMEw"),c=n("fXoL");const p=[{path:"",component:(()=>{class e{constructor(e,t,n,o){this.common=e,this.ymsrv=t,this.router=n,this.route=o,this.the_model=new l.a,this.second=0,this.secondText="\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801"}ngOnInit(){this.route.paramMap.subscribe(e=>{this.userId=e.get("userid"),this.token=e.get("token")})}sendSms(){return Object(d.a)(this,void 0,void 0,(function*(){if(0==this.second)if(""!=this.the_model.phone&&null!=this.the_model.phone)if(/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.the_model.phone)){var e=yield this.common.loadingPresent("\u6b63\u5728\u53d1\u9001\u77ed\u4fe1......");try{if(0==(yield this.ymsrv.existsPhoneUser(this.userId,this.the_model.phone,this.token)).code)return void this.common.presentToast("\u624b\u673a\u53f7\u7801\uff1a"+this.the_model.phone+"\u5df2\u88ab\u5176\u4ed6\u8d26\u53f7\u4f7f\u7528\uff01");var t=yield this.ymsrv.sendSms(this.the_model.phone,this.token);if(0==t.code){this.second=60,yield this.common.presentAlert("\u6e29\u99a8\u63d0\u793a",null,"\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u81f3\u8be5\u624b\u673a\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff0c\u82e5\u957f\u65f6\u95f4\u672a\u6536\u5230\u9a8c\u8bc1\u7801\uff0c\u8bf7\u81f3\u201c\u5df2\u62e6\u622a\u77ed\u4fe1\u5217\u8868\u201d\u4e2d\u786e\u8ba4",["\u597d\u7684"]),this.secondText="\u91cd\u65b0\u53d1\u9001 "+this.second;var n=setInterval(()=>{this.secondText="\u91cd\u65b0\u53d1\u9001 "+--this.second,0==this.second&&(this.secondText="\u91cd\u65b0\u53d1\u9001",clearInterval(n))},1e3)}else this.common.presentToast(t.msg)}catch(o){console.log(o)}finally{e.dismiss()}}else this.common.presentToast("\u624b\u673a\u53f7\u7801\u6709\u8bef\uff0c\u8bf7\u91cd\u586b");else this.common.presentToast("\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7\u7801\uff01")}))}bindUser(e){return Object(d.a)(this,void 0,void 0,(function*(){if(!new RegExp("(?=.*[0-9])(?=.*[a-zA-Z]).{6,30}").test(this.the_model.passWord))return void this.common.presentToast("\u5bc6\u7801\u4e2d\u5fc5\u987b\u5305\u542b\u5b57\u6bcd(\u533a\u5206\u5927\u5c0f\u5199)\u3001\u6570\u5b57, \u4e14\u957f\u5ea6\u57286-30\u4f4d\u3002");var e=yield this.common.loadingPresent("\u5904\u7406\u4e2d......."),t=yield this.ymsrv.validVerifyCode(this.the_model.phone,this.the_model.verifyCode,this.token);if(0!=t.code)return this.common.presentToast(t.msg),void e.dismiss();let n=new FormData;n.append("Id",this.userId),n.append("NewPass",this.the_model.passWord),n.append("ConfirmPass",this.the_model.passWord),n.append("isReset","false"),n.append("MobileNo",this.the_model.phone);var o=yield this.ymsrv.bind_user(n,this.token);e.dismiss(),0==o.code?(this.common.presentToast("\u8d26\u53f7\u7ed1\u5b9a\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u60a8\u7684\u8d26\u53f7\u6216\u7ed1\u5b9a\u7684\u624b\u673a\u53f7\u7801+\u60a8\u521a\u8bbe\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\uff01","success"),setTimeout(()=>{this.router.navigate(["login"],{replaceUrl:!0,skipLocationChange:!0})},2e3)):this.common.presentToast(o.msg)}))}}return e.\u0275fac=function(t){return new(t||e)(c["\u0275\u0275directiveInject"](a.a),c["\u0275\u0275directiveInject"](m.a),c["\u0275\u0275directiveInject"](r.g),c["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=c["\u0275\u0275defineComponent"]({type:e,selectors:[["app-bind-phone"]],decls:21,vars:5,consts:[["slot","start"],["defaultHref","tabs"],[1,"bgfff",2,"padding","40px"],[3,"ngSubmit"],["form","ngForm"],[1,"ion-no-padding","ion-text-sm-left"],["name","phone","type","text","placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801","clearInput","true","inputmode","tel","required","",3,"ngModel","ngModelChange"],["name","verifycode","type","number","placeholder","\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801","inputmode","numeric","clearInput","true","maxlength","6","required","",3,"ngModel","ngModelChange"],["color","light","slot","end",3,"click"],["name","password","type","password","placeholder","6-30\u4f4d\uff0c\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57","required","",3,"ngModel","ngModelChange"],[2,"margin-top","30px"],["type","submit","expand","block",3,"disabled"]],template:function(e,t){if(1&e){const e=c["\u0275\u0275getCurrentView"]();c["\u0275\u0275elementStart"](0,"ion-header"),c["\u0275\u0275elementStart"](1,"ion-toolbar"),c["\u0275\u0275elementStart"](2,"ion-buttons",0),c["\u0275\u0275element"](3,"ion-back-button",1),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](4,"ion-title"),c["\u0275\u0275text"](5,"\u7ed1\u5b9a\u624b\u673a"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](6,"ion-content",2),c["\u0275\u0275elementStart"](7,"form",3,4),c["\u0275\u0275listener"]("ngSubmit",(function(){c["\u0275\u0275restoreView"](e);const n=c["\u0275\u0275reference"](8);return t.bindUser(n)})),c["\u0275\u0275elementStart"](9,"ion-list"),c["\u0275\u0275elementStart"](10,"ion-item",5),c["\u0275\u0275elementStart"](11,"ion-input",6),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.the_model.phone=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](12,"ion-item",5),c["\u0275\u0275elementStart"](13,"ion-input",7),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.the_model.verifyCode=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](14,"ion-badge",8),c["\u0275\u0275listener"]("click",(function(){return t.sendSms()})),c["\u0275\u0275text"](15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](16,"ion-item",5),c["\u0275\u0275elementStart"](17,"ion-input",9),c["\u0275\u0275listener"]("ngModelChange",(function(e){return t.the_model.passWord=e})),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"div",10),c["\u0275\u0275elementStart"](19,"ion-button",11),c["\u0275\u0275text"](20,"\u63d0\u4ea4"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()}if(2&e){const e=c["\u0275\u0275reference"](8);c["\u0275\u0275advance"](11),c["\u0275\u0275property"]("ngModel",t.the_model.phone),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",t.the_model.verifyCode),c["\u0275\u0275advance"](2),c["\u0275\u0275textInterpolate"](t.secondText),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngModel",t.the_model.passWord),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("disabled",e.invalid)}},directives:[s.IonHeader,s.IonToolbar,s.IonButtons,s.IonBackButton,s.IonBackButtonDelegate,s.IonTitle,s.IonContent,i["\u0275angular_packages_forms_forms_y"],i.NgControlStatusGroup,i.NgForm,s.IonList,s.IonItem,s.IonInput,s.TextValueAccessor,i.RequiredValidator,i.NgControlStatus,i.NgModel,s.NumericValueAccessor,i.MaxLengthValidator,s.IonBadge,s.IonButton],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:20px;--padding-end:20px;--padding-top:20px;--padding-bottom:20px}ion-badge[_ngcontent-%COMP%]{--padding-top:8px;--padding-bottom:8px}"]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.i.forChild(p)],r.i]}),e})();n.d(t,"BindPhonePageModule",(function(){return u}));let u=(()=>{class e{}return e.\u0275mod=c["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.CommonModule,i.FormsModule,s.IonicModule,h]]}),e})()}}]);