(window.webpackJsonp=window.webpackJsonp||[]).push([[153],{Nwj7:function(e,t,n){"use strict";n.r(t);var l=n("ofXK"),o=n("3Pt+"),i=n("TEn/"),a=n("tyNb"),s=n("mrSG"),r=n("AytR"),d=n("26ZW"),c=n("qXBG"),m=n("9UzA"),u=n("fXoL"),g=n("e8h1");const h=["studentSlides"];function p(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-card"),u["\u0275\u0275elementStart"](1,"ion-grid"),u["\u0275\u0275elementStart"](2,"ion-row",11),u["\u0275\u0275elementStart"](3,"ion-col",12),u["\u0275\u0275elementStart"](4,"div"),u["\u0275\u0275elementStart"](5,"label",13),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"ion-col",14),u["\u0275\u0275elementStart"](8,"div",15),u["\u0275\u0275elementStart"](9,"ion-button",16),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"ion-row",17),u["\u0275\u0275elementStart"](12,"ion-col",6),u["\u0275\u0275elementStart"](13,"div"),u["\u0275\u0275elementStart"](14,"div",18),u["\u0275\u0275elementStart"](15,"label",19),u["\u0275\u0275text"](16,"\u5e74\u7ea7\u53c2\u8003\u4eba\u6570"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](17,"div",15),u["\u0275\u0275elementStart"](18,"label",20),u["\u0275\u0275text"](19),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"ion-col",6),u["\u0275\u0275elementStart"](21,"div"),u["\u0275\u0275elementStart"](22,"div",18),u["\u0275\u0275elementStart"](23,"label",19),u["\u0275\u0275text"](24,"\u73ed\u7ea7\u5e73\u5747\u5206"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"div",15),u["\u0275\u0275elementStart"](26,"label",20),u["\u0275\u0275text"](27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"ion-row",17),u["\u0275\u0275elementStart"](29,"ion-col",6),u["\u0275\u0275elementStart"](30,"div"),u["\u0275\u0275elementStart"](31,"div",18),u["\u0275\u0275elementStart"](32,"label",19),u["\u0275\u0275text"](33,"\u73ed\u7ea7\u6700\u9ad8\u5206"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"div",15),u["\u0275\u0275elementStart"](35,"label",20),u["\u0275\u0275text"](36),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](37,"ion-col",6),u["\u0275\u0275elementStart"](38,"div"),u["\u0275\u0275elementStart"](39,"div",18),u["\u0275\u0275elementStart"](40,"label",19),u["\u0275\u0275text"](41,"\u73ed\u7ea7\u6700\u4f4e\u5206"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](42,"div",15),u["\u0275\u0275elementStart"](43,"label",20),u["\u0275\u0275text"](44),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](45,"ion-row",17),u["\u0275\u0275elementStart"](46,"ion-col",6),u["\u0275\u0275elementStart"](47,"div"),u["\u0275\u0275elementStart"](48,"div",18),u["\u0275\u0275elementStart"](49,"label",19),u["\u0275\u0275text"](50,"\u73ed\u7ea7\u8d21\u732e\u5ea6"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](51,"div",15),u["\u0275\u0275elementStart"](52,"label",20),u["\u0275\u0275text"](53),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](54,"ion-col",6),u["\u0275\u0275elementStart"](55,"div"),u["\u0275\u0275elementStart"](56,"div",18),u["\u0275\u0275elementStart"](57,"label",19),u["\u0275\u0275text"](58,"\u53d8\u5f02\u7cfb\u6570"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](59,"div",15),u["\u0275\u0275elementStart"](60,"label",20),u["\u0275\u0275text"](61),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.className),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](e.classNumber),u["\u0275\u0275advance"](9),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.examCount),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.avgScore),u["\u0275\u0275advance"](9),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.maxScore),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.minScore),u["\u0275\u0275advance"](9),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.absoluteDeviation),u["\u0275\u0275advance"](8),u["\u0275\u0275textInterpolate"](e.classResultDetailInfo.relativeDeviation)}}function S(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-segment-button",21),u["\u0275\u0275listener"]("click",(function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"]().segmentChanged(n)})),u["\u0275\u0275elementStart"](1,"ion-label"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](3,"div",22),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;u["\u0275\u0275classMapInterpolate1"]("level ",e.cssClass,""),u["\u0275\u0275propertyInterpolate"]("value",e.id),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.sectionName)}}function f(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-item",28),u["\u0275\u0275listener"]("click",(function(){u["\u0275\u0275restoreView"](e);const n=t.$implicit;return u["\u0275\u0275nextContext"](3).navTo(n)})),u["\u0275\u0275elementStart"](1,"ion-avatar",29),u["\u0275\u0275element"](2,"ion-img",30),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"ion-label",31),u["\u0275\u0275elementStart"](4,"span",13),u["\u0275\u0275text"](5),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"p"),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](8,"ion-label",32),u["\u0275\u0275elementStart"](9,"p"),u["\u0275\u0275text"](10,"\u5e74\u7ea7\u6392\u540d"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"span",13),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"ion-label",33),u["\u0275\u0275elementStart"](14,"p"),u["\u0275\u0275text"](15,"\u603b\u5206"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"span",13),u["\u0275\u0275text"](17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit,n=u["\u0275\u0275nextContext"](3);u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("src",n.default_avatar),u["\u0275\u0275advance"](3),u["\u0275\u0275textInterpolate"](e.realName),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](e.studentNumber),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](e.gradeRank),u["\u0275\u0275advance"](5),u["\u0275\u0275textInterpolate"](e.score)}}function v(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-slide"),u["\u0275\u0275elementStart"](1,"div",26),u["\u0275\u0275elementStart"](2,"ion-card"),u["\u0275\u0275elementStart"](3,"ion-list"),u["\u0275\u0275template"](4,f,18,5,"ion-item",27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;u["\u0275\u0275advance"](4),u["\u0275\u0275property"]("ngForOf",e.classStudents)}}function b(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-slides",23,24),u["\u0275\u0275listener"]("ionSlideDidChange",(function(t){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().slideChange(t)})),u["\u0275\u0275template"](2,v,5,1,"ion-slide",25),u["\u0275\u0275elementEnd"]()}if(2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275property"]("options",e.slideOpts),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",e.studentsList)}}const E=[{path:"",component:(()=>{class e{constructor(e,t,n,l,o){this.activeRouter=e,this.router=t,this.asrv=n,this.osrv=l,this.storage=o,this.class_id="",this.classResultDetailInfo=new m.a,this.default_avatar=r.a.default_avatar,this.segment_index=0,this.studentsList=new Array,this.templateEchelonSubject=new Array,this.slideOpts={autoHeight:!0}}ngOnInit(){this.load()}load(){return Object(s.a)(this,void 0,void 0,(function*(){this.classIds=yield this.storage.get("Learning_Situation_Classes"),this.activeRouter.params.subscribe(e=>Object(s.a)(this,void 0,void 0,(function*(){if(this.task_id==e.taskId&&this.template_id==e.templateId&&this.class_id==e.classId)return;this.templateEchelonSubject=new Array,this.studentsList=new Array,this.task_id=e.taskId,this.template_id=e.templateId,""==this.class_id&&(this.class_id=e.classId);let t=yield this.osrv.get_learning_situation_class_result_detail(this.task_id,this.class_id);t.total&&(this.classResultDetailInfo=t.total),this.classNumber=this.classIds.findIndex(e=>e==this.class_id)+1,this.previousButton=this.classNumber<2?"":"\u25c0",this.nextButton=this.classNumber>=this.classIds.length?"":"\u25b6";let n=yield this.osrv.get_learning_situation_template_echelon_subject(e.templateId,"0");for(let e=0;e<n.length;e++){let t=new m.i;t.id=n[e].id,t.sectionName=n[e].sectionName,t.cssClass=e<6?"level"+(e+1).toString():"",this.templateEchelonSubject.push(t)}this.echelonValue=n[0].id;let l=yield this.osrv.get_learning_situation_class_student_list(this.task_id,this.class_id);for(let e=0;e<n.length;e++){let t=new Array;for(let i=0;i<l.length;i++)l[i].gradeEchelonSectionId==n[e].id&&t.push(l[i]);let o=new m.b;o.classStudents=t,this.studentsList.push(o)}this.studentCount=this.studentsList[0].classStudents.length.toString()})))}))}loadStudent(){return Object(s.a)(this,void 0,void 0,(function*(){}))}slideChange(e){return Object(s.a)(this,void 0,void 0,(function*(){console.log(e);var t=yield this.slider.getActiveIndex();this.echelonValue=this.templateEchelonSubject[t].id,this.studentCount=this.studentsList[t].classStudents.length.toString()}))}movePrevious(){this.classNumber>=2&&(this.class_id=this.classIds[this.classNumber-2],this.classNumber-=1,this.templateEchelonSubject=new Array,this.studentsList=new Array,this.load())}moveNext(){this.classNumber<this.classIds.length&&(this.class_id=this.classIds[this.classNumber],this.classNumber+=1,this.templateEchelonSubject=new Array,this.studentsList=new Array,this.load())}segmentChanged(e){for(let t=0;t<this.templateEchelonSubject.length;t++)e.id==this.templateEchelonSubject[t].id&&(this.slider.slideTo(t),this.studentCount=this.studentsList[t].classStudents.length.toString())}navTo(e){this.router.navigate(["/features/learning-situation/learning-situation-detail",{taskId:this.task_id,studentId:e.studentId,templateId:this.template_id}])}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](a.a),u["\u0275\u0275directiveInject"](a.g),u["\u0275\u0275directiveInject"](c.a),u["\u0275\u0275directiveInject"](d.a),u["\u0275\u0275directiveInject"](g.b))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-learning-situation-class"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275viewQuery"](h,!0),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.slider=n.first)},decls:26,vars:8,consts:[["slot","start"],["defaultHref","tabs"],[1,"textCenter","bgBlue","titleWhite"],["size","2",3,"click"],["size","8"],[4,"ngIf"],["size","6"],["mode","md","id","levelSegment",3,"value"],[3,"class","value","click",4,"ngFor","ngForOf"],[1,"fontRight","grayFont"],[3,"options","ionSlideDidChange",4,"ngIf"],[1,"ion-justify-content-around","classItem"],["size","10",1,"className"],[1,"title"],["size","2"],[1,"fontRight"],["size","small","color","primary"],[1,"ion-justify-content-around"],[1,"fontLeft"],[1,"grayFont"],[1,"blueFont"],[3,"value","click"],[1,"bolder-sm"],[3,"options","ionSlideDidChange"],["studentSlides",""],[4,"ngFor","ngForOf"],[2,"width","100%"],["detail","",3,"click",4,"ngFor","ngForOf"],["detail","",3,"click"],["slot","start",1,""],[3,"src"],[1,"studentName"],[1,"textCenter"],[1,"textCenter","totalScore"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-header"),u["\u0275\u0275elementStart"](1,"ion-toolbar"),u["\u0275\u0275elementStart"](2,"ion-buttons",0),u["\u0275\u0275element"](3,"ion-back-button",1),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ion-title"),u["\u0275\u0275text"](5,"\u73ed\u7ea7\u6210\u7ee9\u8be6\u60c5"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"ion-content"),u["\u0275\u0275elementStart"](7,"ion-grid",2),u["\u0275\u0275elementStart"](8,"ion-row"),u["\u0275\u0275elementStart"](9,"ion-col",3),u["\u0275\u0275listener"]("click",(function(){return t.movePrevious()})),u["\u0275\u0275text"](10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](11,"ion-col",4),u["\u0275\u0275text"](12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](13,"ion-col",3),u["\u0275\u0275listener"]("click",(function(){return t.moveNext()})),u["\u0275\u0275text"](14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](15,p,62,8,"ion-card",5),u["\u0275\u0275elementStart"](16,"ion-grid"),u["\u0275\u0275elementStart"](17,"ion-row"),u["\u0275\u0275elementStart"](18,"ion-col",6),u["\u0275\u0275elementStart"](19,"ion-segment",7),u["\u0275\u0275template"](20,S,4,5,"ion-segment-button",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"ion-col",6),u["\u0275\u0275elementStart"](22,"div",9),u["\u0275\u0275elementStart"](23,"label"),u["\u0275\u0275text"](24),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](25,b,3,2,"ion-slides",10),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](10),u["\u0275\u0275textInterpolate"](t.previousButton),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](t.classResultDetailInfo.className),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](t.nextButton),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.classResultDetailInfo),u["\u0275\u0275advance"](4),u["\u0275\u0275propertyInterpolate"]("value",t.echelonValue),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngForOf",t.templateEchelonSubject),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate1"]("\u5171",t.studentCount,"\u4eba"),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.studentsList.length>0))},directives:[i.IonHeader,i.IonToolbar,i.IonButtons,i.IonBackButton,i.IonBackButtonDelegate,i.IonTitle,i.IonContent,i.IonGrid,i.IonRow,i.IonCol,l.NgIf,i.IonSegment,i.SelectValueAccessor,l.NgForOf,i.IonCard,i.IonButton,i.IonSegmentButton,i.IonLabel,i.IonSlides,i.IonSlide,i.IonList,i.IonItem,i.IonAvatar,i.IonImg],styles:[".title[_ngcontent-%COMP%]{font-weight:900;color:#000}.titleWhite[_ngcontent-%COMP%]{font-weight:900;color:#fff;font-size:14px;line-height:32px}.blueFont[_ngcontent-%COMP%]{color:#1982ff}.grayPoint[_ngcontent-%COMP%]{color:#8e8e93}.grayFont[_ngcontent-%COMP%]{color:#8c8c8c}.blueScore[_ngcontent-%COMP%]{color:#007aff}.orangeScore[_ngcontent-%COMP%]{color:#f59a23}.redScore[_ngcontent-%COMP%]{color:#ff6110}.margin0[_ngcontent-%COMP%]{margin:0}.fontRight[_ngcontent-%COMP%]{float:right}.fontLeft[_ngcontent-%COMP%]{float:left}.point[_ngcontent-%COMP%]{float:right;margin:-4px 0}.point[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:19px;line-height:19px}.marginleft6[_ngcontent-%COMP%]{margin:0 6px}.classItem[_ngcontent-%COMP%]   .className[_ngcontent-%COMP%], .lineHeight32[_ngcontent-%COMP%]{line-height:32px}.classItem[_ngcontent-%COMP%]   .classAvg[_ngcontent-%COMP%], .lineHeight40[_ngcontent-%COMP%]{line-height:40px}.bgBlue[_ngcontent-%COMP%]{background-color:#1982ff}.textCenter[_ngcontent-%COMP%]{text-align:center}ion-segment-button[_ngcontent-%COMP%]{--border-width:0px;min-width:4rem;--indicator-height:0rem;font-weight:900;--padding-start:20px;--padding-end:20px}.segment_width[_ngcontent-%COMP%]{min-width:6rem!important}.level[_ngcontent-%COMP%] > ion-label[_ngcontent-%COMP%]{margin:0}.level[_ngcontent-%COMP%]{color:#8f92a1;min-height:unset}.level1.segment-button-checked[_ngcontent-%COMP%]{color:#1982ff!important}.level2.segment-button-checked[_ngcontent-%COMP%]{color:#ffb800!important}.level3.segment-button-checked[_ngcontent-%COMP%]{color:#f54723!important}.level.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #8c8c8c;width:1rem;margin:0 auto}.level1.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #1982ff}.level2.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #ffb800}.level3.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #f54723}.level4.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #70b603}.level5.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #ffd56e}.level6.segment-button-checked[_ngcontent-%COMP%] > .bolder-sm[_ngcontent-%COMP%]{border:1px solid #caf982}.studentName[_ngcontent-%COMP%]{min-width:5.6rem}.totalScore[_ngcontent-%COMP%]{max-width:2.6rem}"]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.i.forChild(E)],a.i]}),e})();n.d(t,"LearningSituationClassPageModule",(function(){return x}));let x=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.CommonModule,o.FormsModule,i.IonicModule,I]]}),e})()}}]);