function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{AFfN:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),o=n("3Pt+"),i=n("TEn/"),a=n("tyNb"),c=n("mrSG"),s=n("fXoL"),l=n("te5A"),m=n("wd/R"),d=n("qXBG"),u=n("qtCL"),h=n("D+jN"),f=n("LWQN"),p=n("rttL"),v=n("h2Q0"),g=n("uwyt"),_=n("Xj7U"),x=n("AytR"),b=n("w+1N"),w=n("B7Rs"),y=n("FAH8"),C=n("ZVAZ"),k=n("ZE2D"),I=n("zxQZ"),S=["previewBody"],O=["comment_content"];function E(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275element"](1,"app-resource-video-viewer",22),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("src",n.the_first_url)}}function M(e,t){1&e&&s["\u0275\u0275element"](0,"span",32)}var R=function(e){return{active:e}};function P(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",30),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit,r=t.index;return s["\u0275\u0275nextContext"](3).swipeVideo(e,r)})),s["\u0275\u0275elementStart"](1,"a"),s["\u0275\u0275template"](2,M,1,0,"span",31),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](3,R,!0===r.selected)),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!0===r.selected),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](r.name)}}var T=function(e){return{width:e}};function V(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",23),s["\u0275\u0275elementStart"](1,"a",24),s["\u0275\u0275text"](2,"\u89c6\u9891\u9009\u96c6 "),s["\u0275\u0275elementStart"](3,"span",25),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"a",26),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).showAllVideo()})),s["\u0275\u0275text"](6,"\u9009\u96c6"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",27),s["\u0275\u0275elementStart"](8,"div",28),s["\u0275\u0275template"](9,P,4,5,"div",29),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate2"]("(",r.the_video_index,"/",r.the_video.length,")"),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngStyle",s["\u0275\u0275pureFunction1"](4,T,7.5*r.the_video.length+"rem")),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",r.the_video)}}function j(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-segment-button",18),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).segmentChange("resource")})),s["\u0275\u0275elementStart"](1,"ion-label"),s["\u0275\u0275text"](2,"\u5b66\u4e60\u8d44\u6e90"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](3,"div",19),s["\u0275\u0275elementEnd"]()}2&e&&s["\u0275\u0275property"]("value","video")}function D(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",33),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.the_record.content," ")}}function z(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",39),s["\u0275\u0275elementStart"](1,"ion-item",40),s["\u0275\u0275elementStart"](2,"ion-thumbnail",41),s["\u0275\u0275element"](3,"img",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"ion-input",42,43),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).the_comment_submit.content=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"ion-button",44),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).create_comment()})),s["\u0275\u0275text"](7,"\u53d1\u5e03"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("src",r.user.avatarUrl,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngModel",r.the_comment_submit.content)("placeholder",r.the_place_holder)}}function N(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",49),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"](3).reply(e)})),s["\u0275\u0275text"](1,"\u56de\u590d"),s["\u0275\u0275elementEnd"]()}}function F(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",50),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"](3).delete(e,null)})),s["\u0275\u0275text"](1,"\u5220\u9664"),s["\u0275\u0275elementEnd"]()}}function A(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"span"),s["\u0275\u0275text"](1,"\xa0\u56de\u590d\xa0"),s["\u0275\u0275elementStart"](2,"span",54),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](n.replyTeacherName)}}function L(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",50),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"](5).reply(e)})),s["\u0275\u0275text"](1,"\u56de\u590d"),s["\u0275\u0275elementEnd"]()}}function $(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",50),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"](2).$implicit,t=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"](3).delete(e,t)})),s["\u0275\u0275text"](1,"\u5220\u9664"),s["\u0275\u0275elementEnd"]()}}function B(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nz-comment",45),s["\u0275\u0275element"](1,"nz-avatar",46),s["\u0275\u0275elementStart"](2,"nz-comment-content"),s["\u0275\u0275elementStart"](3,"p"),s["\u0275\u0275template"](4,A,4,1,"span",3),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"nz-comment-action"),s["\u0275\u0275template"](7,L,2,0,"a",48),s["\u0275\u0275template"](8,$,2,0,"a",48),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit,r=s["\u0275\u0275nextContext"](5);s["\u0275\u0275property"]("nzAuthor",n.teacherName)("nzDatetime",n.createdOnName),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("nzSrc",n.avatar),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",n.replyTeacherName),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.content," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!0===r.can_reply),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===n.canDelete)}}function U(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,B,9,7,"nz-comment",53),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===n.show)}}function H(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",55),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=s["\u0275\u0275nextContext"](2).$implicit;return s["\u0275\u0275nextContext"](3).load_child_more(e)})),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"]("\u5171",r.comments.length,"\u6761\u56de\u590d>")}}function Y(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,U,2,1,"ng-container",51),s["\u0275\u0275template"](2,H,2,1,"a",52),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.comments),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===n.showMore)}}function Q(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"nz-comment",45),s["\u0275\u0275element"](1,"nz-avatar",46),s["\u0275\u0275elementStart"](2,"nz-comment-content"),s["\u0275\u0275elementStart"](3,"p"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"nz-comment-action"),s["\u0275\u0275template"](6,N,2,0,"a",47),s["\u0275\u0275template"](7,F,2,0,"a",48),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](8,Y,3,2,"ng-container",3),s["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=s["\u0275\u0275nextContext"](3);s["\u0275\u0275property"]("nzAuthor",n.teacherName)("nzDatetime",n.createdOnName),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("nzSrc",n.avatar),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",n.content," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!0===r.can_reply),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===n.canDelete),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.comments&&n.comments.length>0)}}function W(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",56),s["\u0275\u0275elementStart"](1,"a",57),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](3).moreComment()})),s["\u0275\u0275text"](2,"\u67e5\u770b\u66f4\u591a\u8bc4\u8bba"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}}function X(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,z,8,3,"div",34),s["\u0275\u0275elementStart"](2,"div",35),s["\u0275\u0275elementStart"](3,"a",36),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](5,Q,9,7,"nz-comment",37),s["\u0275\u0275template"](6,W,3,0,"div",38),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===n.can_reply),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"]("\u5168\u90e8\u8bc4\u4ef7\uff08",n.the_comment_total,"\uff09"),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",n.the_comment_list),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.the_comment_total>n.the_comment_list.length)}}function G(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"li"),s["\u0275\u0275elementStart"](1,"a",63),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"](3).selectResource(e)})),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngClass",s["\u0275\u0275pureFunction1"](2,R,!0===r.selected)),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](r.name)}}function q(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.progress,"% ")}}function J(e,t){1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1,"\u4e0b\u8f7d"),s["\u0275\u0275elementContainerEnd"]())}function Z(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-button",44),s["\u0275\u0275listener"]("click",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"](3).downDoc(t,e)})),s["\u0275\u0275template"](1,q,2,1,"ng-container",3),s["\u0275\u0275template"](2,J,2,0,"ng-container",3),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===r.show),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",1!=r.show)}}function K(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-button",44),s["\u0275\u0275listener"]("click",(function(e){s["\u0275\u0275restoreView"](n);var t=s["\u0275\u0275nextContext"]().$implicit;return s["\u0275\u0275nextContext"](3).openDoc(t,e)})),s["\u0275\u0275text"](1,"\u6253\u5f00 "),s["\u0275\u0275elementEnd"]()}}function ee(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-item",64),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](n);var e=t.$implicit;return s["\u0275\u0275nextContext"](3).pickDoc(e)})),s["\u0275\u0275namespaceSVG"](),s["\u0275\u0275elementStart"](1,"svg",65),s["\u0275\u0275element"](2,"use"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275namespaceHTML"](),s["\u0275\u0275elementStart"](3,"ion-label"),s["\u0275\u0275elementStart"](4,"a",66),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"p"),s["\u0275\u0275elementStart"](7,"span",67),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"span",68),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](11,Z,3,2,"ion-button",69),s["\u0275\u0275template"](12,K,2,0,"ion-button",69),s["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,o=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](2),s["\u0275\u0275attribute"]("href",r.icon,null,"xlink"),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](r.title+r.fileType),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](o.the_record.teacherName),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](r.size),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",1!=r.open),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===r.open)}}function te(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ion-grid"),s["\u0275\u0275elementStart"](1,"ion-row"),s["\u0275\u0275elementStart"](2,"ion-col",58),s["\u0275\u0275elementStart"](3,"ul",59),s["\u0275\u0275template"](4,G,3,4,"li",51),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"ion-col",60),s["\u0275\u0275element"](6,"app-loading-process",61),s["\u0275\u0275elementStart"](7,"ion-list",40),s["\u0275\u0275template"](8,ee,13,6,"ion-item",62),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",n.the_resource),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("show",!n.the_doc||0==n.the_doc.length&&0==n.loadingDoc)("loading",!0===n.loadingDoc),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",n.the_doc)}}function ne(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"ion-content"),s["\u0275\u0275elementStart"](1,"div",5),s["\u0275\u0275template"](2,E,2,1,"ng-container",3),s["\u0275\u0275elementContainer"](3,null,6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",7),s["\u0275\u0275elementStart"](6,"ion-grid"),s["\u0275\u0275elementStart"](7,"ion-row"),s["\u0275\u0275elementStart"](8,"ion-col",8),s["\u0275\u0275elementStart"](9,"ion-thumbnail",9),s["\u0275\u0275element"](10,"img",10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"ion-col",11),s["\u0275\u0275elementStart"](12,"a",12),s["\u0275\u0275text"](13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"ion-row"),s["\u0275\u0275elementStart"](15,"ion-col",13),s["\u0275\u0275elementStart"](16,"a",14),s["\u0275\u0275text"](17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"ion-col",11),s["\u0275\u0275elementStart"](19,"a",15),s["\u0275\u0275text"](20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"a",15),s["\u0275\u0275text"](22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"a",15),s["\u0275\u0275text"](24),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](25,V,10,6,"div",16),s["\u0275\u0275elementStart"](26,"div"),s["\u0275\u0275elementStart"](27,"ion-segment",17),s["\u0275\u0275elementStart"](28,"ion-segment-button",18),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().segmentChange("description")})),s["\u0275\u0275elementStart"](29,"ion-label"),s["\u0275\u0275text"](30,"\u7b80\u4ecb"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](31,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](32,j,4,1,"ion-segment-button",20),s["\u0275\u0275elementStart"](33,"ion-segment-button",18),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"]().segmentChange("comment")})),s["\u0275\u0275elementStart"](34,"ion-label"),s["\u0275\u0275text"](35),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](36,"div",19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](37,D,2,1,"div",21),s["\u0275\u0275template"](38,X,7,4,"ng-container",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](39,te,9,4,"ion-grid",3),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",r.the_video.length>0&&r.isFirstLoad&&r.the_first_url&&""!=r.the_first_url),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("src",r.the_record.avatar,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](r.the_record.full_title),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](r.the_record.teacherName),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](r.the_record.date_str),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("\xa0\xa0|\xa0\xa0",r.the_record.gradeName,""),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("\xa0\xa0|\xa0\xa0",r.the_record.subjectName,""),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",r.the_video.length>0),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("value",r.the_segment_value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("value","description"),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",r.the_resource.length>0),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("value","comment"),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("\u8bc4\u8bba(",r.the_comment_total,")"),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf","description"===r.the_segment_value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","comment"===r.the_segment_value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","resource"===r.the_segment_value)}}function re(e,t){if(1&e&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275text"](1),s["\u0275\u0275elementContainerEnd"]()),2&e){var n=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.the_progress,"% ")}}function oe(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",73),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).download()})),s["\u0275\u0275text"](1,"\u89c6\u9891\u4e0b\u8f7d "),s["\u0275\u0275template"](2,re,2,1,"ng-container",3),s["\u0275\u0275elementEnd"]()}if(2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",!0===r.show_progress)}}function ie(e,t){if(1&e){var n=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"a",73),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](n),s["\u0275\u0275nextContext"](2).open()})),s["\u0275\u0275text"](1,"\u6253\u5f00 "),s["\u0275\u0275elementEnd"]()}}function ae(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ion-footer",0),s["\u0275\u0275element"](1,"div",70),s["\u0275\u0275elementStart"](2,"ion-toolbar"),s["\u0275\u0275template"](3,oe,3,1,"a",71),s["\u0275\u0275template"](4,ie,2,0,"a",72),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",1!=n.showOpen),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!0===n.showOpen)}}var ce,se,le=[{path:"",component:(ce=function(){function e(t,n,r,o,i,a,c,s,l,m,d,h,f){_classCallCheck(this,e),this.route=t,this.auth=n,this.componentFactoryResolver=r,this.comm=o,this.lpsrv=i,this.lplp=a,this.utility=c,this.cache=s,this.transfer=l,this.file=m,this.platform=d,this.fileOpener=h,this.router=f,this.the_video=[],this.isFirstLoad=!0,this.the_video_index=1,this.the_resource=[],this.the_doc=[],this.loadingDoc=!0,this.the_segment_value="description",this.showOpen=!1,this.the_progress=0,this.show_progress=!1,this.fileTransfer=this.transfer.create(),this.the_comment_submit=new u.e,this.the_comment_filter=new u.d,this.the_comment_list=[],this.the_comment_total=0,this.the_place_holder="\u8bf7\u8f93\u5165\u8bc4\u8bba\u7684\u5185\u5bb9",this.isConfirmLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.the_id=this.route.snapshot.paramMap.get("id"),this.the_teacherid=this.route.snapshot.paramMap.get("teacherId"),this.the_courseid=this.route.snapshot.paramMap.get("courseId"),""!=this.the_id?this.init():this.comm.presentToast("\u53c2\u6570\u9519\u8bef\uff01")}},{key:"initDir",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.platform.is("ios")||(this.file.createDir(this.file.dataDirectory,x.a.root_directory,!0),this.file.createDir(this.file.dataDirectory,x.a.root_directory+"/LearningSpace",!0),this.file.createDir(this.file.dataDirectory,x.a.root_directory+"/LearningSpace/"+this.the_record.subjectName,!0));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"init",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.get_user();case 2:return this.user=e.sent,e.next=5,this.lplp.Token();case 5:return this.the_token=e.sent,e.next=8,this.initData();case 8:if(e.t0=e.sent,1==e.t0){e.next=11;break}return e.abrupt("return",void this.comm.loadingDismiss());case 11:return e.next=13,this.auth.get_setting(this.user.serialNo);case 13:return this.the_setting=e.sent,e.next=16,this.auth.is_admin();case 16:if(t=e.sent,this.can_reply=t,1==t){e.next=25;break}return e.next=20,this.auth.get_setting(this.user.serialNo);case 20:return this.the_setting=e.sent,e.next=23,this.auth.get_userType();case 23:n=e.sent,this.can_reply=!0===this.the_setting.isOpenLearningSpaceReply&&this.the_setting.learningSpaceReplyUserType.filter((function(e){return e===n})).length>0;case 25:return e.next=27,this.initVideo();case 27:if(!(this.the_video.length>0)){e.next=36;break}return e.next=30,this.loadVideoUrl(this.the_video[0]);case 30:return this.the_video[0].selected=!0,this.the_first_url=this.the_video[0].url,e.next=34,this.cache.get("video_"+this.the_video[0].videoId);case 34:r=e.sent,this.showOpen=r&&""!=r;case 36:return e.next=38,this.initResource();case 38:if(e.t1=this.the_resource.length>0,!e.t1){e.next=42;break}return e.next=42,this.initDoc(this.the_resource[0]);case 42:return e.next=44,this.initComment();case 44:return this.platform.is("ios")||this.utility.checkPermission(),e.next=47,this.initDir();case 47:case"end":return e.stop()}}),e,this)})))}},{key:"initData",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lpsrv.get_syllabus_view(this.the_id,this.the_teacherid,this.the_token);case 2:return t=e.sent,e.abrupt("return",0!=t.code?(this.comm.presentToast(t.msg),!1):(this.the_record=t.data,this.the_record.full_title=this.the_record.syllabusName,this.the_record.tSort>0&&(this.the_record.full_title+="\uff08"+this.the_record.tSort+"\uff09"),this.the_record.avatar&&""!=this.the_record.avatar||(this.the_record.avatar=x.a.default_avatar),this.the_record.date_str=this.the_record.startTime&&""!=this.the_record.startTime?m(this.the_record.startTime).format("YYYY\u5e74M\u6708D\u65e5")+"\uff08\u5468"+this.comm.getChinese(this.the_record.week)+"\uff09\u7b2c"+(this.the_record.section-1)+"\u8282":m(this.the_record.createTime).format("YYYY-MM-DD HH:mm"),!0));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"initVideo",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lpsrv.get_syllabus_video_list(this.the_record.id,this.the_token);case 2:0==(t=e.sent).code?this.the_video=t.data:this.comm.presentToast(t.msg);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"swipeVideo",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!0!==e.selected){n.next=2;break}return n.abrupt("return");case 2:if(this.isFirstLoad=!1,n.t0=e.url&&""!=e.url,n.t0){n.next=7;break}return n.next=7,this.loadVideoUrl(e);case 7:return this.the_video.forEach((function(e){return e.selected=!1})),e.selected=!0,this.the_video_index=t+1,this.comm.loadingDismiss(),this.formContainer.clear(),r=this.componentFactoryResolver.resolveComponentFactory(_.a),this.formContainerRef=this.formContainer.createComponent(r),this.formContainerRef.instance.the_src=e.url,n.next=16,this.cache.get("video_"+e.videoId);case 16:o=n.sent,this.showOpen=o&&""!=o;case 18:case"end":return n.stop()}}),n,this)})))}},{key:"loadVideoUrl",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.source!=u.f.ResourceLibrary){t.next=10;break}return this.comm.loadingPresent(),t.next=4,this.lpsrv.get_resource_view(e.videoId,this.the_token);case 4:if(0==(n=t.sent).code){t.next=7;break}return t.abrupt("return",void this.comm.presentToast(n.msg));case 7:e.url=n.data.url,t.next=17;break;case 10:return this.comm.loadingPresent(),t.next=13,this.lpsrv.get_ondemand_data(e.videoId,this.the_token);case 13:if(0==(r=t.sent).code){t.next=16;break}return t.abrupt("return",void this.comm.presentToast(r.msg));case 16:e.url=r.data;case 17:case"end":return t.stop()}}),t,this)})))}},{key:"initDoc",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==e.selected){t.next=2;break}return t.abrupt("return");case 2:return this.loadingDoc=!0,t.next=5,this.lpsrv.get_syllabus_doc_list(this.the_record.id,e.id,this.the_token);case 5:n=t.sent,this.loadingDoc=!1,0==n.code&&(this.the_doc=n.data,this.the_doc.forEach((function(e){return Object(c.a)(r,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.icon="#"+this.comm.getFileIcon(e.fileType),t.next=3,this.cache.get("video_doc"+e.libraryId);case 3:(n=t.sent)&&""!=n&&(e.open=!0);case 5:case"end":return t.stop()}}),t,this)})))})),this.the_resource.forEach((function(e){return e.selected=!1})),e.selected=!0);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"initResource",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lpsrv.get_course_view(this.the_courseid,this.the_token);case 2:0==(t=e.sent).code?this.the_resource=t.data.resources:this.comm.presentToast(t.msg);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"selectResource",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initDoc(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"downDoc",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t&&t.stopPropagation(),r=encodeURI(x.a.ym_endpoint+x.a.learning_space+"/Doc/download/"+e.libraryId),!0===e.show){n.next=7;break}return n.next=5,this.utility.downLoad(r,e.title+e.fileType,x.a.root_directory+"/LearningSpace/"+this.the_record.subjectName+"/"+this.the_record.full_title,this.the_token,(function(){e.progress=1,e.show=!0}),(function(t){o.comm.presentToast("\u4e0b\u8f7d\u6210\u529f\uff01"),e.show=!1,e.open=!0,o.setCache("doc_"+e.libraryId,t.nativeURL)}),(function(e){o.comm.presentToast("\u4e0b\u8f7d\u5931\u8d25\uff01\u539f\u56e0\uff1a"+JSON.stringify(e))}),(function(t){e.progress=Math.ceil(t.loaded/t.total*100),e.progress>=100&&(e.show=!1)}));case 5:n.next=8;break;case 7:this.comm.presentToast("\u6b63\u5728\u4e0b\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u540e\uff01");case 8:case"end":return n.stop()}}),n,this)})))}},{key:"showAllVideo",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.comm.presentModal(b.a,"",{list:_toConsumableArray(this.the_video)});case 2:e.sent.onDidDismiss().then((function(e){e&&e.data&&t.swipeVideo(e.data.data,e.data.index)}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"segmentChange",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.the_segment_value=e;case 1:case"end":return t.stop()}}),t,this)})))}},{key:"download",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.the_video.find((function(e){return!0===e.selected})))&&null!=t){e.next=3;break}return e.abrupt("return",void this.comm.presentToast("\u8bf7\u9009\u62e9\u89c6\u9891\u5408\u96c6\uff01"));case 3:return n=encodeURI(x.a.ym_endpoint+x.a.learning_space+"/Doc/download/"+t.videoId),r=t.url.substring(t.url.lastIndexOf(".")),o=(t.name.length>50?t.name.substring(0,50):t.name)+r,t.source!=u.f.ResourceLibrary&&(n=encodeURI(t.url)),e.next=7,this.utility.downLoad(n,o,x.a.root_directory+"/LearningSpace/"+this.the_record.subjectName+"/"+this.the_record.full_title,this.the_token,(function(){i.the_progress=1,i.show_progress=!0}),(function(e){i.show_progress=!1,i.comm.presentToast("\u4e0b\u8f7d\u6210\u529f\uff01"),i.showOpen=!0,i.setCache(t.videoId,e.nativeURL)}),(function(e){i.comm.presentToast("\u4e0b\u8f7d\u5931\u8d25\uff01\u539f\u56e0\uff1a"+JSON.stringify(e))}),(function(e){alert("i am coming in"),i.the_progress=Math.ceil(e.loaded/e.total*100),i.the_progress>=100&&(i.show_progress=!1)}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"setCache",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.cache.set("video_"+e,t);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"open",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.the_video.find((function(e){return!0===e.selected})))&&null!=t){e.next=3;break}return e.abrupt("return",void this.comm.presentToast("\u8bf7\u9009\u62e9\u89c6\u9891\u5408\u96c6\uff01"));case 3:return e.next=5,this.cache.get("video_"+t.videoId);case 5:if((n=e.sent)&&""!=n){e.next=8;break}return e.abrupt("return",void this.comm.presentToast("\u672a\u80fd\u627e\u5230\u672c\u5730\u6587\u4ef6\uff01"));case 8:return r=t.url.substring(t.url.lastIndexOf(".")),e.next=11,this.comm.getMimeType(r);case 11:""!=(o=e.sent)?this.fileOpener.showOpenWithDialog(n,o):this.comm.presentToast("\u8be5\u6587\u4ef6\u65e0\u6cd5\u6253\u5f00\uff01");case 13:case"end":return e.stop()}}),e,this)})))}},{key:"openDoc",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t&&t.stopPropagation(),n.next=3,this.cache.get("video_doc_"+e.libraryId);case 3:return r=n.sent,o=r.substring(r.lastIndexOf(".")),n.next=7,this.comm.getMimeType(o);case 7:""!=(i=n.sent)?this.fileOpener.showOpenWithDialog(r,i):this.comm.presentToast("\u8be5\u6587\u4ef6\u65e0\u6cd5\u6253\u5f00\uff01");case 9:case"end":return n.stop()}}),n,this)})))}},{key:"pickDoc",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.router.navigate(["resource/resource-detail",{id:e.libraryId}]);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"initComment",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.the_comment_filter=new u.d,this.the_comment_filter.contentId=this.the_record.id,e.next=4,this.loadCommentData();case 4:this.the_comment_list=e.sent;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"loadCommentData",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lpsrv.get_syllabus_comment_list(this.the_comment_filter,this.the_token);case 2:if(0!=(t=e.sent).code){e.next=14;break}n=0;case 5:if(!(n<t.data.length)){e.next=13;break}return r=t.data[n],e.next=9,this.formatComment(r);case 9:r.comments=e.sent;case 10:n++,e.next=5;break;case 13:return e.abrupt("return",(t.data.forEach((function(e){""!=e.avatar&&null!=e.avatar||(e.avatar=x.a.default_avatar),e.comments&&(e.comments.forEach((function(e){""!=e.avatar&&null!=e.avatar||(e.avatar=x.a.default_avatar)})),e.comments.length>5?(e.showMore=!0,e.comments.forEach((function(e,t){e.show=!(t>=5)}))):e.comments.forEach((function(e){return e.show=!0})),e.comments=e.comments.sort((function(e,t){return new Date(e.createTime).getTime()-new Date(t.createTime).getTime()})))})),this.the_comment_total=t.count,t.data));case 14:case"end":return e.stop()}}),e,this)})))}},{key:"moreComment",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.the_comment_filter.PageIndex+=1,e.t0=this.the_comment_list,e.next=4,this.loadCommentData();case 4:e.t1=e.sent,this.the_comment_list=e.t0.concat.call(e.t0,e.t1);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"formatComment",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!(e.comments&&e.comments.length>0)){t.next=10;break}n=e.comments,r=regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((o=e.comments[r]).comments&&o.comments.length>0)){t.next=6;break}return t.next=4,a.formatComment(o);case 4:(i=t.sent).forEach((function(e){return e.replyTeacherName=o.teacherName})),n=n.concat(i);case 6:case"end":return t.stop()}}),t)})),o=0;case 5:if(!(o<e.comments.length)){t.next=10;break}return t.delegateYield(r(o),"t0",7);case 7:o++,t.next=5;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)})))}},{key:"reply",value:function(e){this.the_comment_submit.parentId=e.id,this.the_place_holder="@"+e.teacherName+":",this.comment_content.setFocus()}},{key:"load_child_more",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=1|e.showIndex,n+=1,e.comments.filter((function(e){return 1!=e.show})).forEach((function(e,t){e.show=t<5*n})),e.showMore=e.comments.filter((function(e){return 1!=e.show})).length>0;case 2:case"end":return t.stop()}}),t)})))}},{key:"create_comment",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.the_comment_submit.contentId=this.the_record.id,this.the_comment_submit.content&&""!=this.the_comment_submit.content){e.next=2;break}return e.abrupt("return",void this.comm.presentToast("\u8bf7\u8f93\u5165\u8bc4\u8bba\uff01"));case 2:return this.isConfirmLoading=!0,e.next=5,this.lpsrv.create_comment(this.the_comment_submit,this.the_token);case 5:if(0==(t=e.sent).code){e.next=8;break}return e.abrupt("return",(this.isConfirmLoading=!1,void this.comm.presentToast(t.msg)));case 8:return this.isConfirmLoading=!1,this.the_comment_submit=new u.e,this.the_place_holder="\u8bf7\u8f93\u5165\u8bc4\u8bba\u7684\u5185\u5bb9",e.next=13,this.initComment();case 13:case"end":return e.stop()}}),e,this)})))}},{key:"delete",value:function(e,t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.comm.presentAlertConfirm("\u6e29\u99a8\u63d0\u793a","\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u8bc4\u8bba\u5417\uff1f",[{text:"\u53d6\u6d88",role:"cancel",hanlder:function(){}},{text:"\u786e\u5b9a",handler:function(){return Object(c.a)(r,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.lpsrv.delete_comment(e.id,this.the_token);case 2:0==(r=n.sent).code?t?t.comments.splice(t.comments.findIndex((function(t){return t.id==e.id})),1):(this.the_comment_list.splice(this.the_comment_list.findIndex((function(t){return t.id==e.id})),1),this.the_comment_total-=1):this.comm.presentToast(r.msg);case 4:case"end":return n.stop()}}),n,this)})))}}]);case 1:case"end":return n.stop()}}),n,this)})))}}]),e}(),ce.\u0275fac=function(e){return new(e||ce)(s["\u0275\u0275directiveInject"](a.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](s.ComponentFactoryResolver),s["\u0275\u0275directiveInject"](f.a),s["\u0275\u0275directiveInject"](g.a),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](v.a),s["\u0275\u0275directiveInject"](h.a),s["\u0275\u0275directiveInject"](w.a),s["\u0275\u0275directiveInject"](y.a),s["\u0275\u0275directiveInject"](i.Platform),s["\u0275\u0275directiveInject"](l.a),s["\u0275\u0275directiveInject"](a.g))},ce.\u0275cmp=s["\u0275\u0275defineComponent"]({type:ce,selectors:[["app-syllabus-view"]],viewQuery:function(e,t){var n;1&e&&(s["\u0275\u0275viewQuery"](S,!0,s.ViewContainerRef),s["\u0275\u0275viewQuery"](O,!0)),2&e&&(s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.formContainer=n.first),s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.comment_content=n.first))},decls:8,vars:2,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","tabs"],[4,"ngIf"],["class","ion-no-border",4,"ngIf"],[1,"bgfff"],["previewBody",""],[1,"bgfff","padding-20"],["size","2"],[1,"avatar"],[1,"avatar-image",3,"src"],["size","10",1,"padding-left-20"],[1,"font-20","color-000","text-hidden-2"],["size","2",1,"text-center"],[1,"color-000","font-16"],[1,"font-18","color-8f92a1"],["class","mt30",4,"ngIf"],["color","blues","mode","md","slot","start",3,"value"],[3,"value","click"],[1,"bolder-sm"],[3,"value","click",4,"ngIf"],["class","padding-top-bottom-20 line-height-24",4,"ngIf"],[3,"src"],[1,"mt30"],[1,"font-20","color-1d1d1f","b-600","display-block"],[1,"ml20","font-18","color-7d90aa"],[1,"right","font-18","color-blue",3,"click"],[1,"video-panel"],[1,"video-row",3,"ngStyle"],["class","video-box",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"video-box",3,"ngClass","click"],["class","mark",4,"ngIf"],[1,"mark"],[1,"padding-top-bottom-20","line-height-24"],["class","bgfff mt20",4,"ngIf"],[1,"bgfff","padding-top-bottom-20"],[1,"b","font-20","color-1d1d1f"],[3,"nzAuthor","nzDatetime",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"bgfff","mt20"],["lines","none"],["slot","start",1,"avatar"],[1,"reply-input",3,"ngModel","placeholder","ngModelChange"],["comment_content",""],["size","default",3,"click"],[3,"nzAuthor","nzDatetime"],["nz-comment-avatar","",3,"nzSrc"],["class","mr10 color-999 font-14",3,"click",4,"ngIf"],["class","mr10 color-999 font-16",3,"click",4,"ngIf"],[1,"mr10","color-999","font-14",3,"click"],[1,"mr10","color-999","font-16",3,"click"],[4,"ngFor","ngForOf"],["class","font-16 color-blue",3,"click",4,"ngIf"],[3,"nzAuthor","nzDatetime",4,"ngIf"],[1,"color-blue"],[1,"font-16","color-blue",3,"click"],[1,"text-center"],[1,"more-comment",3,"click"],["size","2.5"],[1,"resource-type-list"],["size","9.5",1,"bgfff","padding-left-right-10"],[3,"show","loading"],["class","resource-box",3,"click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"resource-box",3,"click"],["aria-hidden","true",1,"list-icon"],[1,"color-1d1d1f","font-20"],[1,"font-16","color-1d1d1f"],[1,"font-16","color-999","right"],["size","default",3,"click",4,"ngIf"],[2,"height","1rem","background","#f5f6fa !important"],["class","color-blue font-20 ",3,"click",4,"ngIf"],["class","color-blue font-20",3,"click",4,"ngIf"],[1,"color-blue","font-20",3,"click"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"ion-header",0),s["\u0275\u0275elementStart"](1,"ion-toolbar"),s["\u0275\u0275elementStart"](2,"ion-buttons",1),s["\u0275\u0275element"](3,"ion-back-button",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"ion-title"),s["\u0275\u0275text"](5,"\u8bfe\u7a0b\u5185\u5bb9"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](6,ne,40,16,"ion-content",3),s["\u0275\u0275template"](7,ae,5,2,"ion-footer",4)),2&e&&(s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngIf",t.the_record),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.the_video.length>0))},directives:[i.IonHeader,i.IonToolbar,i.IonButtons,i.IonBackButton,i.IonBackButtonDelegate,i.IonTitle,r.NgIf,i.IonContent,i.IonGrid,i.IonRow,i.IonCol,i.IonThumbnail,i.IonSegment,i.SelectValueAccessor,i.IonSegmentButton,i.IonLabel,_.a,r.NgStyle,r.NgForOf,r.NgClass,i.IonItem,i.IonInput,i.TextValueAccessor,o.NgControlStatus,o.NgModel,i.IonButton,C.c,k.a,C.b,C.d,C.a,I.a,i.IonList,i.IonFooter],styles:["ion-grid[_ngcontent-%COMP%]{--ion-grid-padding:0}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0}.video-panel[_ngcontent-%COMP%]{position:relative;height:6rem;padding:1rem 0 0;overflow-x:auto;overflow-y:hidden}.video-panel[_ngcontent-%COMP%], .video-panel[_ngcontent-%COMP%]   .video-row[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;overflow:-moz-scrollbars-none}.video-panel[_ngcontent-%COMP%]   .video-row[_ngcontent-%COMP%]{position:absolute;left:0}.video-panel[_ngcontent-%COMP%]::-webkit-scrollbar, .video-row[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.video-box[_ngcontent-%COMP%]{width:6.5rem;border-radius:5px;background:#fff;border:1px solid #e3e3e3;padding:.5rem;float:left;margin-right:1rem}.video-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;font-size:.8rem;display:block;height:3rem;width:100%;word-break:break-all;overflow:hidden}.video-box.active[_ngcontent-%COMP%]{background:#f8faff;border:1px solid #86bdff}.video-box.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1982ff;font-weight:600}.video-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]{width:8px;height:8px;background:#1982ff;border-radius:50%;display:inline-block;margin-right:.5rem}ion-segment-button[_ngcontent-%COMP%]{--border-width:0px;min-width:4rem;--indicator-height:0rem;font-weight:900;--padding-start:20px;--padding-end:20px}.segment_width[_ngcontent-%COMP%]{min-width:6rem!important}.segment-button-checked[_ngcontent-%COMP%]   .bolder-sm[_ngcontent-%COMP%]{border:1px solid #1982ff;width:1rem;margin:0 auto}ion-item[_ngcontent-%COMP%]{--padding-start:0}.ant-comment-content-author[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .ant-comment-content-author[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{font-size:.8rem!important}.resource-type-list[_ngcontent-%COMP%]{width:100%;overflow:hidden;margin:0;padding:0}.resource-type-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:table;width:100%}.resource-type-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:table-cell;vertical-align:middle;height:3rem;font-size:.9rem;text-align:center;padding:0 .4rem;color:#1d1d1f}.resource-type-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#1982ff;background:#fff}.resource-box[_ngcontent-%COMP%]{margin-bottom:1rem;--padding-start:0.5rem;--padding-end:0rem;border:1px solid #e3e3e3;opacity:1;border-radius:5px}.resource-box[_ngcontent-%COMP%]   .list-icon[_ngcontent-%COMP%]{width:3em;height:3em;vertical-align:-.5em;fill:currentColor;overflow:hidden;margin-right:1rem}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:#fff!important;text-align:center}.reply-input[_ngcontent-%COMP%]{--padding-start:1rem!important;border:1px solid #d9d9d9;margin-left:1rem;border-radius:5px;margin-right:1rem}"]}),ce)},{path:"switch-video",loadChildren:function(){return n.e(204).then(n.bind(null,"W9iH")).then((function(e){return e.SwitchVideoPageModule}))}}],me=((se=function e(){_classCallCheck(this,e)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:se}),se.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||se)},imports:[[a.i.forChild(le)],a.i]}),se),de=n("Ql/B"),ue=n("FwiY");n.d(t,"SyllabusViewPageModule",(function(){return fe}));var he,fe=((he=function e(){_classCallCheck(this,e)}).\u0275mod=s["\u0275\u0275defineNgModule"]({type:he}),he.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||he)},imports:[[r.CommonModule,o.FormsModule,i.IonicModule,ue.b,C.e,k.b,me,de.a]]}),he)},"w+1N":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("mrSG"),o=n("fXoL"),i=n("TEn/"),a=n("ofXK");function c(e,t){1&e&&o["\u0275\u0275element"](0,"span",11)}var s=function(e){return{active:e}};function l(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"li",8),o["\u0275\u0275elementStart"](1,"a",9),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit,r=t.index;return o["\u0275\u0275nextContext"]().swipeVideo(e,r)})),o["\u0275\u0275template"](2,c,1,0,"span",10),o["\u0275\u0275text"](3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngClass",o["\u0275\u0275pureFunction1"](3,s,!0===r.selected)),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",!0===r.selected),o["\u0275\u0275advance"](1),o["\u0275\u0275textInterpolate"](r.name)}}var m=function(){var e=function(){function e(t){_classCallCheck(this,e),this.modalController=t,this.list=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.modalController.dismiss()}},{key:"swipeVideo",value:function(e,t){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:!0!==e.selected&&this.modalController.dismiss({data:e,index:t});case 1:case"end":return n.stop()}}),n,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.ModalController))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-switch-video"]],inputs:{list:"list"},decls:13,vars:1,consts:[[1,"ion-no-border"],["slot","start"],[1,"color-blue",3,"click"],["name","chevron-back-outline",1,"color-blue"],[1,"padding-20"],[1,"b","font-20","color-1d1d1f"],[1,"bgfff","padding-20"],["class"," video-box padding-top-bottom-10",4,"ngFor","ngForOf"],[1,"video-box","padding-top-bottom-10"],[3,"ngClass","click"],["class","mark",4,"ngIf"],[1,"mark"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ion-header",0),o["\u0275\u0275elementStart"](1,"ion-toolbar"),o["\u0275\u0275elementStart"](2,"ion-buttons",1),o["\u0275\u0275elementStart"](3,"ion-button",2),o["\u0275\u0275listener"]("click",(function(){return t.close()})),o["\u0275\u0275element"](4,"ion-icon",3),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ion-title"),o["\u0275\u0275text"](6,"\u8bf7\u9009\u62e9\u89c6\u9891\u9009\u96c6"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"ion-content"),o["\u0275\u0275elementStart"](8,"div",4),o["\u0275\u0275elementStart"](9,"a",5),o["\u0275\u0275text"](10,"\u89c6\u9891\u9009\u96c6"),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](11,"ul",6),o["\u0275\u0275template"](12,l,4,5,"li",7),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](12),o["\u0275\u0275property"]("ngForOf",t.list))},directives:[i.IonHeader,i.IonToolbar,i.IonButtons,i.IonButton,i.IonIcon,i.IonTitle,i.IonContent,a.NgForOf,a.NgClass,a.NgIf],styles:["ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}.video-box[_ngcontent-%COMP%]{border-bottom:1px dashed #e4e4e4}.video-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1d1d1f;font-size:.8rem;width:100%;word-break:break-all;overflow:hidden;padding-left:.99rem}.video-box[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:#1982ff;font-weight:600;padding-left:0}.video-box[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   .mark[_ngcontent-%COMP%]{width:8px;height:8px;background:#1982ff;border-radius:50%;display:inline-block;margin-right:.5rem}"]}),e}()}}]);