function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{gYr8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return c}));var r=n("PyTI"),i=function e(){_classCallCheck(this,e),this.famlies=[],this.gradeid=this.grade?this.grade.serialNo:""},a=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.apply(this,arguments)).avatarsize="120",e}return n}(r.a),s=function e(){_classCallCheck(this,e),this.dszybz=!1},o=function e(){_classCallCheck(this,e)},c=function e(){_classCallCheck(this,e)}},h2Q0:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("mrSG"),i=n("B7Rs"),a=n("FAH8"),s=n("LWQN"),o=n("AytR"),c=n("WOgW"),u=n("vZKB"),l=n("fXoL"),f=n("TEn/"),h=function(){var e=function(){function e(t,n,r,i,a,s){_classCallCheck(this,e),this.transfer=t,this.file=n,this.platform=r,this.comm=i,this.androidPermissions=a,this.openNativeSettings=s,this.fileTransfer=this.transfer.create()}return _createClass(e,[{key:"getCover",value:function(e){var t="yuwen";switch(e){case"\u8bed\u6587":t="yuwen";break;case"\u6570\u5b66":t="shuxue";break;case"\u73ed\u4f1a":t="banhui";break;case"\u521b\u65b0":t="chuangxin";break;case"\u9053\u5fb7\u4e0e\u6cd5\u5236":t="daodeyufazhi";break;case"\u5bfc\u5e08\u73ed":t="daoshiban";break;case"\u5bfc\u5e08\u8bfe":t="daoshike";break;case"\u5bfc\u5e08\u81ea\u4e60\u8bfe":t="daoshizixike";break;case"\u5730\u7406":t="dili";break;case"\u5316\u5b66":t="huaxue";break;case"\u6280\u672f":t="jishu";break;case"\u79d1\u521b/\u52b3\u6280":t="kechuanglaoji";break;case"\u5386\u53f2":t="lishi";break;case"\u793c\u4eea":t="liyi";break;case"\u7f8e\u672f":t="meishu";break;case"\u751f\u7269":t="shengwu";break;case"\u751f\u6daf\u6559\u80b2\u804c\u4e1a\u4f53\u9a8c\u5355\u4f4d":t="shengyajiaoyuzhiyetiyandanwei";break;case"\u793e\u56e2":t="shetuan";break;case"\u4e66\u6cd5":t="shufa";break;case"\u601d\u54c1":case"\u601d\u60f3\u54c1\u5fb7":t="sipin";break;case"\u4f53\u953b":t="tiduan";break;case"\u4f53\u80b2":t="tiyu";break;case"\u901a\u7528\u6280\u672f":t="tongyongjishu";break;case"\u5916\u6559":t="waijiao";break;case"\u665a\u81ea\u4e60":t="wanzixi";break;case"\u7269\u7406":t="wuli";break;case"\u6821\u672c":t="xiaoben";break;case"\u6821\u672c\u9009\u4fee":t="xiaobenxuanxiu";break;case"\u5fc3\u7406":t="xinli";break;case"\u4fe1\u606f\u6280\u672f":t="xinxijishu";break;case"\u9009\u4fee\uff08\u8bed\uff09":t="xuanxiuyu";break;case"\u7814\u7a76\u6027\u5b66\u4e60":t="yanjiuxingxuexi";break;case"\u82f1\u8bed":t="yingyu";break;case"\u97f3\u4e50":t="yinyue";break;case"\u827a\u672f":t="yishu";break;case"\u8bed\u6587\uff08\u9009\uff09":t="yuwenxuan";break;case"\u653f\u6cbb":t="zhengzhi";break;case"\u81ea\u4e60":t="zixi"}return"assets/images/subject/"+t+".png"}},{key:"getYear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=(new Date).getFullYear(),r=[],i=n-9;i<=n+1;i++)r.push({id:i.toString(),name:i+"\u5e74",selected:n==i&&e,hasChild:!1,child:null,catalogs:null,level:0});return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))}},{key:"downLoad",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"szymr",i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function r(){var l,f=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l="",n||(n=o.a.root_directory),1==this.platform.is("ios")){r.next=10;break}return r.next=5,this.file.createDir(this.file.dataDirectory,n,!0);case 5:r.t1=r.sent.toURL(),r.t2=t,r.t0=r.t1+r.t2,r.next=11;break;case 10:r.t0=this.file.documentsDirectory+t;case 11:l=r.t0,a&&a(),this.fileTransfer=this.transfer.create(),u&&(this.fileTransfer.onProgress=function(e){u(e)}),this.fileTransfer.download(e,l,!1,{headers:{Authorization:"Bearer "+i}}).then((function(e){s&&s(e)})).catch((function(e){switch(e.code){case 1:f.comm.presentToast("\u6587\u4ef6\u4e0d\u5b58\u5728\uff01");break;case 2:f.comm.presentToast("\u4e0b\u8f7d\u5730\u5740\u9519\u8bef\uff01");break;case 3:f.comm.presentToast("\u7f51\u7edc\u8fde\u63a5\u9519\u8bef\uff01");break;case 4:f.comm.presentToast("\u624b\u52a8\u7ec8\u6b62\u4e86\u4e0b\u8f7d\uff01");break;case 5:f.comm.presentToast("\u6ca1\u6709\u6743\u9650\uff01")}c&&c(e)}));case 16:case"end":return r.stop()}}),r,this)})))}},{key:"checkPermission",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.androidPermissions.checkPermission(this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE);case 3:return t=e.sent,e.abrupt("return",(1!=t.hasPermission&&this.comm.presentAlertConfirm("\u6743\u9650\u63d0\u793a","\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\u4e0d\u5141\u8bb8\u5b58\u50a8\u4e0e\u8bbf\u95ee\u6240\u6709\u7c7b\u578b\u6587\u4ef6\uff0c\u8bf7\u8fdb\u5165\u7cfb\u7edf\u8bbe\u7f6e\u4e2d\uff0c\u5f00\u542f\u5b58\u50a8\u7a7a\u95f4\uff01",[{text:"\u4e0b\u6b21\u8bbe\u7f6e"},{text:"\u597d\u7684\uff0c\u53bb\u8bbe\u7f6e",handler:function(e){return Object(r.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openNativeSettings.open("application_details");case 2:case"end":return e.stop()}}),e,this)})))}}]),t.hasPermission));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getMessageFrom",value:function(e){var t=[];return"notice"==e&&(t.push({edit:!1,id:"1",value:1,name:"\u5fb7\u80b2",selected:!1}),t.push({edit:!1,id:"2",value:2,name:"\u8bf7\u5047",selected:!1}),t.push({edit:!1,id:"3",value:3,name:"\u7efc\u5408\u7d20\u8d28",selected:!1}),t.push({edit:!1,id:"4",value:4,name:"\u5bbf\u820d\u8003\u8bc4",selected:!1}),t.push({edit:!1,id:"5",value:5,name:"\u8c03\u8bfe",selected:!1}),t.push({edit:!1,id:"6",value:6,name:"\u7814\u7a76\u6027\u5b66\u4e60",selected:!1}),t.push({edit:!1,id:"8",value:7,name:"\u529f\u80fd\u5ba4",selected:!1}),t.push({edit:!1,id:"8",value:8,name:"\u5f02\u5e38\u5f52\u5bdd",selected:!1})),"todo"==e&&(t.push({edit:!1,id:"2",value:2,name:"\u8bf7\u5047",selected:!1}),t.push({edit:!1,id:"3",value:3,name:"\u7efc\u5408\u7d20\u8d28",selected:!1}),t.push({edit:!1,id:"8",value:7,name:"\u529f\u80fd\u5ba4",selected:!1})),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275inject"](i.a),l["\u0275\u0275inject"](a.a),l["\u0275\u0275inject"](f.Platform),l["\u0275\u0275inject"](s.a),l["\u0275\u0275inject"](c.a),l["\u0275\u0275inject"](u.a))},e.\u0275prov=l["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"xm+r":function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),o=n("mrSG"),c=n("gYr8"),u=n("26ZW"),l=n("AytR"),f=n("B7Rs"),h=n("FAH8"),d=n("qXBG"),p=n("h2Q0"),m=n("LWQN"),v=n("te5A"),b=n("fXoL"),k=n("j/sa");function g(e,t){if(1&e){var n=b["\u0275\u0275getCurrentView"]();b["\u0275\u0275elementStart"](0,"app-list-students",7),b["\u0275\u0275listener"]("selected",(function(e){return b["\u0275\u0275restoreView"](n),b["\u0275\u0275nextContext"](2).pick(e)})),b["\u0275\u0275elementEnd"]()}if(2&e){var r=b["\u0275\u0275nextContext"](2);b["\u0275\u0275property"]("filter",r.the_filter)("singleTitle",r.the_filter.klass)}}function y(e,t){if(1&e&&(b["\u0275\u0275elementStart"](0,"ion-content"),b["\u0275\u0275template"](1,g,1,2,"app-list-students",6),b["\u0275\u0275elementEnd"]()),2&e){var n=b["\u0275\u0275nextContext"]();b["\u0275\u0275advance"](1),b["\u0275\u0275property"]("ngIf",n.the_filter)}}var _,x,w=[{path:"",component:(_=function(){function e(t,n,r,i,a,s,o,u,l,f){var h=this;_classCallCheck(this,e),this.osrv=t,this.route=n,this.router=r,this.transfer=i,this.file=a,this.platform=s,this.auth=o,this.utility=u,this.fileOpener=l,this.comm=f,this.the_filter=new c.c,this.fileTransfer=this.transfer.create(),this.the_filter.PageSize=30,this.route.paramMap.subscribe((function(e){e.has("classId")&&(h.the_filter.klassid=e.get("classId")),e.has("teachclassId")&&(h.the_filter.teachclassid=e.get("teachclassId")),h.the_filter.klass=e.get("name")}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"pick",value:function(e){e.length>0&&this.router.navigate(["/features/students/display-student",{id:e[0].id}])}},{key:"down",value:function(){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t="",n="",n=this.the_filter.teachclassid?encodeURI(l.a.ym_endpoint+l.a.schedule_flow+"/Export/TeachClassStudent/"+this.the_filter.teachclassid):encodeURI(l.a.ym_endpoint+l.a.student_roll+"/Student/ExportClassStudent/"+this.the_filter.klassid),1==this.platform.is("ios")){e.next=14;break}return e.next=5,this.utility.checkPermission();case 5:if(e.t0=e.sent,1==e.t0){e.next=8;break}return e.abrupt("return",void this.comm.presentToast("\u4f60\u672a\u540c\u610f\u5728\u624b\u673a\u4e2d\u5b58\u50a8\u6587\u4ef6\uff0c\u65e0\u6cd5\u4e0b\u8f7d\uff01"));case 8:return e.next=10,this.file.createDir(this.file.dataDirectory,l.a.root_directory+"/klass",!0);case 10:e.t1=e.sent.toURL(),t=e.t1+"\u73ed\u7ea7\u82b1\u540d\u518c.xls",e.next=15;break;case 14:t=this.file.documentsDirectory+"\u73ed\u7ea7\u82b1\u540d\u518c.xls";case 15:return e.next=17,this.auth.get_token();case 17:r=e.sent,this.comm.loadingPresent("\u6b63\u5728\u4e0b\u8f7d\u82b1\u540d\u518c....."),this.fileTransfer.download(n,t,!1,{headers:{Authorization:"Bearer "+r}}).then((function(e){i.comm.loadingDismiss(),i.comm.presentAlertConfirm("\u6e29\u99a8\u63d0\u793a","\u82b1\u540d\u518c\u4e0b\u8f7d\u6210\u529f\uff01\u662f\u5426\u9a6c\u4e0a\u6253\u5f00\uff1f",[{text:"\u4e0d\u4e86",handler:function(){}},{text:"\u9a6c\u4e0a\u6253\u5f00",handler:function(){i.fileOpener.showOpenWithDialog(e.nativeURL,"application/vnd.ms-excel")}}])})).catch((function(e){i.comm.presentToast("\u4e0b\u8f7d\u5931\u8d25\uff01"+JSON.stringify(e))})),e.next=24;break;case 21:e.prev=21,e.t2=e.catch(0),this.comm.presentToast("\u4e0b\u8f7d\u5931\u8d25,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\uff01"+JSON.stringify(e.t2));case 24:case"end":return e.stop()}}),e,this,[[0,21]])})))}}]),e}(),_.\u0275fac=function(e){return new(e||_)(b["\u0275\u0275directiveInject"](u.a),b["\u0275\u0275directiveInject"](s.a),b["\u0275\u0275directiveInject"](s.g),b["\u0275\u0275directiveInject"](f.a),b["\u0275\u0275directiveInject"](h.a),b["\u0275\u0275directiveInject"](a.Platform),b["\u0275\u0275directiveInject"](d.a),b["\u0275\u0275directiveInject"](p.a),b["\u0275\u0275directiveInject"](v.a),b["\u0275\u0275directiveInject"](m.a))},_.\u0275cmp=b["\u0275\u0275defineComponent"]({type:_,selectors:[["app-klass-students"]],decls:10,vars:1,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","tabs"],["slot","end"],[3,"click"],[4,"ngIf"],["selection_mode","single",3,"filter","singleTitle","selected",4,"ngIf"],["selection_mode","single",3,"filter","singleTitle","selected"]],template:function(e,t){1&e&&(b["\u0275\u0275elementStart"](0,"ion-header",0),b["\u0275\u0275elementStart"](1,"ion-toolbar"),b["\u0275\u0275elementStart"](2,"ion-buttons",1),b["\u0275\u0275element"](3,"ion-back-button",2),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](4,"ion-title"),b["\u0275\u0275text"](5,"\u5b66\u751f"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementStart"](6,"ion-buttons",3),b["\u0275\u0275elementStart"](7,"ion-button",4),b["\u0275\u0275listener"]("click",(function(){return t.down()})),b["\u0275\u0275text"](8,"\u4e0b\u8f7d\u82b1\u540d\u518c"),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275elementEnd"](),b["\u0275\u0275template"](9,y,2,1,"ion-content",5)),2&e&&(b["\u0275\u0275advance"](9),b["\u0275\u0275property"]("ngIf",t.the_filter))},directives:[a.IonHeader,a.IonToolbar,a.IonButtons,a.IonBackButton,a.IonBackButtonDelegate,a.IonTitle,a.IonButton,r.NgIf,a.IonContent,k.a],styles:[""]}),_)}],j=((x=function e(){_classCallCheck(this,e)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:x}),x.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||x)},imports:[[s.i.forChild(w)],s.i]}),x),C=n("Ql/B");n.d(t,"KlassStudentsPageModule",(function(){return P}));var I,P=((I=function e(){_classCallCheck(this,e)}).\u0275mod=b["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=b["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[r.CommonModule,i.FormsModule,a.IonicModule,j,C.a]]}),I)}}]);