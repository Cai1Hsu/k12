function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{uRIx:function(e,t,n){"use strict";n.r(t);var r,i,a=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),c=n("tyNb"),u=n("mrSG"),l=n("BLr9"),d=n("Cfvw"),m=n("LWQN"),f=n("jHbz"),h=n("uW3d"),p=n("fXoL"),g=[{path:"",component:(r=function(){function e(t,n,r,i,a){_classCallCheck(this,e),this.audio=t,this.qrScanner=n,this.csrv=r,this.router=i,this.comm=a}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.qrScanner.pausePreview(),this.qrScanner.destroy()}},{key:"ngOnInit",value:function(){this.init()}},{key:"close",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:history.back();case 1:case"end":return e.stop()}}),e)})))}},{key:"init",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.audio.preload("scanbeep","assets/sounds/qr_code_beep.mp3"),e.next=3,this.qrScanner.prepare();case 3:if(e.t0=e.sent.authorized,e.t1=1==e.t0,!e.t1){e.next=8;break}return e.next=8,this.startScanner();case 8:case"end":return e.stop()}}),e,this)})))}},{key:"startScanner",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.qrScanner.show();case 2:return e.next=4,this.qrScanner.resumePreview();case 4:document.getElementById("scanner-image").style.display="block",window.document.querySelector("html").classList.add("cameraView"),this.the_scanSub=this.qrScanner.scan().subscribe((function(e){t.audio.play("scanbeep"),Object(d.a)(t.initData(e))}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"stopScanner",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("scanner-image").style.display="none",window.document.querySelector("html").classList.remove("cameraView"),this.the_scanSub.unsubscribe(),e.next=5,this.qrScanner.hide();case 5:return e.next=7,this.qrScanner.pausePreview();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"initData",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.stopScanner();case 2:return t.next=4,this.comm.loadingPresent();case 4:return t.next=6,this.csrv.valid_capital_qrcode(e);case 6:return n=t.sent,t.next=9,this.comm.loadingDismiss();case 9:if(0!=n.code){t.next=15;break}if(n.data){t.next=12;break}return t.abrupt("return",(this.the_qrcode=e,void(document.getElementById("message").style.display="block")));case 12:document.getElementById("message").style.display="none",this.the_id=n.data,setTimeout((function(){document.getElementById("btnShow").click()}),500),t.next=16;break;case 15:this.comm.presentToast(n.msg);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"show",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["features/capital/list/detail",{id:this.the_id}],{replaceUrl:!0});case 1:case"end":return e.stop()}}),e,this)})))}},{key:"add",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.router.navigate(["features/capital/list/create",{qrcode:this.the_qrcode}],{replaceUrl:!0});case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),r.\u0275fac=function(e){return new(e||r)(p["\u0275\u0275directiveInject"](f.a),p["\u0275\u0275directiveInject"](l.a),p["\u0275\u0275directiveInject"](h.a),p["\u0275\u0275directiveInject"](c.g),p["\u0275\u0275directiveInject"](m.a))},r.\u0275cmp=p["\u0275\u0275defineComponent"]({type:r,selectors:[["app-scanner"]],decls:19,vars:0,consts:[[1,"ion-no-border"],["slot","start"],["defaultHref","tabs"],["id","scanner-image",1,"scanner-image",2,"display","none"],["src","assets/images/scanner.gif"],[1,"title"],["id","message",1,"message",2,"display","none"],[1,"add",3,"click"],["id","btnShow",2,"display","none",3,"click"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar"),p["\u0275\u0275elementStart"](2,"ion-buttons",1),p["\u0275\u0275element"](3,"ion-back-button",2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ion-title"),p["\u0275\u0275text"](5,"\u626b\u63cf\u4e8c\u7ef4\u7801"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"ion-content"),p["\u0275\u0275elementStart"](7,"div",3),p["\u0275\u0275element"](8,"img",4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"div",5),p["\u0275\u0275text"](10,"\u626b\u63cf\u4e8c\u7ef4\u7801"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"div",6),p["\u0275\u0275elementStart"](12,"p"),p["\u0275\u0275text"](13," \u672a\u67e5\u8be2\u5230\u8be5\u8d44\u4ea7\u4fe1\u606f\uff0c\u662f\u5426"),p["\u0275\u0275element"](14,"br"),p["\u0275\u0275elementStart"](15,"a",7),p["\u0275\u0275listener"]("click",(function(){return t.add()})),p["\u0275\u0275text"](16,"\u767b\u8bb0\u4e3a\u65b0\u8d44\u4ea7"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275text"](17,"? "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](18,"a",8),p["\u0275\u0275listener"]("click",(function(){return t.show()})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]())},directives:[s.IonHeader,s.IonToolbar,s.IonButtons,s.IonBackButton,s.IonBackButtonDelegate,s.IonTitle,s.IonContent],styles:[".cameraView[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]{--background:rgba(0,0,0,0.35)!important;background:rgba(0,0,0,.35)!important}.close[_ngcontent-%COMP%]{top:1rem;left:1rem;font-size:1.5rem}.close[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{position:absolute;color:#fff}.title[_ngcontent-%COMP%]{text-align:center;width:100%;font-size:.9rem;bottom:30%}.scanner-image[_ngcontent-%COMP%]{position:absolute;width:80%;left:5%;transform:translate(5%)}.message[_ngcontent-%COMP%]{position:absolute;text-align:center;width:100%;color:#fff;font-size:.9rem;bottom:10%}.message[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{color:#ffdc64;font-size:1.2rem;text-decoration:underline}.message[_ngcontent-%COMP%]   .choose[_ngcontent-%COMP%]{width:40px;height:40px;background:#000;border-radius:50%;opacity:.5;display:inline-block;color:#fff;line-height:44px;font-size:1.2rem}"]}),r)}],v=((i=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:i}),i.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||i)},imports:[[c.i.forChild(g)],c.i]}),i),b=n("Ql/B");n.d(t,"ScannerPageModule",(function(){return y}));var w,y=((w=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:w}),w.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||w)},imports:[[a.CommonModule,o.FormsModule,s.IonicModule,v,b.a]]}),w)}}]);