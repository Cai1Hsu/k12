function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{"z0x/":function(e,t,n){"use strict";n.r(t);var o,r,s=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),d=n("tyNb"),c=n("mrSG"),l=n("ed2z"),m=n("LWQN"),u=n("jMEw"),p=n("fXoL"),h=[{path:"",component:(o=function(){function e(t,n,o,r){_classCallCheck(this,e),this.common=t,this.ymsrv=n,this.router=o,this.route=r,this.the_model=new l.a,this.second=0,this.secondText="\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.paramMap.subscribe((function(t){e.userId=t.get("userid"),e.token=t.get("token")}))}},{key:"sendSms",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.second){e.next=38;break}if(""==this.the_model.phone||null==this.the_model.phone){e.next=37;break}if(!/^1(3|4|5|6|7|8|9)\d{9}$/.test(this.the_model.phone)){e.next=34;break}return e.next=5,this.common.loadingPresent("\u6b63\u5728\u53d1\u9001\u77ed\u4fe1......");case 5:return t=e.sent,e.prev=6,e.next=9,this.ymsrv.existsPhoneUser(this.userId,this.the_model.phone,this.token);case 9:if(e.t0=e.sent.code,0!=e.t0){e.next=12;break}return e.abrupt("return",void this.common.presentToast("\u624b\u673a\u53f7\u7801\uff1a"+this.the_model.phone+"\u5df2\u88ab\u5176\u4ed6\u8d26\u53f7\u4f7f\u7528\uff01"));case 12:return e.next=14,this.ymsrv.sendSms(this.the_model.phone,this.token);case 14:if(0!=(n=e.sent).code){e.next=23;break}return this.second=60,e.next=19,this.common.presentAlert("\u6e29\u99a8\u63d0\u793a",null,"\u77ed\u4fe1\u9a8c\u8bc1\u7801\u5df2\u81f3\u8be5\u624b\u673a\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536\uff0c\u82e5\u957f\u65f6\u95f4\u672a\u6536\u5230\u9a8c\u8bc1\u7801\uff0c\u8bf7\u81f3\u201c\u5df2\u62e6\u622a\u77ed\u4fe1\u5217\u8868\u201d\u4e2d\u786e\u8ba4",["\u597d\u7684"]);case 19:this.secondText="\u91cd\u65b0\u53d1\u9001 "+this.second,o=setInterval((function(){r.secondText="\u91cd\u65b0\u53d1\u9001 "+--r.second,0==r.second&&(r.secondText="\u91cd\u65b0\u53d1\u9001",clearInterval(o))}),1e3),e.next=24;break;case 23:this.common.presentToast(n.msg);case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(6),console.log(e.t1);case 29:return e.prev=29,t.dismiss(),e.finish(29);case 32:e.next=35;break;case 34:this.common.presentToast("\u624b\u673a\u53f7\u7801\u6709\u8bef\uff0c\u8bf7\u91cd\u586b");case 35:e.next=38;break;case 37:this.common.presentToast("\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7\u7801\uff01");case 38:case"end":return e.stop()}}),e,this,[[6,26,29,32]])})))}},{key:"bindUser",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,r,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(new RegExp("(?=.*[0-9])(?=.*[a-zA-Z]).{6,30}").test(this.the_model.passWord)){e.next=2;break}return e.abrupt("return",void this.common.presentToast("\u5bc6\u7801\u4e2d\u5fc5\u987b\u5305\u542b\u5b57\u6bcd(\u533a\u5206\u5927\u5c0f\u5199)\u3001\u6570\u5b57, \u4e14\u957f\u5ea6\u57286-30\u4f4d\u3002"));case 2:return e.next=4,this.common.loadingPresent("\u5904\u7406\u4e2d.......");case 4:return t=e.sent,e.next=7,this.ymsrv.validVerifyCode(this.the_model.phone,this.the_model.verifyCode,this.token);case 7:if(0==(n=e.sent).code){e.next=10;break}return e.abrupt("return",(this.common.presentToast(n.msg),void t.dismiss()));case 10:return(o=new FormData).append("Id",this.userId),o.append("NewPass",this.the_model.passWord),o.append("ConfirmPass",this.the_model.passWord),o.append("isReset","false"),o.append("MobileNo",this.the_model.phone),e.next=14,this.ymsrv.bind_user(o,this.token);case 14:r=e.sent,t.dismiss(),0==r.code?(this.common.presentToast("\u8d26\u53f7\u7ed1\u5b9a\u6210\u529f\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u60a8\u7684\u8d26\u53f7\u6216\u7ed1\u5b9a\u7684\u624b\u673a\u53f7\u7801+\u60a8\u521a\u8bbe\u7f6e\u7684\u5bc6\u7801\u8fdb\u884c\u767b\u5f55\uff01","success"),setTimeout((function(){s.router.navigate(["login"],{replaceUrl:!0,skipLocationChange:!0})}),2e3)):this.common.presentToast(r.msg);case 16:case"end":return e.stop()}}),e,this)})))}}]),e}(),o.\u0275fac=function(e){return new(e||o)(p["\u0275\u0275directiveInject"](m.a),p["\u0275\u0275directiveInject"](u.a),p["\u0275\u0275directiveInject"](d.g),p["\u0275\u0275directiveInject"](d.a))},o.\u0275cmp=p["\u0275\u0275defineComponent"]({type:o,selectors:[["app-bind-phone"]],decls:21,vars:5,consts:[["slot","start"],["defaultHref","tabs"],[1,"bgfff",2,"padding","40px"],[3,"ngSubmit"],["form","ngForm"],[1,"ion-no-padding","ion-text-sm-left"],["name","phone","type","text","placeholder","\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801","clearInput","true","inputmode","tel","required","",3,"ngModel","ngModelChange"],["name","verifycode","type","number","placeholder","\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801","inputmode","numeric","clearInput","true","maxlength","6","required","",3,"ngModel","ngModelChange"],["color","light","slot","end",3,"click"],["name","password","type","password","placeholder","6-30\u4f4d\uff0c\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57","required","",3,"ngModel","ngModelChange"],[2,"margin-top","30px"],["type","submit","expand","block",3,"disabled"]],template:function(e,t){if(1&e){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-header"),p["\u0275\u0275elementStart"](1,"ion-toolbar"),p["\u0275\u0275elementStart"](2,"ion-buttons",0),p["\u0275\u0275element"](3,"ion-back-button",1),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ion-title"),p["\u0275\u0275text"](5,"\u7ed1\u5b9a\u624b\u673a"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"ion-content",2),p["\u0275\u0275elementStart"](7,"form",3,4),p["\u0275\u0275listener"]("ngSubmit",(function(){p["\u0275\u0275restoreView"](n);var e=p["\u0275\u0275reference"](8);return t.bindUser(e)})),p["\u0275\u0275elementStart"](9,"ion-list"),p["\u0275\u0275elementStart"](10,"ion-item",5),p["\u0275\u0275elementStart"](11,"ion-input",6),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.the_model.phone=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"ion-item",5),p["\u0275\u0275elementStart"](13,"ion-input",7),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.the_model.verifyCode=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"ion-badge",8),p["\u0275\u0275listener"]("click",(function(){return t.sendSms()})),p["\u0275\u0275text"](15),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](16,"ion-item",5),p["\u0275\u0275elementStart"](17,"ion-input",9),p["\u0275\u0275listener"]("ngModelChange",(function(e){return t.the_model.passWord=e})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](18,"div",10),p["\u0275\u0275elementStart"](19,"ion-button",11),p["\u0275\u0275text"](20,"\u63d0\u4ea4"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){var o=p["\u0275\u0275reference"](8);p["\u0275\u0275advance"](11),p["\u0275\u0275property"]("ngModel",t.the_model.phone),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.the_model.verifyCode),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](t.secondText),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngModel",t.the_model.passWord),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("disabled",o.invalid)}},directives:[a.IonHeader,a.IonToolbar,a.IonButtons,a.IonBackButton,a.IonBackButtonDelegate,a.IonTitle,a.IonContent,i["\u0275angular_packages_forms_forms_y"],i.NgControlStatusGroup,i.NgForm,a.IonList,a.IonItem,a.IonInput,a.TextValueAccessor,i.RequiredValidator,i.NgControlStatus,i.NgModel,a.NumericValueAccessor,i.MaxLengthValidator,a.IonBadge,a.IonButton],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:20px;--padding-end:20px;--padding-top:20px;--padding-bottom:20px}ion-badge[_ngcontent-%COMP%]{--padding-top:8px;--padding-bottom:8px}"]}),o)}],f=((r=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:r}),r.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||r)},imports:[[d.i.forChild(h)],d.i]}),r);n.d(t,"BindPhonePageModule",(function(){return v}));var g,v=((g=function e(){_classCallCheck(this,e)}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:g}),g.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(e){return new(e||g)},imports:[[s.CommonModule,i.FormsModule,a.IonicModule,f]]}),g)}}]);