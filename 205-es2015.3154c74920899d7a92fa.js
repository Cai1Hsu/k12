(window.webpackJsonp=window.webpackJsonp||[]).push([[205],{PKS2:function(e,t,n){"use strict";n.r(t);var r=n("ofXK"),a=n("3Pt+"),l=n("TEn/"),o=n("tyNb"),i=n("mrSG"),d=n("4VNH"),m=n("26ZW"),s=n("AytR"),c=n("qXBG"),h=n("LWQN"),u=n("fXoL");function p(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-list"),u["\u0275\u0275elementStart"](1,"ion-item"),u["\u0275\u0275elementStart"](2,"ion-thumbnail",3),u["\u0275\u0275element"](3,"img",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ion-label"),u["\u0275\u0275text"](5),u["\u0275\u0275elementStart"](6,"ion-text",5),u["\u0275\u0275text"](7),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](8,"p"),u["\u0275\u0275element"](9,"p"),u["\u0275\u0275elementStart"](10,"p"),u["\u0275\u0275text"](11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"ion-badge",6),u["\u0275\u0275text"](13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](14,"ion-item"),u["\u0275\u0275elementStart"](15,"ion-label"),u["\u0275\u0275elementStart"](16,"h3"),u["\u0275\u0275text"](17,"\u8bf7\u5047\u7c7b\u578b"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](18,"ion-label"),u["\u0275\u0275elementStart"](19,"h3"),u["\u0275\u0275text"](20),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"ion-item"),u["\u0275\u0275elementStart"](22,"ion-label"),u["\u0275\u0275elementStart"](23,"h3"),u["\u0275\u0275text"](24,"\u8bf7\u5047\u65b9\u5f0f"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](25,"ion-label"),u["\u0275\u0275elementStart"](26,"h3"),u["\u0275\u0275text"](27),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"ion-item"),u["\u0275\u0275elementStart"](29,"ion-label"),u["\u0275\u0275elementStart"](30,"h3"),u["\u0275\u0275text"](31,"\u8bf7\u5047\u4e8b\u7531"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](32,"ion-label",7),u["\u0275\u0275elementStart"](33,"h3"),u["\u0275\u0275text"](34),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](35,"ion-item"),u["\u0275\u0275elementStart"](36,"ion-label"),u["\u0275\u0275elementStart"](37,"h3"),u["\u0275\u0275text"](38,"\u65f6\u95f4"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"ion-label",7),u["\u0275\u0275elementStart"](40,"h3"),u["\u0275\u0275text"](41),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](42,"ion-item"),u["\u0275\u0275elementStart"](43,"ion-label"),u["\u0275\u0275elementStart"](44,"h3"),u["\u0275\u0275text"](45,"\u7533\u8bf7\u65f6\u95f4"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](46,"ion-label"),u["\u0275\u0275elementStart"](47,"h3"),u["\u0275\u0275text"](48),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](49,"ion-item"),u["\u0275\u0275elementStart"](50,"ion-label"),u["\u0275\u0275elementStart"](51,"h3"),u["\u0275\u0275text"](52,"\u7533\u8bf7\u4eba"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](53,"ion-label"),u["\u0275\u0275elementStart"](54,"h3"),u["\u0275\u0275text"](55),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](56,"ion-item"),u["\u0275\u0275elementStart"](57,"ion-label"),u["\u0275\u0275elementStart"](58,"h3"),u["\u0275\u0275text"](59,"\u5ba1\u6838\u65f6\u95f4"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](60,"ion-label"),u["\u0275\u0275elementStart"](61,"h3"),u["\u0275\u0275text"](62),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](63,"ion-item"),u["\u0275\u0275elementStart"](64,"ion-label"),u["\u0275\u0275elementStart"](65,"h3"),u["\u0275\u0275text"](66,"\u5ba1\u6838\u4eba"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](67,"ion-label"),u["\u0275\u0275elementStart"](68,"h3"),u["\u0275\u0275text"](69),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](70,"ion-item"),u["\u0275\u0275elementStart"](71,"ion-label"),u["\u0275\u0275elementStart"](72,"h3"),u["\u0275\u0275text"](73,"\u5ba1\u6838\u610f\u89c1"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](74,"ion-label",7),u["\u0275\u0275elementStart"](75,"h3"),u["\u0275\u0275text"](76),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){const e=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("src",e.the_record.student.avatar,u["\u0275\u0275sanitizeUrl"]),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.the_record.student.name," "),u["\u0275\u0275advance"](1),u["\u0275\u0275propertyInterpolate"]("color",e.status_color),u["\u0275\u0275advance"](1),u["\u0275\u0275textInterpolate1"](" \xa0\xa0\xa0",e.the_record.status_text," "),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](e.the_record.student.registerid),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate1"](" ",e.the_record.student.grade.name," "),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.leave_type),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.occurence),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.reason),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.leave_data_description),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.submit_on),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.reputy_by),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](0==e.the_record.status?"":e.the_record.approve_on),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](0==e.the_record.status?"":e.the_record.approve_by),u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](e.the_record.approve_remark)}}function E(e,t){if(1&e){const e=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-footer"),u["\u0275\u0275elementStart"](1,"ion-grid"),u["\u0275\u0275elementStart"](2,"ion-row"),u["\u0275\u0275elementStart"](3,"ion-col"),u["\u0275\u0275elementStart"](4,"ion-button",8),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().audit(!0)})),u["\u0275\u0275element"](5,"ion-icon",9),u["\u0275\u0275text"](6,"\u901a\u8fc7 "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"ion-col"),u["\u0275\u0275elementStart"](8,"ion-button",10),u["\u0275\u0275listener"]("click",(function(){return u["\u0275\u0275restoreView"](e),u["\u0275\u0275nextContext"]().audit(!1)})),u["\u0275\u0275element"](9,"ion-icon",11),u["\u0275\u0275text"](10,"\u62d2\u7edd "),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}}const S=[{path:"",component:(()=>{class e{constructor(e,t,n,r,a){this.osrv=e,this.route=t,this.alertController=n,this.auth=r,this.comm=a,this.isTeacher=!1,this.status_color="success"}ngOnInit(){this.load()}load(){return Object(i.a)(this,void 0,void 0,(function*(){this.route.params.subscribe(e=>Object(i.a)(this,void 0,void 0,(function*(){var t=yield this.comm.loadingPresent();this.theId=e.id;let n=yield this.osrv.get_leave_detail(e.id);if(this.the_record=n.data,this.the_record)switch(this.the_record.status){case 0:this.status_color="primary";break;case 1:this.status_color="success";break;case 2:this.status_color="danger"}this.the_record&&this.the_record.student&&(""==this.the_record.student.avatar||null==this.the_record.student.avatar)&&(this.the_record.student.avatar=s.a.default_avatar),t.dismiss()}))),this.theUser=yield this.auth.get_user(),this.theUser.roles.forEach(e=>{4==e.userType&&(this.isTeacher=!0)})}))}audit(e){return Object(i.a)(this,void 0,void 0,(function*(){if(e)this.audit_post(!0,"\u8bf7\u5047\u901a\u8fc7");else{const e=yield this.alertController.create({header:"\u8bf7\u8f93\u5165\u62d2\u7edd\u539f\u56e0",inputs:[{name:"reason",type:"textarea",placeholder:"\u8bf7\u8f93\u5165\u62d2\u7edd\u539f\u56e0"}],buttons:[{text:"\u53d6\u6d88",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"\u786e\u5b9a",handler:e=>{if(""==e.reason)return this.comm.presentToast("\u8bf7\u8f93\u5165\u62d2\u7edd\u539f\u56e0"),!1;this.audit_post(!1,e.reason)}}]});yield e.present()}}))}audit_post(e,t){return Object(i.a)(this,void 0,void 0,(function*(){let n=new d.a;n.Audit=e,n.Reason=t,n.Id=this.theId,n.UserName=this.theUser.userName,this.osrv.post_leave_audit(n).then(e=>"0"==e.code?(this.comm.presentToast("\u5ba1\u6838\u6210\u529f"),this.load(),!1):(this.comm.presentToast(e.msg),!1))}))}}return e.\u0275fac=function(t){return new(t||e)(u["\u0275\u0275directiveInject"](m.a),u["\u0275\u0275directiveInject"](o.a),u["\u0275\u0275directiveInject"](l.AlertController),u["\u0275\u0275directiveInject"](c.a),u["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=u["\u0275\u0275defineComponent"]({type:e,selectors:[["app-leaves-detail"]],decls:9,vars:2,consts:[["slot","start"],["defaultHref","tabs"],[4,"ngIf"],["slot","start",1,"avatar"],[1,"avatar-image",3,"src"],[2,"font-size","small",3,"color"],["slot","end",1,"grade_badge"],[1,"ion-text-wrap"],["color","primary","expand","block",3,"click"],["name","checkmark-outline"],["color","danger","expand","block",3,"click"],["name","close-outline"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-header"),u["\u0275\u0275elementStart"](1,"ion-toolbar"),u["\u0275\u0275elementStart"](2,"ion-buttons",0),u["\u0275\u0275element"](3,"ion-back-button",1),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](4,"ion-title"),u["\u0275\u0275text"](5,"\u5b66\u751f\u8bf7\u5047\u660e\u7ec6"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](6,"ion-content"),u["\u0275\u0275template"](7,p,77,15,"ion-list",2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](8,E,11,0,"ion-footer",2)),2&e&&(u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("ngIf",t.the_record),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf",t.the_record&&0==t.the_record.status&&t.isTeacher))},directives:[l.IonHeader,l.IonToolbar,l.IonButtons,l.IonBackButton,l.IonBackButtonDelegate,l.IonTitle,l.IonContent,r.NgIf,l.IonList,l.IonItem,l.IonThumbnail,l.IonLabel,l.IonText,l.IonBadge,l.IonFooter,l.IonGrid,l.IonRow,l.IonCol,l.IonButton,l.IonIcon],styles:[".grade_badge[_ngcontent-%COMP%]{background:#e3e8fb;color:#42316d;font-weight:400}"]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.i.forChild(S)],o.i]}),e})();n.d(t,"LeavesDetailPageModule",(function(){return x}));let x=(()=>{class e{}return e.\u0275mod=u["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,a.FormsModule,l.IonicModule,v]]}),e})()}}]);