function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[78],{"6/gD":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("mrSG"),i=n("AytR"),o=n("a/9d"),a=n("fXoL"),s=function(){var e=function(){function e(t){_classCallCheck(this,e),this.camera=t,this.photos=[],this.photo_info=[]}return _createClass(e,[{key:"add_new",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={quality:i.a.quality,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,sourceType:this.camera.PictureSourceType.CAMERA,correctOrientation:!1,saveToPhotoAlbum:!1,targetWidth:i.a.image_width,targetHeight:i.a.image_height},e.next=3,this.camera.getPicture(t);case 3:n=e.sent,this.photo_info.push({base64:"data:image/jpeg;base64,"+n,ext:".jpg",name:"",url:""});case 5:case"end":return e.stop()}}),e,this)})))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](o.a))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"Ql/B":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("ofXK"),i=n("TEn/"),o=n("3Pt+"),a=n("UMfn"),s=n("xiOZ"),c=n("/l6y"),l=n("L1u3"),u=n("8pq7"),m=n("ZE2D"),h=n("DKVz"),d=n("DXzV"),f=n("fXoL"),p=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,i.IonicModule,o.FormsModule,a.a,s.b,c.d,u.c,u.b,u.e,u.a,u.f,l.b,h.a,m.b,d.b],a.a,l.b,u.c,u.b,u.e,u.a,u.f,m.b,d.b]}),e}()},ZE2D:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return g}));var r=n("207e"),i=n("JMSK"),o=n("fXoL"),a=n("2Suw"),s=n("/KA4"),c=n("IjuJ"),l=n("ofXK"),u=n("FwiY"),m=["textEl"];function h(e,t){if(1&e&&o["\u0275\u0275element"](0,"i",3),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("nzType",n.nzIcon)}}function d(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"img",4),o["\u0275\u0275listener"]("error",(function(e){return o["\u0275\u0275restoreView"](n),o["\u0275\u0275nextContext"]().imgError(e)})),o["\u0275\u0275elementEnd"]()}if(2&e){var r=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("src",r.nzSrc,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275attribute"]("srcset",r.nzSrcSet,o["\u0275\u0275sanitizeUrl"])("alt",r.nzAlt)}}function f(e,t){if(1&e&&(o["\u0275\u0275elementStart"](0,"span",5,6),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()),2&e){var n=o["\u0275\u0275nextContext"]();o["\u0275\u0275property"]("ngStyle",n.textStyles),o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](n.nzText)}}var p=["*"],v=function(){var e=function(){function e(t,n,r,i){_classCallCheck(this,e),this.nzConfigService=t,this.elementRef=n,this.cdr=r,this.platform=i,this._nzModuleName="avatar",this.nzShape="circle",this.nzSize="default",this.nzGap=4,this.nzError=new o.EventEmitter,this.hasText=!1,this.hasSrc=!0,this.hasIcon=!1,this.textStyles={},this.classMap={},this.customSize=null,this.el=this.elementRef.nativeElement,this.elementRef.nativeElement.classList.add("ant-avatar")}return _createClass(e,[{key:"imgError",value:function(e){this.nzError.emit(e),e.defaultPrevented||(this.hasSrc=!1,this.hasIcon=!1,this.hasText=!1,this.nzIcon?this.hasIcon=!0:this.nzText&&(this.hasText=!0),this.cdr.detectChanges(),this.setSizeStyle(),this.notifyCalc())}},{key:"ngOnChanges",value:function(){this.hasText=!this.nzSrc&&!!this.nzText,this.hasIcon=!this.nzSrc&&!!this.nzIcon,this.hasSrc=!!this.nzSrc,this.setSizeStyle(),this.notifyCalc()}},{key:"calcStringSize",value:function(){if(this.hasText){var e=this.textEl.nativeElement.offsetWidth,t=this.el.getBoundingClientRect().width,n=2*this.nzGap<t?2*this.nzGap:8;this.textStyles={transform:"scale(".concat(t-n<e?(t-n)/e:1,") translateX(-50%)")},this.customSize&&Object.assign(this.textStyles,{lineHeight:this.customSize}),this.cdr.detectChanges()}}},{key:"notifyCalc",value:function(){var e=this;this.platform.isBrowser&&setTimeout((function(){e.calcStringSize()}))}},{key:"setSizeStyle",value:function(){this.customSize="number"==typeof this.nzSize?"".concat(this.nzSize,"px"):null,this.cdr.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](a.a),o["\u0275\u0275directiveInject"](o.ElementRef),o["\u0275\u0275directiveInject"](o.ChangeDetectorRef),o["\u0275\u0275directiveInject"](i.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-avatar"]],viewQuery:function(e,t){var n;1&e&&o["\u0275\u0275viewQuery"](m,!0),2&e&&o["\u0275\u0275queryRefresh"](n=o["\u0275\u0275loadQuery"]())&&(t.textEl=n.first)},hostVars:20,hostBindings:function(e,t){2&e&&(o["\u0275\u0275styleProp"]("width",t.customSize)("height",t.customSize)("line-height",t.customSize)("font-size",t.hasIcon&&t.customSize?t.nzSize/2:null,"px"),o["\u0275\u0275classProp"]("ant-avatar-lg","large"===t.nzSize)("ant-avatar-sm","small"===t.nzSize)("ant-avatar-square","square"===t.nzShape)("ant-avatar-circle","circle"===t.nzShape)("ant-avatar-icon",t.nzIcon)("ant-avatar-image",t.hasSrc))},inputs:{nzShape:"nzShape",nzSize:"nzSize",nzGap:"nzGap",nzText:"nzText",nzSrc:"nzSrc",nzSrcSet:"nzSrcSet",nzAlt:"nzAlt",nzIcon:"nzIcon"},outputs:{nzError:"nzError"},exportAs:["nzAvatar"],features:[o["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:3,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[3,"src","error",4,"ngIf"],["class","ant-avatar-string",3,"ngStyle",4,"ngIf"],["nz-icon","",3,"nzType"],[3,"src","error"],[1,"ant-avatar-string",3,"ngStyle"],["textEl",""]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,h,1,1,"i",0),o["\u0275\u0275template"](1,d,1,3,"img",1),o["\u0275\u0275template"](2,f,3,2,"span",2)),2&e&&(o["\u0275\u0275property"]("ngIf",t.nzIcon&&t.hasIcon),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.nzSrc&&t.hasSrc),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.nzText&&t.hasText))},directives:[l.NgIf,u.a,l.NgStyle],encapsulation:2,changeDetection:0}),Object(r.a)([Object(a.b)(),Object(r.b)("design:type",String)],e.prototype,"nzShape",void 0),Object(r.a)([Object(a.b)(),Object(r.b)("design:type",Object)],e.prototype,"nzSize",void 0),Object(r.a)([Object(a.b)(),Object(s.b)(),Object(r.b)("design:type",Object)],e.prototype,"nzGap",void 0),e}(),g=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["nz-avatar-group"]],hostAttrs:[1,"ant-avatar-group"],exportAs:["nzAvatarGroup"],ngContentSelectors:p,decls:1,vars:0,template:function(e,t){1&e&&(o["\u0275\u0275projectionDef"](),o["\u0275\u0275projection"](0))},encapsulation:2,changeDetection:0}),e}(),x=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=o["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[c.a,l.CommonModule,u.b,i.b]]}),e}()},deo1:function(e,t,n){"use strict";n.r(t);var r=n("TEn/"),i=n("tyNb"),o=n("ofXK"),a=n("3Pt+"),s=n("mrSG"),c=n("qXBG"),l=n("tAfe"),u=n("6/gD"),m=n("26ZW"),h=n("B7Rs"),d=n("AytR"),f=n("F1TJ"),p=n("LWQN"),v=n("OKzL"),g=n("fXoL"),x=n("e8h1");function y(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"span"),g["\u0275\u0275elementStart"](1,"ion-badge",19),g["\u0275\u0275text"](2),g["\u0275\u0275elementEnd"](),g["\u0275\u0275text"](3,"\xa0 "),g["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](1),g["\u0275\u0275propertyInterpolate"]("color",r.getRandomColor(n)),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate"](n.roleName)}}function S(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ion-chip",20),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](2).changeRole()})),g["\u0275\u0275namespaceSVG"](),g["\u0275\u0275elementStart"](1,"svg",21),g["\u0275\u0275element"](2,"use",22),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function b(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ion-col",26),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](3).students()})),g["\u0275\u0275element"](1,"ion-icon",27),g["\u0275\u0275elementStart"](2,"ion-label"),g["\u0275\u0275elementStart"](3,"h3"),g["\u0275\u0275text"](4,"\u6211\u7684\u5b66\u751f"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function C(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ion-col",28),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](3).timetable()})),g["\u0275\u0275element"](1,"ion-icon",29),g["\u0275\u0275elementStart"](2,"ion-label"),g["\u0275\u0275elementStart"](3,"h3"),g["\u0275\u0275text"](4,"\u6211\u7684\u8bfe\u8868"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function z(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"ion-slides",23),g["\u0275\u0275elementStart"](1,"ion-slide"),g["\u0275\u0275elementStart"](2,"ion-grid"),g["\u0275\u0275elementStart"](3,"ion-row"),g["\u0275\u0275template"](4,b,5,0,"ion-col",24),g["\u0275\u0275template"](5,C,5,0,"ion-col",25),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",n.is_teacher),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!n.is_admin)}}function I(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ion-col",32),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](4).timetable()})),g["\u0275\u0275element"](1,"ion-icon",34),g["\u0275\u0275elementStart"](2,"div"),g["\u0275\u0275elementStart"](3,"ion-label"),g["\u0275\u0275elementStart"](4,"h3"),g["\u0275\u0275text"](5,"\u6211\u7684\u8bfe\u8868"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ion-grid"),g["\u0275\u0275elementStart"](1,"ion-row"),g["\u0275\u0275template"](2,I,6,0,"ion-col",31),g["\u0275\u0275elementStart"](3,"ion-col",32),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"](3).dormitory()})),g["\u0275\u0275element"](4,"ion-icon",33),g["\u0275\u0275elementStart"](5,"div"),g["\u0275\u0275elementStart"](6,"ion-label"),g["\u0275\u0275elementStart"](7,"h3"),g["\u0275\u0275text"](8,"\u6211\u7684\u4f4f\u5bbf"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var r=g["\u0275\u0275nextContext"](3);g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",!r.is_admin)}}function w(e,t){if(1&e&&(g["\u0275\u0275elementStart"](0,"ion-slides",23),g["\u0275\u0275elementStart"](1,"ion-slide"),g["\u0275\u0275template"](2,k,9,1,"ion-grid",30),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e){var n=g["\u0275\u0275nextContext"](2);g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",n.is_student)}}var E=function(){return["/me/teacher-person-archives"]};function _(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"ion-item",17),g["\u0275\u0275element"](1,"ion-icon",35),g["\u0275\u0275elementStart"](2,"ion-label"),g["\u0275\u0275elementStart"](3,"h3"),g["\u0275\u0275text"](4,"\u53d1\u5c55\u6863\u6848"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](1,E))}var R=function(){return["/me/teacher-person-info"]};function j(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"ion-item",17),g["\u0275\u0275element"](1,"ion-icon",36),g["\u0275\u0275elementStart"](2,"ion-label"),g["\u0275\u0275elementStart"](3,"h3"),g["\u0275\u0275text"](4,"\u4e2a\u4eba\u8d44\u6599"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](1,R))}var O=function(){return["/me/student-person-info"]};function T(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"ion-item",17),g["\u0275\u0275element"](1,"ion-icon",36),g["\u0275\u0275elementStart"](2,"ion-label"),g["\u0275\u0275elementStart"](3,"h3"),g["\u0275\u0275text"](4,"\u4e2a\u4eba\u8d44\u6599"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()),2&e&&g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](1,O))}var N=function(){return["/me/user-profile"]},P=function(){return["/me/feedback"]};function M(e,t){if(1&e){var n=g["\u0275\u0275getCurrentView"]();g["\u0275\u0275elementStart"](0,"ion-content",2),g["\u0275\u0275elementStart"](1,"ion-list",3),g["\u0275\u0275elementStart"](2,"ion-item",4),g["\u0275\u0275elementStart"](3,"ion-thumbnail",5),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().upload_avatar()})),g["\u0275\u0275element"](4,"img",6),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](5,"ion-label",7),g["\u0275\u0275text"](6),g["\u0275\u0275elementStart"](7,"span",8),g["\u0275\u0275text"](8),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](9,"p"),g["\u0275\u0275text"](10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementStart"](11,"p",9),g["\u0275\u0275template"](12,y,4,2,"span",10),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](13,S,3,0,"ion-chip",11),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](14,z,6,2,"ion-slides",12),g["\u0275\u0275template"](15,w,3,1,"ion-slides",12),g["\u0275\u0275elementStart"](16,"ion-list",13),g["\u0275\u0275template"](17,_,5,2,"ion-item",14),g["\u0275\u0275template"](18,j,5,2,"ion-item",14),g["\u0275\u0275template"](19,T,5,2,"ion-item",14),g["\u0275\u0275elementStart"](20,"ion-item",15),g["\u0275\u0275listener"]("click",(function(){return g["\u0275\u0275restoreView"](n),g["\u0275\u0275nextContext"]().setting()})),g["\u0275\u0275element"](21,"ion-icon",16),g["\u0275\u0275elementStart"](22,"ion-label"),g["\u0275\u0275elementStart"](23,"h3"),g["\u0275\u0275text"](24,"\u8bbe\u7f6e"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275element"](25,"ion-list"),g["\u0275\u0275elementStart"](26,"ion-list",13),g["\u0275\u0275elementStart"](27,"ion-item",17),g["\u0275\u0275element"](28,"ion-icon",18),g["\u0275\u0275elementStart"](29,"ion-label"),g["\u0275\u0275elementStart"](30,"h3"),g["\u0275\u0275text"](31,"\u610f\u89c1\u53cd\u9988"),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"]()}if(2&e){var r=g["\u0275\u0275nextContext"]();g["\u0275\u0275property"]("fullscreen",!0),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("src",r.user.avatarUrl,g["\u0275\u0275sanitizeUrl"]),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](14,N)),g["\u0275\u0275advance"](1),g["\u0275\u0275textInterpolate1"](" ",r.user.userName," \xa0\xa0"),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](r.user.accountName),g["\u0275\u0275advance"](2),g["\u0275\u0275textInterpolate"](r.user.schoolName),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngForOf",r.user.roles),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",r.showChangeRole),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",!r.is_student),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",r.is_student),g["\u0275\u0275advance"](2),g["\u0275\u0275property"]("ngIf",r.is_teacher),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",r.is_teacher),g["\u0275\u0275advance"](1),g["\u0275\u0275property"]("ngIf",r.is_student),g["\u0275\u0275advance"](8),g["\u0275\u0275property"]("routerLink",g["\u0275\u0275pureFunction0"](15,P))}}var L,A=((L=function(){function e(t,n,r,i,o,a,s,c,l,u,m,h,f,p){var v=this;_classCallCheck(this,e),this.actionSheetController=t,this.authSrv=n,this.route=r,this.photosrv=i,this.imagePicker=o,this.toastController=a,this.orsv=s,this.storage=c,this.transfer=l,this.platform=u,this.loadingController=m,this.jpush=h,this.comm=f,this.routeActived=p,this.showChangeRole=!1,this.fileTransfer=this.transfer.create(),this.default_avatar=d.a.default_avatar,this.array_colors=["primary","secondary","tertiary","success","warning","danger"],this.role_color_object=[{RoleName:"\u7ba1\u7406\u5458",ColorName:"primary"},{RoleName:"\u6559\u5e08",ColorName:"secondary"},{RoleName:"\u5bfc\u5e08",ColorName:"tertiary"},{RoleName:"\u5bb6\u957f",ColorName:"success"},{RoleName:"\u5b66\u751f",ColorName:"warning"},{RoleName:"\u62db\u751f\u529e",ColorName:"danger"},{RoleName:"\u73ed\u957f",ColorName:"warning"},{RoleName:"\u6f14\u793a",ColorName:"secondary"}],this.storage.get("USER_INFO").then((function(e){v.showChangeRole=e.roles.length>1}))}return _createClass(e,[{key:"ionViewWillEnter",value:function(){var e=this;this.routeActived.url.subscribe((function(t){e.init()}))}},{key:"init",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authSrv.get_user();case 2:return this.user=e.sent,e.next=5,this.authSrv.is_student();case 5:return this.is_student=e.sent,e.next=8,this.authSrv.is_teacher();case 8:return this.is_teacher=e.sent,e.next=11,this.authSrv.is_admin();case 11:this.is_admin=e.sent;case 12:case"end":return e.stop()}}),e,this)})))}},{key:"collection",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/me/collection"]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"history",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/me/history"]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"timetable",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/me/my-timetable"]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"students",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/features/klasses"]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"logout",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetController.create({buttons:[{text:"\u786e\u8ba4\u6ce8\u9500",icon:"log-out-outline",handler:function(){return Object(s.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.authSrv.logout();case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e,this)})))}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"upload_avatar",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.actionSheetController.create({header:"\u4e0a\u4f20\u5934\u50cf",buttons:[{text:"\u67e5\u770b\u5927\u56fe",icon:"search-outline",handler:function(){n.comm.presentModal(v.a,"",{Images:[n.user.avatarUrl],index:0})}},{text:"\u62cd\u7167",icon:"camera-outline",handler:function(){return Object(s.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.photosrv.add_new();case 2:if(this.photosrv.photo_info.length>0){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,this.comm.loadingPresent();case 6:return t=e.sent,n=this.photosrv.photo_info[0],e.next=10,this.orsv.upload_pic(n.base64,n.ext);case 10:return r=e.sent,this.photosrv.photo_info=new Array,e.next=14,this.orsv.upload_avatar({userid:this.user.userID,avatarUrl:r.url,modifiedBy:this.user.userName});case 14:if(e.t0=e.sent.code,e.t1=0==e.t0,!e.t1){e.next=18;break}this.presentToast("\u4e0a\u4f20\u5934\u50cf\u6210\u529f\uff01","success"),this.user.avatarUrl=r.url,this.storage.set("USER_INFO",this.user);case 18:return t.dismiss(),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})))}},{text:"\u4ece\u624b\u673a\u76f8\u518c\u9009\u62e9",icon:"image-outline",handler:function(){return Object(s.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.imagePicker.getPictures({maximumImagesCount:1,outputType:0,title:"\u9009\u62e9\u7167\u7247",message:"\u9009\u62e9\u56fe\u7247",quality:d.a.quality,width:d.a.image_width,height:d.a.image_height,disable_popover:!0}).then((function(e){return Object(s.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=e.length){t.next=2;break}return t.abrupt("return",!1);case 2:return n=e[0],t.next=5,this.authSrv.get_token();case 5:return r="Bearer "+(r=t.sent),t.next=9,this.presentLoading("\u52a0\u8f7d\u4e2d.........");case 9:return i=t.sent,t.abrupt("return",(this.fileTransfer.upload(n,d.a.ym_endpoint+"/Utility/v1/Oss/Image/File",{httpMethod:"POST",headers:{path:d.a.oss_path,Authorization:r}}).then((function(e){var t;i.dismiss(),200==e.responseCode?(t=JSON.parse(e.response),o.save_avatar(t.data.url,t.data.fileName)):o.presentToast("\u4e0a\u4f20\u5934\u50cf\u5931\u8d25\uff01")})).catch((function(e){o.presentToast("\u66f4\u65b0\u5934\u50cf\u5931\u8d25\uff01"),i.dismiss()})),!0));case 11:case"end":return t.stop()}}),t,this)})))})),!0));case 1:case"end":return e.stop()}}),e,this)})))}},{text:"\u5173\u95ed",icon:"close",role:"cancel",handler:function(){}}]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"save_avatar",value:function(e,t){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.orsv.upload_avatar({userid:this.user.userID,avatarUrl:e,modifiedBy:this.user.userName});case 2:if(0==(n=t.sent).code){t.next=5;break}return t.abrupt("return",(this.presentToast(n.msg),!1));case 5:this.presentToast("\u4e0a\u4f20\u5934\u50cf\u6210\u529f\uff01","success"),this.user.avatarUrl=e,this.storage.set("USER_INFO",this.user);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"setting",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/me/system-setting"]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"dormitory",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/me/my-bed",{studentId:this.user.userCode}]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"presentToast",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"danger";return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({message:e,color:t,duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}},{key:"presentLoading",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadingController.create({message:e,duration:0});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.abrupt("return",n);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"feedback",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"getRandomColor",value:function(e){var t="primary",n=this.role_color_object.find((function(t){return e.roleName.indexOf(t.RoleName)>0||t.RoleName===e.roleName}));return n&&(t=n.ColorName),t}},{key:"changeRole",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.route.navigate(["/me/change-role/",{}]);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||L)(g["\u0275\u0275directiveInject"](r.ActionSheetController),g["\u0275\u0275directiveInject"](c.a),g["\u0275\u0275directiveInject"](i.g),g["\u0275\u0275directiveInject"](u.a),g["\u0275\u0275directiveInject"](l.a),g["\u0275\u0275directiveInject"](r.ToastController),g["\u0275\u0275directiveInject"](m.a),g["\u0275\u0275directiveInject"](x.b),g["\u0275\u0275directiveInject"](h.a),g["\u0275\u0275directiveInject"](r.Platform),g["\u0275\u0275directiveInject"](r.LoadingController),g["\u0275\u0275directiveInject"](f.a),g["\u0275\u0275directiveInject"](p.a),g["\u0275\u0275directiveInject"](i.a))},L.\u0275cmp=g["\u0275\u0275defineComponent"]({type:L,selectors:[["app-me"]],decls:5,vars:2,consts:[[3,"translucent"],["class","me_content",3,"fullscreen",4,"ngIf"],[1,"me_content",3,"fullscreen"],["lines","full"],["lines","full",2,"margin-bottom","10px"],["slot","start",1,"avatar",3,"click"],[1,"avatar-image",3,"src"],[3,"routerLink"],[2,"font-size","small","color","darkgrey"],[2,"margin-top","5px"],[4,"ngFor","ngForOf"],["slot","end","color","_","style","margin: 0;",3,"click",4,"ngIf"],["pager","false",4,"ngIf"],[2,"border-top","5px solid #f9f7f7"],["lines","none","button","",3,"routerLink",4,"ngIf"],["lines","none","button","",3,"click"],["slot","start","color","blue",1,"iconfont","ym-font","iconshezhi"],["lines","none","button","",3,"routerLink"],["slot","start","color","blue","name","chatbox-outline"],[2,"color","#ffffff",3,"color"],["slot","end","color","_",2,"margin","0",3,"click"],["aria-hidden","true",1,"icon",2,"width","5rem","height","5rem","margin","0 auto"],[0,"xlink","href","#iconqiehuanjiaose"],["pager","false"],["size","3","style","text-align: center;",3,"click",4,"ngIf"],["size","3","button","","style","text-align: center;",3,"click",4,"ngIf"],["size","3",2,"text-align","center",3,"click"],["color","blue",1,"iconfont","ym-font","iconxueshengi-active"],["size","3","button","",2,"text-align","center",3,"click"],["color","purple",1,"iconfont","ym-font","iconkebiao"],[4,"ngIf"],["size","3","button","","style","text-align: center;padding-top:9px",3,"click",4,"ngIf"],["size","3","button","",2,"text-align","center","padding-top","9px",3,"click"],["color","yellow",1,"iconfont","ym-fontsmail","iconwodezhusu"],["color","purple",1,"iconfont","ym-fontsmail","iconkebiao"],["slot","start","color","red",1,"iconfont","ym-font","iconjiaoxuepinggu-01"],["slot","start","color","green",1,"iconfont","ym-font","iconxueyuandangan-01"]],template:function(e,t){1&e&&(g["\u0275\u0275elementStart"](0,"ion-header",0),g["\u0275\u0275elementStart"](1,"ion-toolbar"),g["\u0275\u0275elementStart"](2,"ion-title"),g["\u0275\u0275text"](3," \u6211 "),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275elementEnd"](),g["\u0275\u0275template"](4,M,32,16,"ion-content",1)),2&e&&(g["\u0275\u0275property"]("translucent",!0),g["\u0275\u0275advance"](4),g["\u0275\u0275property"]("ngIf",t.user))},directives:[r.IonHeader,r.IonToolbar,r.IonTitle,o.NgIf,r.IonContent,r.IonList,r.IonItem,r.IonThumbnail,r.IonLabel,r.RouterLinkDelegate,i.h,o.NgForOf,r.IonIcon,r.IonBadge,r.IonChip,r.IonSlides,r.IonSlide,r.IonGrid,r.IonRow,r.IonCol],styles:["ion-content[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background:translucent}ion-slides[_ngcontent-%COMP%]{background:#fff}.me_content[_ngcontent-%COMP%]{--background:#f9f7f7}.header-ios[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]:last-of-type{--border-width:0}.item[_ngcontent-%COMP%]{border-top:5px solid #f9f7f7}.icon[_ngcontent-%COMP%]{width:1.4rem;height:1.4rem;vertical-align:-.15em;fill:currentColor;overflow:hidden;margin-right:10px}"]}),L),V=n("qtYk"),F=n("Ql/B");n.d(t,"MePageModule",(function(){return D}));var U,D=((U=function e(){_classCallCheck(this,e)}).\u0275mod=g["\u0275\u0275defineNgModule"]({type:U}),U.\u0275inj=g["\u0275\u0275defineInjector"]({factory:function(e){return new(e||U)},imports:[[r.IonicModule,o.CommonModule,a.FormsModule,V.a,i.i.forChild([{path:"",component:A}]),F.a]]}),U)}}]);