(window.webpackJsonp=window.webpackJsonp||[]).push([[89,261],{"7eQe":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("mrSG"),i=n("LWQN"),r=n("uW3d"),l=n("fXoL"),a=n("TEn/"),d=n("3Pt+");let c=(()=>{class e{constructor(e,t,n){this.comm=e,this.modalController=t,this.csrv=n,this.name=""}ngOnInit(){}cancel(){return Object(o.a)(this,void 0,void 0,(function*(){this.modalController.dismiss()}))}submit(){return Object(o.a)(this,void 0,void 0,(function*(){if(!this.name)return void this.comm.presentToast("\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0\uff01");let e;e=this.id?yield this.csrv.update_department({id:this.id,name:this.name,selected:!1}):yield this.csrv.create_department(this.name),0==e.code?this.modalController.dismiss({flag:!0}):this.comm.presentToast(e.msg)}))}}return e.\u0275fac=function(t){return new(t||e)(l["\u0275\u0275directiveInject"](i.a),l["\u0275\u0275directiveInject"](a.ModalController),l["\u0275\u0275directiveInject"](r.a))},e.\u0275cmp=l["\u0275\u0275defineComponent"]({type:e,selectors:[["app-create"]],inputs:{title:"title",name:"name",id:"id"},decls:16,vars:2,consts:[[1,"ion-no-border"],[1,"bgfff"],["lines","none"],["placeholder","\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0",3,"ngModel","ngModelChange"],["size","6"],["type","button","color","light","expand","block",3,"click"],["type","submit","expand","block",3,"click"]],template:function(e,t){1&e&&(l["\u0275\u0275elementStart"](0,"ion-header",0),l["\u0275\u0275elementStart"](1,"ion-toolbar"),l["\u0275\u0275elementStart"](2,"ion-title"),l["\u0275\u0275text"](3),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](4,"ion-content",1),l["\u0275\u0275elementStart"](5,"ion-item",2),l["\u0275\u0275elementStart"](6,"ion-input",3),l["\u0275\u0275listener"]("ngModelChange",(function(e){return t.name=e})),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"ion-footer"),l["\u0275\u0275elementStart"](8,"ion-grid"),l["\u0275\u0275elementStart"](9,"ion-row"),l["\u0275\u0275elementStart"](10,"ion-col",4),l["\u0275\u0275elementStart"](11,"ion-button",5),l["\u0275\u0275listener"]("click",(function(){return t.cancel()})),l["\u0275\u0275text"](12,"\u53d6\u6d88"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](13,"ion-col",4),l["\u0275\u0275elementStart"](14,"ion-button",6),l["\u0275\u0275listener"]("click",(function(){return t.submit()})),l["\u0275\u0275text"](15,"\u5b8c\u6210"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()),2&e&&(l["\u0275\u0275advance"](3),l["\u0275\u0275textInterpolate"](t.title),l["\u0275\u0275advance"](3),l["\u0275\u0275property"]("ngModel",t.name))},directives:[a.IonHeader,a.IonToolbar,a.IonTitle,a.IonContent,a.IonItem,a.IonInput,a.TextValueAccessor,d.NgControlStatus,d.NgModel,a.IonFooter,a.IonGrid,a.IonRow,a.IonCol,a.IonButton],styles:["ion-item[_ngcontent-%COMP%]{--padding-end:1rem}ion-input[_ngcontent-%COMP%]{background:rgba(116,116,128,.08);border-radius:12px;--padding-start:1rem!important;--padding-end:1rem!important}"]}),e})()},N1pG:function(e,t,n){"use strict";n.r(t);var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),l=n("tyNb"),a=n("mrSG"),d=n("LWQN"),c=n("uW3d"),s=n("7eQe"),m=n("fXoL"),u=n("zxQZ");function f(e,t){if(1&e){const e=m["\u0275\u0275getCurrentView"]();m["\u0275\u0275elementStart"](0,"ion-item",8),m["\u0275\u0275listener"]("click",(function(){m["\u0275\u0275restoreView"](e);const n=t.$implicit;return m["\u0275\u0275nextContext"]().pick(n)})),m["\u0275\u0275elementStart"](1,"ion-checkbox",9),m["\u0275\u0275listener"]("ngModelChange",(function(n){return m["\u0275\u0275restoreView"](e),t.$implicit.selected=n})),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](2,"ion-label"),m["\u0275\u0275text"](3),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"a",10),m["\u0275\u0275listener"]("click",(function(n){m["\u0275\u0275restoreView"](e);const o=t.$implicit;return m["\u0275\u0275nextContext"]().edit(n,o)})),m["\u0275\u0275text"](5,"\u4fee\u6539"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngModel",e.selected),m["\u0275\u0275advance"](2),m["\u0275\u0275textInterpolate"](e.name)}}const p=function(e){return{active:e}},g=[{path:"",component:(()=>{class e{constructor(e,t,n){this.router=e,this.comm=t,this.csrv=n,this.the_records=[],this.loading=!0}ngOnInit(){this.init()}init(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.initData()}))}initData(){return Object(a.a)(this,void 0,void 0,(function*(){this.loading=!0;let e=yield this.csrv.get_department();if(0!=e.code)return this.loading=!1,void this.comm.presentToast(e.msg);this.the_records=e.data,this.loading=!1}))}add(){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.comm.presentModal(s.a,"app-update-model-css-20",{title:"\u65b0\u589e\u90e8\u95e8"})).onDidDismiss().then(e=>{e.data&&this.initData()})}))}edit(e,t){return Object(a.a)(this,void 0,void 0,(function*(){e.stopPropagation(),(yield this.comm.presentModal(s.a,"app-update-model-css-20",{title:"\u90e8\u95e8\u7ef4\u62a4",id:t.id,name:t.name})).onDidDismiss().then(e=>{e.data&&this.initData()})}))}pick(e){return Object(a.a)(this,void 0,void 0,(function*(){e.selected=!e.selected,this.can_delete=this.the_records.filter(e=>!0===e.selected).length>0}))}delete(){return Object(a.a)(this,void 0,void 0,(function*(){let e=this.the_records.filter(e=>!0===e.selected);if(0==e.length)return void this.comm.presentToast("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u90e8\u95e8\uff01");let t=yield this.csrv.delete_department(e.map(e=>e.id));0==t.code?(this.can_delete=!1,yield this.initData()):this.comm.presentToast(t.msg)}))}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](l.g),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["app-department"]],decls:16,vars:6,consts:[["slot","start"],["defaultHref","tabs"],["slot","end"],[1,"blue",3,"click"],[3,"show","loading"],[1,"mt20","bgfff"],[3,"click",4,"ngFor","ngForOf"],["expand","block",1,"btn-delete",3,"ngClass","click"],[3,"click"],["slot","start",3,"ngModel","ngModelChange"],[1,"btn-edit",3,"click"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-header"),m["\u0275\u0275elementStart"](1,"ion-toolbar"),m["\u0275\u0275elementStart"](2,"ion-buttons",0),m["\u0275\u0275element"](3,"ion-back-button",1),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](4,"ion-title"),m["\u0275\u0275text"](5,"\u90e8\u95e8\u7ef4\u62a4"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](6,"ion-buttons",2),m["\u0275\u0275elementStart"](7,"ion-button",3),m["\u0275\u0275listener"]("click",(function(){return t.add()})),m["\u0275\u0275text"](8,"\u65b0\u589e\u90e8\u95e8"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"ion-content"),m["\u0275\u0275element"](10,"app-loading-process",4),m["\u0275\u0275elementStart"](11,"ion-list",5),m["\u0275\u0275template"](12,f,6,2,"ion-item",6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](13,"ion-footer"),m["\u0275\u0275elementStart"](14,"ion-button",7),m["\u0275\u0275listener"]("click",(function(){return t.delete()})),m["\u0275\u0275text"](15,"\u5220\u9664"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](10),m["\u0275\u0275property"]("show",!t.the_records||0==t.the_records.length)("loading",t.loading),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",t.the_records),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngClass",m["\u0275\u0275pureFunction1"](4,p,!0===t.can_delete)))},directives:[r.IonHeader,r.IonToolbar,r.IonButtons,r.IonBackButton,r.IonBackButtonDelegate,r.IonTitle,r.IonButton,r.IonContent,u.a,r.IonList,o.NgForOf,r.IonFooter,o.NgClass,r.IonItem,r.IonCheckbox,r.BooleanValueAccessor,i.NgControlStatus,i.NgModel,r.IonLabel],styles:[".btn-delete[_ngcontent-%COMP%]{--border-color:#ff5501;--color:#ff5501;--background:#fff;--border-width:1px;--border-style:solid;--background-hover:#fff;--background-focused:#fff;--background-activated:#fff}.btn-delete.active[_ngcontent-%COMP%]{--color:#fff;--background:#ff5501;--background-hover:#ff5501;--background-focused:#ff5501;--background-activated:#ff5501}ion-checkbox[_ngcontent-%COMP%]{--border-color:#ff5501;--background-checked:#ff5501;--border-color-checked:#ff5501}.btn-edit[_ngcontent-%COMP%]{width:3rem;height:2rem;line-height:2rem;background:#1982ff;opacity:1;border-radius:4px;float:right;font-size:.9rem;color:#fff;text-align:center}ion-footer[_ngcontent-%COMP%]{background:#f5f6fa!important}"]}),e})()},{path:"create",loadChildren:()=>n.e(159).then(n.bind(null,"XNTf")).then(e=>e.CreatePageModule)}];let h=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.i.forChild(g)],l.i]}),e})();var b=n("Ql/B");n.d(t,"DepartmentPageModule",(function(){return v}));let v=(()=>{class e{}return e.\u0275mod=m["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=m["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.CommonModule,i.FormsModule,r.IonicModule,h,b.a]]}),e})()},zxQZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n("fXoL"),i=n("ofXK"),r=n("TEn/");function l(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",2),o["\u0275\u0275element"](1,"ion-spinner",3),o["\u0275\u0275elementEnd"]())}function a(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"div",4),o["\u0275\u0275element"](1,"img",5),o["\u0275\u0275elementEnd"]())}let d=(()=>{class e{constructor(){this.loading=!1}ngOnChanges(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["app-loading-process"]],inputs:{show:"show",loading:"loading"},features:[o["\u0275\u0275NgOnChangesFeature"]],decls:2,vars:2,consts:[["style","text-align: center;",4,"ngIf"],["slot","fixed","style","text-align: center;",4,"ngIf"],[2,"text-align","center"],["name","dots"],["slot","fixed",2,"text-align","center"],["src","assets/images/zanwushuju.png",2,"max-width","90%","max-height","50%","margin","auto"]],template:function(e,t){1&e&&(o["\u0275\u0275template"](0,l,2,0,"div",0),o["\u0275\u0275template"](1,a,2,0,"div",1)),2&e&&(o["\u0275\u0275property"]("ngIf",1==t.loading),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("ngIf",t.show&&1==t.show&&0==t.loading))},directives:[i.NgIf,r.IonSpinner],styles:[""]}),e})()}}]);